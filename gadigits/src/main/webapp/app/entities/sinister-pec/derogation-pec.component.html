<!-- Breadcrumb-->
<div class="breadcrumb-holder">
    <div class="container-fluid">
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><span class="fa fa-home"></span>&nbsp;&nbsp;<span
                        jhiTranslate="global.menu.home">Home</span></a></li>
            <li class="breadcrumb-item"><a routerLink="/dossier"><span
                        jhiTranslate="auxiliumApp.dossier.home.title">Dossiers</span></a></li>
            <li class="breadcrumb-item"><span jhiTranslate="auxiliumApp.sinister.home.details">détails PECS</span></li>

        </ul>
        <!--<div class="col-lg-12">
            <i class="fa fa-history" aria-hidden="true" (click)="historyPec()" style="font-size: 35px;
                        position: absolute; right: 16px; top: 11px;"></i>

        </div>-->
    </div>
</div>
<section class="forms">
    <div class="container-fluid">
        <!-- Page Header-->
        <header>
            <h1 class="h3 display">
                <jhi-alert-error></jhi-alert-error>
                <jhi-alert></jhi-alert>
            </h1>
        </header>
        <div class="row">
            <div class="col-lg-12">
                <form name="editForm" role="form" novalidate #editForm="ngForm">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="card">
                                <div class="card-header d-flex align-items-center no-padding">
                                    <div class="notice notice-info">
                                        <span class="fa fa-folder-open" style="color: #45ABCD"></span>&nbsp;&nbsp;
                                        <strong jhiTranslate="auxiliumApp.dossier.home.details">Détails du
                                            dossier</strong>
                                        {{sinister.reference}}
                                    </div>
                                </div>
                                <div class="card-body">
                                    <br *ngIf="showAlertSuccessSinister">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="alert alert-success" *ngIf="showAlertSuccessSinister">
                                                <strong>La modification a été mise à jour</strong>
                                                <a (click)="closeAlertSinister()" class="close" data-dismiss="alert"
                                                    aria-label="close">×</a>
                                            </div>
                                        </div>
                                    </div>
                                    <br *ngIf="showAlertSuccessSinister">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.sinister.immatriculation"
                                                    for="currentSearch">Immatriculation</label>
                                                <div class="input-group">
                                                    <input type="text" [(ngModel)]="sinister.vehicleRegistration"
                                                        (blur)="trimRegistrationNumber();"
                                                        class="form-control form-control-sm" name="currentSearch"
                                                        id="currentSearch" [readonly]="sinister.id" />
                                                    <span class="input-group-btn">
                                                        <button class="input-group-addon btn btn-sm btn-info"
                                                            [hidden]="sinister.id">
                                                            <span class="fa fa-search"></span>
                                                        </button>
                                                        <button class="input-group-addon btn btn-sm btn-info"
                                                            [hidden]="sinister.id"
                                                            [disabled]="contratAssurance !== null"
                                                            [routerLink]="['../contrat-assurance-new', sinister.vehicleRegistration ]">
                                                            <span class="fa fa-plus"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.dossier.natureIncident"
                                                    for="field_natureIncident">Nature de l'incident
                                                </label>
                                                <select class="form-control form-control-sm" name="natureIncident"
                                                    [(ngModel)]="sinister.nature" id="field_natureIncident" disabled>
                                                    <option value="PANNE"
                                                        jhiTranslate="auxiliumApp.NatureIncident.PANNE">Panne</option>
                                                    <option value="ACCIDENT"
                                                        jhiTranslate="auxiliumApp.NatureIncident.ACCIDENT">Accident
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.dossier.dateAccident"
                                                for="field_dateAccident">Date de l'accident</label>
                                            <div class="input-group">
                                                <input id="field_dateAccident" type="text"
                                                    class="form-control form-control-sm" name="dateAccident"
                                                    ngbDatepicker #dateAccidentDp="ngbDatepicker"
                                                    [(ngModel)]="sinister.incidentDate" />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="dateAccidentDp.toggle()"
                                                        [disabled]="!isContractLoaded"><i
                                                            class="fa fa-calendar"></i></button>
                                                </span>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.dossier.nbrPassagers"
                                                    for="field_nbrPassagers">Nbre de passagers</label>
                                                <input type="number" class="form-control form-control-sm"
                                                    name="nbrPassagers" id="field_nbrPassagers"
                                                    [(ngModel)]="sinister.passengerCount" [pattern]="nbrPassgrPattern"
                                                    min="{{minPssgrNumber}}" />
                                                <div
                                                    [hidden]="!(editForm.controls.nbrPassagers?.dirty && editForm.controls.nbrPassagers?.invalid)">
                                                    <small class="form-text text-danger"
                                                        [hidden]="!editForm.controls.nbrPassagers?.errors?.max"
                                                        jhiTranslate="entity.validation.max"
                                                        translateValues="{ max: 99999999 }">This
                                                        field cannot be more
                                                        than 99999999.</small>
                                                    <small class="form-text text-danger"
                                                        [hidden]="!editForm.controls.nbrPassagers?.errors?.number"
                                                        jhiTranslate="entity.validation.number">This field should be a
                                                        number.</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.dossier.telephone"
                                                    for="field_telephone">Telephone</label>
                                                <input type="text" class="form-control form-control-sm" name="telephone"
                                                    id="field_telephone" [(ngModel)]="sinister.phone"
                                                    pattern="([0-9]{1,50})" />
                                                <div
                                                    [hidden]="!(editForm.controls.telephone?.dirty && editForm.controls.telephone?.invalid)">
                                                    <small class="form-text text-danger"
                                                        [hidden]="!editForm.controls.telephone?.errors?.pattern"
                                                        jhiTranslate="entity.validation.pattern"
                                                        translateValues="{ pattern: 'Telephone' }">This
                                                        field should
                                                        follow pattern for "Telephone".</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row" *ngIf="isContractLoaded">
                                        <div class="col-sm-3">
                                            <br>
                                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinister.assure"
                                                for="field_isAssure">isAssure</label>
                                            <input type="checkbox" class="check-input" name="field_isAssure"
                                                id="field_isAssure" [value]="sinister.isAssure"
                                                [(ngModel)]="sinister.isAssure" />
                                        </div>
                                        <div class="col-sm-3" *ngIf="!sinister.isAssure">
                                            <div>
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.sinister.conducteur" for="field_nomCond">
                                                    nom du conducteur </label>
                                                <input type="text" class="form-control form-control-sm" name="nomCond"
                                                    id="field_nomCond" [(ngModel)]="sinister.conductorFirstName" />
                                            </div>
                                        </div>
                                        <div class="col-sm-4" *ngIf="sinister.isAssure">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.assure"
                                                for="field_prenomAssure"> nom/prénom de l'assuré </label>
                                            <input type="text" class="form-control form-control-sm" name="nomAssure"
                                                id="field_prenomAssure" [(ngModel)]="assure" readonly />
                                        </div>
                                        <div class="col-sm-3">
                                            <label jhiTranslate="auxiliumApp.sinisterPec.driverLicenseNumber"
                                                for="currentSearch1">driver
                                                License Number</label>
                                            <input type="text" [(ngModel)]="sinisterPec.driverLicenseNumber"
                                                class="form-control form-control-sm" name="currentSearch1"
                                                id="currentSearch1" />
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-5">
                                            <div class="form-group">
                                                <label
                                                    jhiTranslate="auxiliumApp.refTypeService.detail.title">Servicetype</label>
                                                <select class="form-control form-control-sm" id="field_lieu" name="lieu"
                                                    disabled [(ngModel)]="typeServiceId">
                                                    <option [ngValue]="serviceType.id"
                                                        *ngFor="let serviceType of serviceTypes">
                                                        {{serviceType.nom}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-sm btn-primary" (click)="updateSinister()">
                                            <span class="fa fa-save"></span>&nbsp;
                                            <span jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="card">
                                <div class="card-header d-flex align-items-center no-padding">
                                    <div class="notice notice-info">
                                        <span class="fa fa-file-text-o" style="color: #45ABCD"></span>&nbsp;&nbsp;
                                        <strong jhiTranslate="auxiliumApp.contratAssurance.home.details">Détails du
                                            contrat</strong>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-danger" *ngIf="contratAssurance == null"
                                        jhiTranslate="auxiliumApp.sinister.contrat">
                                        <strong>Matricule inéxistante</strong>
                                    </div>
                                    <!-- Begin sinister and contract -->
                                    <form name="editForm" role="form" *ngIf="contratAssurance !== null">
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.numeroContrat"
                                                        for="field_numeroContrat">numéro de contrat</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="numeroContrat" id="field_numeroContrat"
                                                        [(ngModel)]="contratAssurance.numeroContrat" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.refCompagnie.detail.title"
                                                        for="field_compagnie">Compagnie</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="compagnie" id="field_compagnie" [(ngModel)]="compagnie"
                                                        readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.refAgence.detail.title"
                                                        for="field_compagnie">Agence</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="agence" id="field_agence" [(ngModel)]="agence" readonly />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.assure"
                                                        for="field_assurePrenom">Assuré</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="assurePrenom" id="field_assurePrenom" [(ngModel)]="assure"
                                                        maxlength="100" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.debutValidite"
                                                        for="field_debutValidite_ctr">Début de validité</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="debutValiditeCtr" id="field_debutValidite_ctr"
                                                        [(ngModel)]="debut || debut1" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.finValidite"
                                                        for="field_finValidite_ctr">Fin de validité</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="finValiditeCtr" id="field_finValidite_ctr"
                                                        [(ngModel)]="fin || fin1" readonly />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.marque"
                                                        for="field_marqueLibelle">Marque</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="marqueLibelle" id="field_marqueLibelle"
                                                        [(ngModel)]="vehicule.marqueLibelle" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.vehiculeAssure.datePCirculation"
                                                        for="field_debutCirculation">Date de la première mise en
                                                        circulation</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="debutCirculation" id="field_debutCirculation"
                                                        [(ngModel)]="datePCirculation" readonly />
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.ville"
                                                        for="field_ville">Ville</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="villeLibelle" id="field_ville"
                                                        [(ngModel)]="contratAssurance.villeLibelle || contratAssurance.villeMoraleLibelle"
                                                        readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <br>
                                                <input type="checkbox" class="check-input" name="isAssujettieTva"
                                                    id="field_isAssujettieTva" [(ngModel)]="assureur.isAssujettieTva"
                                                    disabled />
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.personneMorale.isAssujettieTva"
                                                    for="field_isAssujettieTva">isAssujettieTva</label>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.pack"
                                                        for="field_pack">Pack</label>
                                                    <input type="text" class="form-control form-control-sm" name="pack"
                                                        id="field_pack" [(ngModel)]="vehicule.packLabel" readonly />
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <!-- End contract details -->
                                </div>
                            </div>
                        </div>
                        <!-- End sinister and contract details -->
                    </div>
                </form>
            </div>
        </div>

        <form name="frm" #frm="ngForm">
            <div class="card">
                <div class="card-header d-flex align-items-center no-padding">
                    <div class="notice notice-info">
                        <strong jhiTranslate="auxiliumApp.sinisterPec.home.detail">sinistre Pec</strong>
                    </div>
                </div>
                <div class="card-body">
                    <br *ngIf="showAlertSuccess">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="alert alert-success" *ngIf="showAlertSuccess">
                                <strong>La modification a été mise à jour</strong>
                                <a (click)="closeAlert()" class="close" data-dismiss="alert" aria-label="close">×</a>
                            </div>
                        </div>
                    </div>
                    <br *ngIf="showAlertSuccess">
                    <div class="row">

                        <div class="col-sm-2">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPec.companyReference"
                                for="field_reference">Référence</label>
                            <input type="text" class="form-control form-control-sm" name="field_reference"
                                id="field_reference" [(ngModel)]="sinisterPec.companyReference" />
                        </div>
                        <div class="col-sm-2">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.dossier.dateDeclaration"
                                for="field_dateDeclaration">Date de
                                déclaration</label>
                            <div class="input-group">
                                <input id="field_dateDeclaration" class="form-control form-control-sm"
                                    name="dateDeclaration"
                                    value="{{sinisterPec.declarationDate | date:'dd/MM/yyyy HH:mm:ss'}}" disabled />

                            </div>

                        </div>

                        <div class="col-sm-2">
                            <div class="form-group">
                                <label jhiTranslate="auxiliumApp.sinisterPrestation.mode" for="field_garanties">
                                    mode de gestion
                                    (Ex garantie)</label>
                                <select class="form-control form-control-sm" id="field_garanties" name="garanties"
                                    [(ngModel)]="sinisterPec.modeId" (ngModelChange)="changeMode(sinisterPec.modeId)">
                                    <option [ngValue]="modeGestionByPack.id"
                                        *ngFor="let modeGestionByPack of listModeByCnvByUser;">
                                        {{modeGestionByPack.libelle}}</option>
                                </select>
                            </div>
                        </div>

                        <!--<div class="col-sm-2" *ngIf="sinisterPec.modeModifId !== null">
                            <div class="form-group">
                                <label jhiTranslate="auxiliumApp.sinisterPec.mode_to_modif" for="mode_to_modif">
                                    mode de gestion
                                    (Ex garantie)</label>
                                <select class="form-control form-control-sm" id="mode_to_modif" name="modeModif"
                                    [(ngModel)]="sinisterPec.modeModifId"
                                    (ngModelChange)="changeMode(sinisterPec.modeModifId)">
                                    <option [ngValue]="modeGestionByPack.id"
                                        *ngFor="let modeGestionByPack of listModeByCnvByUser;">
                                        {{modeGestionByPack.libelle}}</option>
                                </select>
                            </div>
                        </div>-->

                        <div class="col-sm-2" *ngIf="sinisterPec.fromDemandeOuverture == false">
                            <div class="form-group">
                                <label jhiTranslate="auxiliumApp.sinisterPec.posGa" for="field_pos_ga">
                                    pos ga</label>
                                <select class="form-control form-control-sm" id="field_pos_ga" name="pos_ga"
                                    [(ngModel)]="sinisterPec.posGaId">
                                    <option [ngValue]="posGa.id" *ngFor="let posGa of listPositionGa;">
                                        {{posGa.libelle}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-sm-1">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPec.vehicleNumber"
                                    for="field_nbrevehicule">Nbr Vehicules</label>
                                <input type="number" id="field_nbrevehicule" class="form-control form-control-sm"
                                    name="nbreVehicule" [(ngModel)]="sinisterPec.vehicleNumber"
                                    [pattern]="nbrVehPattern" min="{{minVinNumber}}" [readonly]="vehNmbrIda" />


                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-3" *ngIf="garantieDommageVehicule || garantieTierce">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.contratAssurance.valeurNeuf"
                                for="field_valeurNeuf"> Valeur Neuf </label>
                            <input type="number" class="form-control form-control-sm" name="valeurNeuf"
                                id="field_valeurNeuf" [(ngModel)]="vehicule.newValueVehicle" min="0"
                                max="100000000000000000" />

                        </div>

                        <div class="col-sm-3" *ngIf="garantieDommageCollision || garantieTierceCollision">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.contratAssurance.capitalDc"
                                for="field_capitalDc">Capital
                                Dc</label>
                            <input type="number" class="form-control form-control-sm" name="capitalDc"
                                id="field_capitalDc" [(ngModel)]="vehicule.dcCapital" min="0"
                                max="100000000000000000" />

                        </div>
                        <div class="col-sm-3" *ngIf="garantieVolIncendiePartiel">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.contratAssurance.valeurVenale"
                                for="field_valeurVenale"> Valeur Venale </label>
                            <input type="number" class="form-control form-control-sm" name="valeurVenale"
                                id="field_valeurVenale" [(ngModel)]="vehicule.marketValue" min="0"
                                max="100000000000000000" />
                        </div>
                        <div class="col-sm-3" *ngIf="garantieBrisGlace">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.contratAssurance.capitalBG"
                                for="field_bgCapital">
                                capital BG </label>
                            <input type="number" class="form-control form-control-sm" name="bgCapital"
                                id="field_bgCapital" [(ngModel)]="vehicule.bgCapital" min="0"
                                max="100000000000000000" />
                        </div>
                        <div class="col-sm-3"
                            *ngIf="garantieDommageCollision || garantieBrisGlace || garantieTierceCollision">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPec.capitalRestant"
                                for="field_capitalRestant">
                                capital restant </label>
                            <input type="number" class="form-control form-control-sm" name="capitalRestant"
                                id="field_capitalRestant" [(ngModel)]="sinisterPec.remainingCapital" min="0"
                                max="100000000000000000" />

                        </div>

                        <div class="col-sm-3" *ngIf="garantieDommageCollision && contratAssurance.clientId == 3">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPec.valeurAss"
                                for="field_valeurAss"> valeur Assure </label>
                            <input type="number" class="form-control form-control-sm" name="valeurAss"
                                id="field_valeurAss" [(ngModel)]="sinisterPec.valeurAssure" min="0"
                                max="100000000000000000" />

                        </div>

                        <div class="col-sm-1" *ngIf="garantieDommageVehicule || garantieTierce">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.contratAssurance.franchise"
                                for="field_newValueVehicleFarnchise">Franchise</label>
                            <input type="number" class="form-control form-control-sm" name="newValueVehicleFarnchise"
                                id="field_newValueVehicleFarnchise" [(ngModel)]="vehicule.newValueVehicleFarnchise"
                                [pattern]="amountPattern" />
                        </div>
                        <div class="col-sm-2" *ngIf="garantieDommageVehicule || garantieTierce">
                            <label for="field_type"> Type de franchise </label>
                            <select class="form-control form-control-sm" id="field_typenewvalue" name="typenewvalue"
                                [(ngModel)]="vehicule.franchiseTypeNewValue">
                                <option value="Montant">Montant</option>
                                <option value="Pourcentage">Pourcentage</option>
                            </select>
                        </div>
                        <div class="col-sm-1" *ngIf="garantieDommageCollision || garantieTierceCollision">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.contratAssurance.franchise"
                                for="field_dcCapitalFranchise">Franchise</label>
                            <input type="number" class="form-control form-control-sm" name="dcCapitalFranchise"
                                id="field_dcCapitalFranchise" [(ngModel)]="vehicule.dcCapitalFranchise"
                                [pattern]="amountPattern" />
                        </div>
                        <div class="col-sm-2" *ngIf="garantieDommageCollision || garantieTierceCollision">
                            <label for="field_type"> Type de franchise </label>
                            <select class="form-control form-control-sm" id="field_typedccapital" name="typedccapital"
                                [(ngModel)]="vehicule.franchiseTypeDcCapital">
                                <option value="Montant">Montant</option>
                                <option value="Pourcentage">Pourcentage</option>
                            </select>
                        </div>
                        <div class="col-sm-1" *ngIf="garantieVolIncendiePartiel">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.contratAssurance.franchise"
                                for="field_franchise">Franchise</label>
                            <input type="number" class="form-control form-control-sm" name="marketValueFranchise"
                                id="field_marketValueFranchise" [(ngModel)]="vehicule.marketValueFranchise"
                                [pattern]="amountPattern" />
                        </div>
                        <div class="col-sm-2" *ngIf="garantieVolIncendiePartiel">
                            <label for="field_type"> Type de franchise </label>
                            <select class="form-control form-control-sm" id="field_typemarketvalue"
                                name="typemarketvalue" [(ngModel)]="vehicule.franchiseTypeMarketValue">
                                <option value="Montant">Montant</option>
                                <option value="Pourcentage">Pourcentage</option>
                            </select>
                        </div>
                        <div class="col-sm-1" *ngIf="garantieBrisGlace">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.contratAssurance.franchise"
                                for="field_bgCapitalFranchise">Franchise</label>
                            <input type="number" class="form-control form-control-sm" name="bgCapitalFranchise"
                                id="field_bgCapitalFranchise" [(ngModel)]="vehicule.bgCapitalFranchise"
                                [pattern]="amountPattern" />
                        </div>
                        <div class="col-sm-2" *ngIf="garantieBrisGlace">
                            <label for="field_type"> Type de fanchise </label>
                            <select class="form-control form-control-sm" id="field_typebgcapital" name="typebgcapital"
                                [(ngModel)]="vehicule.franchiseTypeBgCapital">
                                <option value="Montant">Montant</option>
                                <option value="Pourcentage">Pourcentage</option>
                            </select>
                        </div>
                        <div class="col-sm-2">
                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPec.assujettie"></label>
                            <span style="color: #FA2F03">*</span>
                            <br />
                            <label class="btn btn-sm btn-primary" for="assujettie1" >
                                <input type="radio" name="assujettie" id="assujettie1" autocomplete="off" [value]="true" disabled
                                    [(ngModel)]="vehicule.assujettieTVA"> Oui
                            </label> &nbsp;
                            <label class="btn btn-sm btn-primary" for="assujettie2" >
                                <input type="radio" name="assujettie" id="assujettie2" autocomplete="off" disabled
                                    [value]="false" [(ngModel)]="vehicule.assujettieTVA">
                                Non
                            </label>
                        </div>
                    </div>
                    <br>

                    <div class="row">

                        <div class="col-sm-1">
                            <br>
                            <span style="font-weight:bold;"><label
                                    jhiTranslate="auxiliumApp.sinisterPec.home.LieuDuSinister">Lieu
                                    du sinister</label></span>
                        </div>

                        <div class="col-sm-2">
                            <label jhiTranslate="auxiliumApp.reparateur.gouvernorat">gouvernorat</label>
                            <select class="form-control form-control-sm" id="field_lieu" name="lieu"
                                [(ngModel)]="sinisterPec.governorateId"
                                (ngModelChange)="fetchDelegationsByGovernorate(sinisterPec.governorateId)">
                                <option [ngValue]="governorate.id" *ngFor="let governorate of governorates;">
                                    {{governorate.label}}
                                </option>
                            </select>
                        </div>

                        <div class="col-sm-2">
                            <label jhiTranslate="auxiliumApp.sinisterPec.ville" for="field_ville">Ville</label>
                            <select class="form-control form-control-sm" id="field_ville" name="ville"
                                [(ngModel)]="sinisterPec.delegationId">
                                <option [ngValue]="sysville.id" *ngFor="let sysville of sysvilles;">
                                    {{sysville.label}}</option>
                            </select>
                        </div>
                    </div>

                    <br>
                    <div class="row" *ngIf="isContractLoaded">
                        <div class="col-sm-2">
                            <div class="form-group">
                                <label jhiTranslate="auxiliumApp.sinisterPec.casBareme" for="field_bareme">cas De
                                    Bareme</label>
                                <span style="color: #FA2F03">*</span>
                            </div>
                        </div>

                        <div class="col-sm-1">
                            <div class="form-group">
                                <button class="input-group-addon btn btn-sm btn-info"
                                    [routerLink]="['/', { outlets: { popup: ['ref-bareme-pop'] } }]">
                                    <span class="fa fa-search"></span>
                                    <span class="hidden-sm-down" jhiTranslate="auxiliumApp.refBareme.home.loop">loop
                                        ref.Bareme</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2">
                            <div class="form-group">
                                <label jhiTranslate="auxiliumApp.refBareme.code" for="field_codeBareme">code
                                    barème</label>
                                <input type="text" class="form-control form-control-sm" name="codeBareme"
                                    id="field_codeBareme" [(ngModel)]="CasBareme.code" readonly />
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="form-group">
                                <label jhiTranslate="auxiliumApp.refBareme.tauxR"
                                    for="field_tauxDeResponsabilite">tauxDeResponsabilité
                                    bareme</label>
                                <input type="text" class="form-control form-control-sm" name="tauxDeResponsabilite"
                                    id="field_tauxDeResponsabilite" [(ngModel)]="CasBareme.responsabiliteX" readonly />
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label jhiTranslate="auxiliumApp.refBareme.description"
                                    for="field_descriptionBareme">desciption
                                    bareme</label>
                                <textarea type="text" class="form-control form-control-sm" name="descriptionBareme"
                                    id="field_descriptionBareme" [(ngModel)]="CasBareme.description" readonly rows="5"
                                    cols="33">
                                    </div>
                                </div>
                                <div> 
                                    <img *ngIf="CasBareme.attachment64" [src]="getImage(CasBareme)" height="100" width="350">
                                </div>
                            </div>
                            <div class="row">

                                    <div class="col-sm-2">
                                        <br>
                                        <label jhiTranslate="auxiliumApp.sinisterPec.DecisionApprove" for="field_decision_approbation">decision et approbation</label>
                                        <span style="color: #FA2F03">*</span>
                                    </div>
            
                                    <div class="col-sm-2">
                                            <label jhiTranslate="auxiliumApp.sinisterPec.decision"
                                            for="field_decision">decision</label>
                                        <select class="form-control form-control-sm" id="field_decision" name="decision"
                                            [(ngModel)]="sinisterPec.decision">
                                            <option [ngValue]="decision.code" *ngFor="let decision of pecsDecisions;">
                                                    {{decision.label}}
                                            </option>
                                        </select>
                                    </div>
            
                                    <div class="col-sm-2">
                                            <label jhiTranslate="auxiliumApp.sinisterPec.approve"
                                            for="field_approbation">approbation </label>
                                        <select class="form-control form-control-sm" id="field_approbation" name="approbation"
                                            [(ngModel)]="sinisterPec.approvPec">
                                            <option [ngValue]="approuve.code" *ngFor="let approuve of pecsApprouves;">
                                                    {{approuve.label}}</option>
                                        </select>
                                        
                                    </div>
                                </div>
                                <div class="row">

                                        <div class="col-sm-2">
                                            <br>
                                            <br>
                                            <label jhiTranslate="auxiliumApp.sinisterPec.etatPrestation" for="field_step">etat prestation</label>
                                            <span style="color: #FA2F03">*</span>
                                        </div>
                
                                        <div class="col-sm-3">
                                            <br>
                                            <label for="field_step_p"></label>
                                            <select class="form-control form-control-sm" id="field_step_pec" name="refStepPec" [(ngModel)]="refStepId">
                                                <option [ngValue]="stepPec.id" *ngFor="let stepPec of refStepPecs">{{stepPec.label}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">

                                            <div class="col-sm-2">
                                                <br>
                                                <br>
                                                <label jhiTranslate="auxiliumApp.sinisterPec.charge" for="field_assigned_to_pec">charge assinge</label>
                                                <span style="color: #FA2F03">*</span>
                                            </div>
                    
                                            <div class="col-sm-3">
                                                <br>
                                                <label for="field_assigned"></label>
                                                <select class="form-control form-control-sm" id="field_assigned" name="assignedToId" [(ngModel)]="sinisterPec.assignedToId">
                                                    <option [ngValue]="charge.id" *ngFor="let charge of listesAssignedToId">{{ charge.firstName}} {{ charge.lastName}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">

                                            <div class="col-sm-2">
                                                <br>
                                                <br>
                                                <label for="field_lettre_ida">Lettre IDA / ouverture générée</label>
                                            </div>
                    
                                            <div class="col-sm-3">
                                                <br>
                                                <label for="field_lettre_ida_ouverture"></label>
                                                <select class="form-control form-control-sm" id="field_lettre_ida_ouverture" name="lettreIda" [(ngModel)]="sinisterPec.generatedLetter">
                                                    <option [ngValue]="ida.code" *ngFor="let ida of lettreIDAOuverture">{{ida.label}}</option>
                                                </select>
                                            </div>
                                        </div>
                        
                        </div>
                        <br>
                                            <div class="modal-footer">
                                                <button type="submit" class="btn btn-sm btn-primary" (click)="AffectationReparateurOrExpertOrUpdatePec()">
                                                    <span class="fa fa-save"></span>&nbsp;
                                                    <span jhiTranslate="entity.action.save">Save</span>
                                                </button>
                                            </div>
                          </div>
    
                <!-- Tier list ----------------------------------------------------------------------------------------------------->
                <div class="row">
                        <div class="col-lg-12">
                        <div class="card">
                            <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#collapseTier">
                                <strong jhiTranslate="auxiliumApp.tiers.home.title">Tiers</strong>
                            </div>
                            <div id="collapseTier" class="card-body collapse">
                                    <br *ngIf="showAlertSuccess">
                                    <div class="row">
                                            <div class="col-sm-6">
                                                    <div class="alert alert-success" *ngIf="showAlertSuccess">
                                                            <strong >La modification a été mise à jour</strong>
                                                        <a (click)="closeAlert()" class="close" data-dismiss="alert" aria-label="close">×</a>    
                                                        </div>
                                            </div>
                                        </div>
                                        <br *ngIf="showAlertSuccess">
                        <div>         
                <form name="editFormgrantieImplique" role="form" novalidate  #editFormgrantieImplique="ngForm">
                                <div class="row">
                                    <div class="col-sm-12">
                                            <div class="row" *ngIf="!showFrmTiers">
                                                    <div class="col-sm-12">
                                                            <div class="row">
                                                                    <div class="col-sm-11" ></div>
                                                                    <div class="col-sm-1" >
                    
                                                                            <button  
                                                                            
                                                                            class="btn btn-sm btn-primary addnew" (click)="addForm();" [disabled]="consultation">
                                                                                <span class="fa fa-plus"></span>
                                                                                <span  jhiTranslate="auxiliumApp.observation.home.createLabel">Creer nouveau tier</span>
                                                                            </button>
                                                                        
                                                                    </div>
                                                            </div>

                                                            <!--<div class="row">
                                                                    <div class="col-sm-10" >
                                                                <div class="alert alert-danger" *ngIf="showAlertTiers" jhiTranslate="auxiliumApp.sinisterPec.verifTiers">
                                                                    <strong>Merci de vérifier le nombre de véhicule</strong>
                                                                </div>
                                                                 </div>
                                                            </div>-->
                    
                                                    </div>
                                                </div>
                                        <div class="row" *ngIf="newFormTiers == true && showFrmTiers">
          
                              <!--Immatriculation-->
                              <div class="col-sm-2">
                                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.immatriculation" for="field_immatriculation">Immatriculation</label>
                                <input type="text" [(ngModel)]="tier.immatriculation"
                                        class="form-control form-control-sm" name="immatriculation" id="field_immatriculation" (blur)="trimRegistrationNumberTiers();"required/>
                        </div> 
                        <div class="col-sm-2">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.compagnie" for="field_compagnieAssuranceImmatriculation">Compagnie Assurance immatriculation</label>
                                <div class="input-group">
                                    <select class="form-control form-control-sm" id="field_compagnieAssuranceImmatriculation" name="compagnieAssuranceImmat" [(ngModel)]="companyId">
                                    <option [ngValue]="compagnieOption.id" *ngFor="let compagnieOption of compagnies">
                                    {{compagnieOption.companyName}} </option>
                                </select>
                                    <span class="input-group-btn">
                                        <button class="input-group-addon btn btn-sm btn-info"
                                            (click)="searchTiers(tier.immatriculation, companyId)">
                                            <span class="fa fa-search"></span>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>     
    
                                 <div class="col-sm-2">
                                        <div class="form-group">
                                            <label jhiTranslate="auxiliumApp.tiers.numeroContrat" for="field_tiersNumeroContratTier">numéro de contrat Tiers</label>
                                            <input type="text" class="form-control form-control-sm" name="numeroContratTier" id="field_tiersNumeroContratTier" [disabled]="agentCompanyRO " [(ngModel)]="tier.numeroContrat" [readonly]="old"/>
                                        </div>
                                    </div> 
    
                                    <div class="col-sm-2" >
                                            <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.compagnieAssurance" for="field_compagnieAssuranceTier">Compagnie Assurance New Tier</label>
                                            <select class="form-control form-control-sm" id="field_compagnieAssuranceTier" name="compagnieAssuranceTier" [(ngModel)]="tier.compagnieId" [disabled]="agentCompanyRO "
                                            (ngModelChange)="listAgenceByCompagnie(tier.compagnieId)">
                                                <option [ngValue]="compagnieOption.id" *ngFor="let compagnieOption of compagnies">
                                                {{compagnieOption.companyName}} </option>
                                            </select>
                                        </div>
                                        <div class="col-sm-2" *ngIf="this.otherField == false">
                                                <label jhiTranslate="auxiliumApp.contratAssurance.agence" for="field_agenceNewTier"> Agence New Tier
                                                </label> <select class="form-control form-control-sm" id="field_agenceNewTier" name="agenceNewTier" [(ngModel)]="tier.agenceId" [disabled]="agentCompanyRO">
                                                    <option [ngValue]="refAgenceOption.id" *ngFor="let refAgenceOption of refagences" >
                                                        {{refAgenceOption.code}}_{{refAgenceOption.name}}</option>
                                                </select>
                                            </div>
                                        <div class="col-sm-2"   *ngIf="this.otherField == true">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.agence" for="field_agenceNew"> Agence New Tier
                                                    </label> 
                                                    <select class="form-control form-control-sm" id="field_agenceNew"  name="agenceNew"  [(ngModel)]="tier.optionalAgencyName" (ngModelChange)="newfield(tier.optionalAgencyName)">
                                                            <option value="Autre">Autre</option>
                                                    </select>
                                        </div>
                                        <div class="col-sm-2"*ngIf="nameAgence">
                                                <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.tiers.agence"
                                                    for="field_prenom">prénom</label>
                                                <input type="text" class="form-control form-control-sm" name="agencyName"
                                                    id="field_agencyName" [(ngModel)]="tier.agenceTier"
                                                    pattern="[A-Za-z0-9 ]{1,50}"  maxlength="100"  [readonly]="old"   />
                                                <small class="form-text text-danger"
                                                    [hidden]="!editFormgrantieImplique.controls.agencyName?.errors?.pattern"
                                                    jhiTranslate="entity.validation.pattern"
                                                    translateValues="{ pattern: 'agencyName' }">
                                                    This field should follow pattern for "Mail".
                                                </small>
                                                
                                            </div>
                                            <div class="col-sm-2">
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.fullName" for="field_raisonSocial">Raison sociale</label>
                                                <input type="text" class="form-control form-control-sm" name="raisonSocialTier" id="field_raisonSocial" [(ngModel)]="tier.fullName" [readonly]="old" maxlength="100"  [disabled]="consultation || agentCompanyRO"  />
                                            </div>

                                            <div class="col-sm-1">
                                            </div>
                                            <div class="col-sm-1">

                                                    <button *ngIf="newFormTiers == false"
                                                    
                                                    class="btn btn-sm btn-primary addnew" (click)="addForm();" [disabled]="consultation">
                                                        <span class="fa fa-plus"></span>
                                                        <span  jhiTranslate="auxiliumApp.observation.home.createLabel">Créer nouveau tier</span>
                                                    </button>
                                                
                                            </div>
                                    
    
                                            
                                            </div>
                                        </div>
        
                                        <div class="col-sm-12">
                                                <div class="row" *ngIf="newFormTiers == true && showFrmTiers">
                                                
                                        
                                
                        
    
                                                <div class="col-sm-2" >
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.debutValidite" for="field_debutValidite">Début de validité</label>
                                                <div class="input-group">
                                                    <input id="field_debutValidite" type="text" class="form-control form-control-sm" [disabled]="agentCompanyRO " name="debutValidite" ngbDatepicker  #debutValiditeDp="ngbDatepicker" 
                                                    [(ngModel)]="tier.debutValidite" [maxDate]="tier.finValidite" [readonly]="old" />
                                                    <span class="input-group-btn">
                                                <button type="button" class="btn btn-sm btn-default" [disabled]="agentCompanyRO " (click)="debutValiditeDp.toggle()"><i class="fa fa-calendar"></i></button>
                                            </span>
                                                </div>
                                            </div>
    
    
    
                                            <div class="col-sm-2" >
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.finValidite" for="field_finValidite">Fin de validité</label>
                                                <div class="input-group">
                                                    <input id="field_finValidite" type="text" class="form-control form-control-sm" name="finValidite" ngbDatepicker  #finValiditeDp="ngbDatepicker" 
                                                    [(ngModel)]="tier.finValidite" [minDate]="tier.debutValidite" [disabled]="agentCompanyRO " [readonly]="old" />
                                                    <span class="input-group-btn">
                                                    <button type="button" class="btn btn-sm btn-default" [disabled]="agentCompanyRO " (click)="finValiditeDp.toggle()"><i class="fa fa-calendar"></i></button>
                                                    </span>
                                                    <br>
                                                    <small class="form-text text-danger" *ngIf="isvalideDate == true"> Date expiré. </small>
                                                </div>
                                            </div>

                                            <div class="col-sm-2" *ngIf="showResponsible">
                                                <br>
                                                    <input type="checkbox" class="check-input" name="responsable" id="field_responsable" [(ngModel)]="tier.responsible" />
                                                    <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.afficherTiers" for="field_responsable">Responsable</label>
                                                </div>

                
    
    
    
                                        </div>
                                    </div>
                                    <div class="col-sm-2" *ngIf="newFormTiers == true && showFrmTiers">
                                        <label class="form-control-label" style="width: 100%">&nbsp;</label>
                                        <button *ngIf="!isTierModeEdit" 
                                        class="btn btn-sm btn-primary addnew" (click)="addTier();">
                                            <span class="fa fa-plus"></span>
                                            <span  jhiTranslate="auxiliumApp.tiers.creerTiers">Créer nouveau tier</span>
                                        </button>
                                        <button *ngIf="isTierModeEdit" 
                                         
                                        class="btn btn-sm btn-primary addnew" (click)="editTier();">
                                            <span class="fa fa-pencil"></span>
                                            <span  jhiTranslate="auxiliumApp.observation.home.editLabel">Modifier tier</span>
                                        </button>
                                        <button
                                        class="btn btn-sm btn-primary addnew" (click)="deleteForm();">
                                            <span class="fa fa-pencil"></span>
                                            <span >Annuler</span>
                                        </button>
                                    </div>
                
                                </div>
                                <br>
                            <!--<div class="row">
                                <div class="col-sm-6" >
                            <div class="alert alert-danger" *ngIf="!tierResponsableVerif" jhiTranslate="auxiliumApp.sinisterPec.verifTiersResponsable">
                                <strong>Merci de vérifier le nombre de véhicules</strong>
                            </div>
                             </div>
                        </div>-->
                            </form>
                        </div>
    
                                <div class="row" style="margin-top: 15px;">
                                    <div class="col-sm-12">
                                        <div class="table-responsive" *ngIf="tiers && tiers.length > 0">
                                            <table datatable [dtOptions]="dtOptions" 
                                            class="table table-sm table-hover table-bordered" >
                                                <thead>
                                                <tr jhiSort  style="color: white; background-color: #167F92">
                                                    <th><span jhiTranslate="auxiliumApp.tiers.fullName">fullName</span></th>
                                                    <th><span jhiTranslate="auxiliumApp.contratAssurance.numeroContrat">numeroContrat</span></th>
                                                    <th><span jhiTranslate="auxiliumApp.tiers.debutValidite">Début de validite</span></th>
                                                    <th><span jhiTranslate="auxiliumApp.tiers.finValidite">Fin de validite</span></th>
                                                    <th><span jhiTranslate="auxiliumApp.tiers.compagnieAssurance">Compagnie d'assurance</span></th>
                                                    <th><span jhiTranslate="auxiliumApp.tiers.immatriculation">Immatriculation</span></th>
                                                    <th></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <ng-container *ngFor="let tierr of tiers">
                                                    <tr *ngIf="!tierr.deleted">
                                                        <td>{{tierr.fullName}}</td>
                                                        <td>{{tierr.numeroContrat}}</td>
                                                        <td>{{parseHtmlDate(tierr.debutValidite)}}</td>
                                                        <td>{{parseHtmlDate(tierr.finValidite)}}</td>
                                                        <td>{{tierr.compagnieNom}}</td>
                                                        <td>{{tierr.immatriculation}}</td>
                                                        <td class="text-right">
                                                            <div class="btn-group flex-btn-group-container">
                                                                <button type="button" (click)="prepareEditTier(tierr)" class="btn btn-primary btn-sm">
                                                                    <span class="fa fa-pencil"></span>
                                                                </button>
                                                                <button type="button" (click)="deleteTier(tierr)" class="btn btn-danger btn-sm">
                                                                    <span class="fa fa-sm fa-remove"></span>
                                                                </button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </ng-container>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <br>
                                            <div class="modal-footer">
                                                <button type="submit" class="btn btn-sm btn-primary" (click)="saveTiers()">
                                                    <span class="fa fa-save"></span>&nbsp;
                                                    <span jhiTranslate="entity.action.save">Save</span>
                                                </button>
                                            </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Tiers list -->
    
                <!-- Piéces Jointes -->
                <div class="row">
                        <div class="col-lg-12">
                        <div class="card">
                            <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#pjDetails">
                                <strong jhiTranslate="auxiliumApp.pieceJointe.home.title">Pièces jointes</strong>
                            </div>
                            <div id="pjDetails" class="card-body collapse">
                                    <br *ngIf="showAlertSuccess">
                                    <div class="row">
                                            <div class="col-sm-6">
                                                    <div class="alert alert-success" *ngIf="showAlertSuccess">
                                                            <strong >La modification a été mise à jour</strong>
                                                        <a (click)="closeAlert()" class="close" data-dismiss="alert" aria-label="close">×</a>    
                                                        </div>
                                            </div>
                                        </div>
                                        <br *ngIf="showAlertSuccess">
                                <div class="row">
                                            <div class="col-sm-3">
                                                <label jhiTranslate="auxiliumApp.pieceJointe.constat" for="attachmentConstat">Constat</label>
                                            </div> 
                                            <div class="col-sm-3" *ngIf="showConstatAttachment">
                                                    <div class="form-text text-danger clearfix">
                                                        <input type="text" class="form-control" name="attachmentConstat" id="attachmentConstat"
                                                            [(ngModel)]="constatAttachment.label" hidden  />     
                                                        <input id="field_nameFCart" type="file"
                                                        class="form-control form-control-sm"
                                                        name="nameFCons"
                                                        (change)="onConstatFileChange($event)"
                                                        [(ngModel)]="constatAttachment.label"
                                                        accept=".jpg,.jpeg,.png"   />
                                                    </div> 
                                                </div>
                                                <div class="col-sm-3">     
                                                        <span class="input-group-btn" *ngIf="constatPreview">
                                                            <button type="button"  class="btn btn-sm btn-default" 
                                                                (click)="downloadConstatFile()"><i
                                                                    class="fa fa-sm fa-download"></i></label>
                                                        </span> 
                                                        <span class="input-group-btn" *ngIf="showConstat">
                                                            <button type="button"  class="btn btn-sm btn-default" 
                                                                (click)="getPieceNew('prestationPEC', sinisterPec.id, 'Constat')"><i
                                                                    class="fa fa-sm fa-download"></i></label>
                                                        </span> 
                                                        <span class="input-group-btn" *ngIf="showConstat">
                                                            <button type="button" class="btn btn-danger btn-sm" 
                                                                (click)="deleteConstatFile()"><i
                                                                class="fa fa-sm fa-remove"></i></label>
                                                        </span>    
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <label jhiTranslate="auxiliumApp.pieceJointe.carteGrise" for="attachmentCarteGrise">Carte grise</label>
                                            </div> 
                                            <div class="col-sm-3" *ngIf="showCarteGriseAttachment">
                                                    <div class="form-text text-danger clearfix">
                                                        <input type="text" class="form-control" name="attachmentCarteGrise" id="attachmentCarteGrise"
                                                            [(ngModel)]="carteGriseAttachment.label" hidden />
                                                        <input id="field_nameFCart" type="file"
                                                        class="form-control form-control-sm"
                                                        name="nameFCart"
                                                        [(ngModel)]="carteGriseAttachment.label"
                                                        (change)="onCarteGrisFileChange($event)"
                                                        accept=".jpg,.jpeg,.png"  />
                                                    </div>
                                                </div>
                                                    <div class="col-sm-3">
                                                        <span class="input-group-btn" *ngIf="carteGrisePreview">
                                                            <button type="button"  class="btn btn-sm btn-default" 
                                                                (click)="downloadCarteGriseFile()"><i
                                                                    class="fa fa-sm fa-download"></i></label>
                                                        </span>
                                                        <span class="input-group-btn" *ngIf="showCarteGrise">
                                                            <button type="button"  class="btn btn-sm btn-default" 
                                                                (click)="getPieceNew('prestationPEC', sinisterPec.id, 'Carte Grise')"><i
                                                                    class="fa fa-sm fa-download"></i></label>
                                                        </span>
                                                        <span class="input-group-btn" *ngIf="showCarteGrise">
                                                            <button type="button" class="btn btn-danger btn-sm" 
                                                                (click)="deleteCarteGriseFile()"><i
                                                                class="fa fa-sm fa-remove"></i></label>
                                                        </span>
                                                    </div>
                                           
                                        </div>
                                        <br /> 
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <label jhiTranslate="auxiliumApp.pieceJointe.acteDeCession" for="attachmentActeDeCession">acteDeCession</label>
                                            </div> 
                                            <div class="col-sm-3" *ngIf="showActeDeCessionAttachment">
                                                    <div class="form-text text-danger clearfix">
                                                        <input type="text" class="form-control" name="attachmentActeDeCession" id="attachmentActeDeCession"
                                                            [(ngModel)]="acteCessionAttachment.label" hidden />
                                                
                                                            <input id="field_nameFacte" type="file"
                                                            class="form-control form-control-sm"
                                                            name="nameFacte"
                                                            [(ngModel)]="acteCessionAttachment.label"
                                                            (change)="onActeCessionFileChange($event)"
                                                            accept=".jpg,.jpeg,.png"  />
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <span class="input-group-btn" *ngIf="acteCessionPreview">
                                                            <button type="button"  class="btn btn-sm btn-default" 
                                                                (click)="downloadActeCessionFile()"><i
                                                                    class="fa fa-sm fa-download"></i></label>
                                                        </span>
                                                        <span class="input-group-btn" *ngIf="showActeDeCession">
                                                            <button type="button"  class="btn btn-sm btn-default" 
                                                                (click)="getPieceNew('prestationPEC', sinisterPec.id, 'Acte de cession')"><i
                                                                    class="fa fa-sm fa-download"></i></label>
                                                        </span>
                                                        <span class="input-group-btn" *ngIf="showActeDeCession">
                                                            <button type="button" class="btn btn-danger btn-sm" 
                                                                (click)="deleteActeDeCessionFile()"><i
                                                                class="fa fa-sm fa-remove"></i></label>
                                                        </span>
                                            </div>
                                      </div>
                                      <br>
                                      <div class="row">
                                        <div class="col-sm-2">
                                        <button type="button" class="btn btn-primary btn-sm pull-right"
                                            (click)="ajoutNouvelpieceJointePecPlus();" style="margin-top:15px">
                                            <span class="fa fa-edit"></span> <span>Ajouter Nouvelle Piéce Jointe
                                            </span>
                                        </button>
                                    </div>
                                      </div>
                                      <br>
                                      <div *ngIf="ajoutNouvelpieceformPecPlus">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <label class="form-control-label"
                                                        jhiTranslate="auxiliumApp.pieceJointe.libelle"
                                                        for="field_libelle">Libelle</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="libelle" id="libelle"
                                                        [(ngModel)]="pieceAttachment1PecPlus.label" />
                                                    <div [hidden]="!isError">
                                                        <small class="form-text text-danger"
                                                            [hidden]="!islibelleError"
                                                            jhiTranslate="entity.validation.required">This
                                                            field is required.</small>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="form-control-label"
                                                        jhiTranslate="auxiliumApp.pieceJointe.file"
                                                        for="field_chemin">Fichier</label>
                                                    <input id="field_chemin" type="file"
                                                        class="form-control form-control-sm" name="field_chemin"
                                                        (change)="onPieceFileChange1PecPlus($event)"
                                                        accept=".jpg,.jpeg,.png" [(ngModel)]="pieceAttachment1PecPlus.type"
                                                        required />



                                                    <span class="input-group-btn" *ngIf="piecePreview1PecPlus">
                                                        <button type="button" class="btn btn-sm btn-default"
                                                            (click)="downloadPieceFile1PecPlus()"><i
                                                                class="fa fa-sm fa-download"></i></button>
                                                    </span>



                                                </div>
                                                <div class="col-sm-3">
                                                    <label style="width: 100%">&nbsp;</label>
                                                    <button
                                                        [disabled]="pieceAttachment1PecPlus.label  == null ||  pieceAttachment1PecPlus.type == undefined"
                                                        class="btn btn-sm btn-primary addnew"
                                                        (click)="ajoutPiece1PecPlus();">
                                                        <span class="fa fa-plus"></span>
                                                        <span
                                                            jhiTranslate="auxiliumApp.observation.home.createLabel">Create
                                                            new Description
                                                        </span>
                                                    </button>
                                                </div>
                                                <br />
                                            </div>
                                        </div>

                                    </div>
                                    <br>
                                    <br>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="table-responsive"
                                                *ngIf="piecesAttachmentsPecPlus && piecesAttachmentsPecPlus.length > 0">
                                                <table class="table table-sm table-hover table-bordered">
                                                    <thead>
                                                        <tr jhiSort style="color: white; background-color: #167F92">
                                                            <th jhiSortBy="date"><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.libelle">Libelle</span>
                                                                <span class="fa fa-sort"></span></th>
                                                            <th jhiSortBy="date"><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.dateCreation">Date
                                                                    Creation</span>
                                                                <span class="fa fa-sort"></span></th>

                                                            <th><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.file">Fichier</span>
                                                                <span class="fa fa-sort"></span></th>
                                                            <th><span></span>
                                                                <span class="fa fa-sort"></span></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let piecesjointe of piecesAttachmentsPecPlus">
                                                            <td>{{piecesjointe.label}}</td>
                                                            <td>{{piecesjointe.creationDate | date:'dd/MM/yyyy HH:mm:ss'}}</td>

                                                            <td class="text-right" *ngIf="!piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <button type="button" class="btn btn-sm btn-default"
                                                                        (click)="downloadPieceFile(piecesjointe.pieceFile)"><i
                                                                            class="fa fa-sm fa-download"></i></button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right" *ngIf="piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <button type="button" class="btn btn-sm btn-default"
                                                                        (click)="getPieceForAttachment('PLUSPHOTOPEC', piecesjointe.id, piecesjointe.originalName)"><i
                                                                            class="fa fa-sm fa-download"></i></button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right" *ngIf="!piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <!--<button type="button"
                                                                                    (click)="prepareEditPieceJ(piecesjointe)"
                                                                                    class="btn btn-primary btn-sm">
                                                                                    <span class="fa fa-pencil"></span>
                                                                                </button>-->
                                                                    <button type="button"
                                                                        (click)="deletePieceJPecPlus(piecesjointe)"
                                                                        class="btn btn-danger btn-sm">
                                                                        <span class="fa fa-sm fa-remove"></span>
                                                                    </button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right"
                                                                *ngIf="piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">

                                                                    <button type="button"
                                                                        (click)="deletePieceJointesPHPecPlus(piecesjointe)"
                                                                        class="btn btn-danger btn-sm"><i
                                                                            class="fa fa-sm fa-remove"></i></button>
                                                                </div>
                                                            </td>

                                                            </ng-container>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                      <br>
                                      <div class="modal-footer">
                                        <button type="submit" class="btn btn-sm btn-primary" (click)="saveAttachments()">
                                            <span class="fa fa-save"></span>&nbsp;
                                            <span jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>     
                    
                <!-- End Piéces Jointes -->   


             <!-- Points choc -->
             <div class="row">
                <div class="col-lg-12">
<span class="anchor" id="formUserEdit"></span>
<div class="card">
<div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#pcDetails">
    <strong >Point de choc</strong>
</div>
<div id="pcDetails" class="card-body collapse"> 
    <br *ngIf="showAlertSuccess">
    <div class="row">
            <div class="col-sm-6">
                    <div class="alert alert-success" *ngIf="showAlertSuccess">
                            <strong >La modification a été mise à jour</strong>
                        <a (click)="closeAlert()" class="close" data-dismiss="alert" aria-label="close">×</a>    
                        </div>
            </div>
        </div>
        <br *ngIf="showAlertSuccess">

  <div class="container-fluid   bg-Point-choc " style="height: 800px; position:relative">
   
  </div>

      <div class="row top-buffer">
              

              <div class="col-sm-3">
                      <input type="checkbox" class="check-input" style="position: absolute;top: -800px;left: 173%;" name="avant"
                      id="field_isavant" [(ngModel)]="pointChoc.avant" />
              </div>  
           </div>  
        


           <div class="row top-buffer">

                  
                  <div class="col-sm-1 input-group-prepend">
                          <input type="checkbox" class="check-input" style="    position: absolute;
                          top: -594px;
                          left: 130%;" name="lateraleGaucheAvant"
                          id="field_islatéraleGaucheAvant"  [(ngModel)]="pointChoc.lateraleGaucheAvant"  />

                  </div> 
               
                  <div class="col-sm-7">
                      
                  <input type="checkbox" class="check-input" name="avantGauche" style="position: absolute;
                  top: -573px;
                  left: 12%;"
                  id="field_isAvantGauche"  [(ngModel)]="pointChoc.avantGauche"  />

                  </div>
                
                  <div class="col-sm-1">
                          <input type="checkbox" class="check-input" name="avantDroite" style="position: absolute;
                          top: -625px;
                          left: 67%;"
                          id="field_isavantDroite"  [(ngModel)]="pointChoc.avantDroite" />
                  </div>
                

               </div>

               <div class="row top-buffer">
                      <div class="col-sm-1">
                              <input type="checkbox" class="check-input" name="lateraleGauche" style="position: absolute;
                              top: -363px;
                              left: 50%;"
                              id="field_islateraleGauche"  [(ngModel)]="pointChoc.lateraleGauche"   /> 
                      </div> 
                      <div class="col-sm-3"> 
                              <input type="checkbox" class="check-input" name="retroviseurGauche"style="position: absolute;
                              left: 25%;
                              top: -507px;"
                              id="field_isretroviseurGauche"  [(ngModel)]="pointChoc.retroviseurGauche"  /> 
                      </div>  
                      <div class="col-sm-3">
                           
                              <input type="checkbox" class="check-input" name="pareBriseAvant" style="position: absolute;
                              top: -523px;
                              left: 36%;"
                              id="field_ispareBriseAvant"  [(ngModel)]="pointChoc.pareBriseAvant"  />
                      </div>

                    
                      <div class="col-sm-1">
                              <input type="checkbox" class="check-input" name="retroviseurDroite"
                              style="position: absolute;
                              top: -511px;
                              left: 98%;" id="field_isretroviseurDroite"  [(ngModel)]="pointChoc.retroviseurDroite" />
                      </div>
                   
                      <div class="col-sm-1">
                              <input type="checkbox" class="check-input" name="lateraleDroiteAvant" 
                              style="position: absolute;
                              top: -508px;
                              left: 165%;"  id="field_islateraleDroiteAvant"  [(ngModel)]="pointChoc.lateraleDroiteAvant" />
                      </div>
                      <div class="col-sm-1">
                              <input type="checkbox" class="check-input" name="lateraleDroite" 
                              id="field_islateraleDroite" style="position: absolute;
                              top: -465px;
                              left: 155%;"  [(ngModel)]="pointChoc.lateraledroite"   />
                          </div>
                   </div>  
                
                   <div class="row top-buffer">
                          <div class="col-sm-1">
                          </div>  
                         
                          <div class="col-sm-7">     ;
                                  <input type="checkbox" class="check-input" name="vitreAvantGauche" 
                                  id="field_isvitreAvantGauche" style="position: absolute;
                                  top: -494px;
                                  left: 12%;" [(ngModel)]="pointChoc.vitreAvantGauche"  />
                          </div> 
                         
                          <div class="col-sm-3">
                                  <input type="checkbox" class="check-input" name="vitreAvantDroit"
                                  id="field_isvitreAvantDroit"  style="position: absolute;
                                  top: -487px;
                                  left: 36%;" [(ngModel)]="pointChoc.vitreAvantDroit"  />

                              </div> 
                       </div>  
                    
                       <div class="row top-buffer">
                              <div class="col-sm-5">
                              </div> 
                              <div class="col-sm-3">
                                      <input type="checkbox" class="check-input" name="toit" 
                                      id="field_istoit" style="position: absolute;
                                      top: -492px;
                                      left: 6%;" [(ngModel)]="pointChoc.toit"  />

                              </div>  
                           </div> 


                          </br>
                           <div class="row top-buffer">
                                  <div class="col-sm-1">
                                  </div>  
                                  <div class="col-sm-7">
                                          <input type="checkbox" class="check-input" name="vitreArriereGauche" 
                                          id="field_isvitreArriereGauche"  style="position: absolute;
                                          top: -475px;
                                          left: 13%;" [(ngModel)]="pointChoc.vitreArriereGauche" />
                                  </div>  
                                  <div class="col-sm-3">
                                          <input type="checkbox" class="check-input" name="vitreArriereDroit" 
                                          id="field_isvitreArrieredroit"  style="position: absolute;
                                          top: -476px;
                                          left: 13%;"  [(ngModel)]="pointChoc.vitreArriereDroit" />
                                      </div>  
                               </div>  

                                   </br>
                               <div class="row top-buffer">
                                    
                                      <div class="col-sm-1">
                                 </div> 
                                      &nbsp;
                                      <div class="col-sm-7">
                                              <input type="checkbox" class="check-input" name="triangleArriereGauche" 
                                              id="field_istriangleArriereGauche" style="position: absolute;
                                              top: -447px;
                                              left: 9%;"  [(ngModel)]="pointChoc.triangleArriereGauche" /> 
                                      </div>
                                    
                                      <div class="col-sm-1">
                                              <input type="checkbox" class="check-input" name="triangleArriereDroit" 
                                              id="field_istriangleArriereDroit" style="position: absolute;
                                              top: -452px;
                                              left: 17%;"  [(ngModel)]="pointChoc.triangleArriereDroit" /> 
                                      </div>
                                   
                                   </div>


                                   <div class="row top-buffer">
                                          <div class="col-sm-5">
                                          </div> 
                                          
                                          <div class="col-sm-3">
                                                  <input type="checkbox" class="check-input" name="lunetteArriere" 
                                                  id="field_islunetteArriere" style="position: absolute;
                                                  top: -440px;
                                                  left: 8%;" [(ngModel)]="pointChoc.lunetteArriere"  /> 
                                          </div>  
                                       </div>


                               <div class="row top-buffer">
                                      <div class="col-sm-1">
                                              <input type="checkbox" class="check-input" name="lateraleGaucheArriere" 
                                              id="field_islateraleGaucheArriere"  style="position: absolute;
                                              top: -444px;
                                              left: 100%;" [(ngModel)]="pointChoc.lateraleGauchearriere" />
                                      </div>  
                                              <div class="col-sm-7">
                                                      <input type="checkbox" class="check-input" name="arriereGauche" 
                                                      id="field_isarriereGauche" style="position: absolute;
                                                      top: -382px;
                                                      left: 14%;"  [(ngModel)]="pointChoc.arriereGauche"  /> 
                                              </div>
                                              <div class="col-sm-1">
                                                      <input type="checkbox" class="check-input" name="arriereDroite" 
                                                      id="field_isarriereDroite" style="position: absolute;
                                                      top: -356px;
                                                      left: 36%;" [(ngModel)]="pointChoc.arriereDroite"  /> 
                                              </div>
                                              <div class="col-sm-1">
                                                      <input type="checkbox" class="check-input" name="lateraleDroiteArriere" 
                                                      id="field_islateraleDroiteArriere" style="position: absolute;
                                                      top: -481px;
                                                      left: 55%;" [(ngModel)]="pointChoc.lateraleDroiteArriere"  /> 
                                              </div>
                                              <div class="col-sm-1">
                                              </div>
                              </div> 

 
                          <div class="row top-buffer">
                                  <div class="col-sm-3">
                                      </div>  
                                      <div class="col-sm-2">
                                          </div>  
                                  <div class="col-sm-3">
                                          <input type="checkbox" class="check-input" name="arriere" 
                                          id="field_isarriere" style="position: absolute;
                                          top: -263px;
                                          left: 32%;" [(ngModel)]="pointChoc.arriere"   /> 
                                  </div>  
                               </div>                             
  

  <div class="row top-buffer">
    &nbsp;   <span > &nbsp;     Description du point de choc  :  &nbsp; </span>
  <span *ngIf="pointChoc.toit">Toit &nbsp;</span>
  <span *ngIf="pointChoc.avant">Avant &nbsp;</span>
  <span *ngIf="pointChoc.arriere" >Arrière &nbsp;</span>
  <span *ngIf="pointChoc.arriereGauche" >Arrière gauche &nbsp;</span>
  <span *ngIf="pointChoc.lateraleGauche" >Latérale gauche &nbsp;</span>
  <span *ngIf="pointChoc.lateraleGauchearriere">Latérale arrière gauche &nbsp;</span>
  <span *ngIf="pointChoc.lateraleGaucheAvant">Latérale avant gauche &nbsp;</span>
  <span *ngIf="pointChoc.arriereDroite" >Arrière droite &nbsp;</span>
  <span *ngIf="pointChoc.lateraledroite" >Latérale droite &nbsp;</span>
  <span *ngIf="pointChoc.lateraleDroiteAvant" >Latérale  avant droite &nbsp;</span>

  <span *ngIf="pointChoc.lateraleDroiteArriere"> Latérale arrière  droite &nbsp;</span>
  <span *ngIf="pointChoc.avantGauche"> Avant gauche &nbsp;</span>
  <span *ngIf="pointChoc.avantDroite" > Avant droite &nbsp;</span>
  <span *ngIf="pointChoc.retroviseurGauche" > Retroviseur gauche &nbsp;</span>
  <span *ngIf="pointChoc.retroviseurDroite" > Retroviseur droite  &nbsp;</span>

  <span *ngIf="pointChoc.lunetteArriere"> Lunette arrière &nbsp;</span>
  <span *ngIf="pointChoc.pareBriseAvant"> Pare brise avant &nbsp;</span>
  <span *ngIf="pointChoc.triangleArriereGauche" > Triangle arrière gauche &nbsp;</span>
  <span *ngIf="pointChoc.triangleArriereDroit" > Triangle arrière droit &nbsp;</span>
  <span *ngIf="pointChoc.vitreAvantDroit" > Vitre avant droite &nbsp;</span>

  <span *ngIf="pointChoc.vitreAvantGauche"> Vitre avant gauche  &nbsp;</span>
  <span *ngIf="pointChoc.vitreArriereDroit"> Vitre arrière droit  &nbsp;</span>
  <span *ngIf="pointChoc.vitreArriereGauche"> Vitre arrière gauche  &nbsp;</span>

</div>
<div class="modal-footer">
    <button type="submit" class="btn btn-sm btn-primary" (click)="AffectationReparateurOrExpertOrUpdatePec()">
        <span class="fa fa-save"></span>&nbsp;
        <span jhiTranslate="entity.action.save">Save</span>
    </button>
</div>
</div>
</div>

</div>
</div>


          
    <!-- End Points Choc -->

      <!-- Début Affectation Reparateur -->
      <div class="row">
                            
        <div class="col-lg-12">
            <div class="card">
                <div class=" collapsible-card card-header align-items-center collapsed notice notice-info"
                    data-toggle="collapse" href="#reparateursDetails">
                    <strong jhiTranslate="entity.affectReparateur.title">Affectation
                        réparateur</strong>
                </div>
                <div id="reparateursDetails" class="card-body collapse">
                    <br>
                    <div class="row">
                            <div class="col-sm-6">
                                    <div class="alert alert-success" *ngIf="showAlertSuccess">
                                            <strong >La modification a été mise à jour</strong>
                                        <a (click)="closeAlert()" class="close" data-dismiss="alert" aria-label="close">×</a>    
                                        </div>
                            </div>
                        </div>
                    <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-3">
                                    <label
                                        jhiTranslate="auxiliumApp.prestationPEC.gouvernorat">Gouvernorat</label>
                                    <select class="form-control form-control-sm"
                                        style="background-color: white" id="field_gouvernorat"
                                        name="field_gouvernorat"
                                        [(ngModel)]="selectedGouvernorat"   
                                        (ngModelChange)="listReparateursByGouvernorat(selectedGouvernorat);" [disabled] = "annulerAffectReparateur" >
                                        <option [ngValue]="gouvernoratsOption.id"
                                            *ngFor="let gouvernoratsOption of sysgouvernorats; ">
                                            {{gouvernoratsOption?.label}}</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <label
                                        jhiTranslate="auxiliumApp.reparateur.home.title">Réparateurs</label>
                                    <select class="form-control form-control-sm"
                                        style="background-color: white" id="field_reparateur"
                                        name="field_reparateur" [(ngModel)]="sinisterPec.reparateurId"  
                                        (ngModelChange)="nbreMissionByReparateur(sinisterPec.reparateurId)" [disabled] = "annulerAffectReparateur">
                                        <option [ngValue]="reparateur.id"
                                            *ngFor="let reparateur of reparateursAffecte;">
                                            {{reparateur.info}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        
                    </div>


                    <div class="col-sm-12">
                        <div class="row">
                                <div class="col-sm-3">
                                        <label jhiTranslate="auxiliumApp.reparateur.capacite"
                                            for="field_nbmissionreparateur"> Capacité réparateur
                                            affectés</label>
                                        <div class="input-group">
                                            <input id="field_capacite_reparateur" type="text"
                                                class="form-control form-control-sm"
                                                name="capacitereparateur"
                                                [(ngModel)]="capacite"   />

                                        </div>
                                    </div>
                            <div class="col-sm-3">
                                 <label jhiTranslate="auxiliumApp.reparateur.nbmissions"
                                    for="field_nbmissionreparateur">Nombres de missions
                                    affectées</label>
                                <div class="input-group">
                                    <input id="field_nbmissionreparateur" type="text"
                                        class="form-control form-control-sm"
                                        name="nbmissionreparateur"
                                        [(ngModel)]="nbmissionreparateur"   />

                                </div>
                            </div>

                            <div class="col-lg-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPec.dateRdvReparateur"
                                        for="field_dateRdvReparateur">date Rdv Réparateur</label>
                                    <div class="input-group">
                                        <input id="field_dateRdvReparateur" type="text" class="form-control form-control-sm" name="dateRdvReparateur" ngbDatepicker #insuredArrivalDate="ngbDatepicker"
                                            [(ngModel)]="sinisterPec.dateRDVReparation"/>
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-sm btn-default" (click)="insuredArrivalDate.toggle()"><i class="fa fa-sm fa-calendar"></i></button>
                                        </span>&nbsp;&nbsp;
                                        <ngb-timepicker  size="small" [(ngModel)]="reparateurArrivalTime" [spinners]="false" name="insuredArrivalTime" >    <span class="note">Les heures de bureau sont de 9h à
                                            18h</span></ngb-timepicker>
                                    </div>
                                </div>
                            </div>

                        </div>
                        


                       <!-- <div class="col-sm-6">
                            <div *ngIf="annulerAffectReparateur">
                                <label class="form-control-label"
                                    jhiTranslate="auxiliumApp.refRemorqueur.motifs">Sélectionnez
                                    un motif</label>
                                <select class="form-control form-control-sm"
                                    id="field_motif" name="motif"
                                    [(ngModel)]="sinisterPec.reasonCancelAffectedRepId" >
                                    <option [ngValue]="refMotifOption.id"
                                        *ngFor="let refMotifOption of motifs;">
                                        {{refMotifOption.label}}</option>
                                </select>
                            </div>
                        </div>-->





                    </div>
                    <br>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-sm btn-primary" (click)="AffectationReparateurOrExpertOrUpdatePec()">
                            <span class="fa fa-save"></span>&nbsp;
                            <span jhiTranslate="entity.action.save">Save</span>
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Fin Affectation Reparateur -->

    <!-- Début Affectation Expert -->
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class=" collapsible-card card-header align-items-center collapsed notice notice-info"
                    data-toggle="collapse" href="#expertsDetails">
                    <strong>Missionner expert</strong>
                </div>
                <div id="expertsDetails" class="card-body collapse">
                    <br>
                    <div class="row">
                            <div class="col-sm-6">
                                    <div class="alert alert-success" *ngIf="showAlertSuccess">
                                            <strong >La modification a été mise à jour</strong>
                                        <a (click)="closeAlert()" class="close" data-dismiss="alert" aria-label="close">×</a>    
                                        </div>
                            </div>
                        </div>
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-3" *ngIf="!cancelExpertMissionary">
                                <label jhiTranslate="auxiliumApp.sinisterPec.gouvernorat">Gouvernorat</label>
                                <select class="form-control form-control-sm" style="background-color: white"
                                    id="field_gouvernorat" name="field_gouvernorat"
                                    [(ngModel)]="selectedGouvernorat"
                                    (ngModelChange)="listExpertsByGouvernorat(selectedGouvernorat);"
                                    [disabled]="cancelExpertMissionary" >
                                    <option [ngValue]="gouvernoratsOption.id"
                                        *ngFor="let gouvernoratsOption of sysgouvernorats; ">
                                        {{gouvernoratsOption?.label}}</option>
                                </select>
                            </div>
                            <div class="col-sm-3">
                                <label jhiTranslate="auxiliumApp.expert.home.title">Experts</label>
                                <select class="form-control form-control-sm" style="background-color: white"
                                    id="field_expert" name="field_expert" [(ngModel)]="sinisterPec.expertId"
                                    [disabled]="cancelExpertMissionary" >
                                    <option [ngValue]="expert.id" *ngFor="let expert of expertsAffectation;">
                                        {{expert.raisonSociale}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-sm btn-primary" (click)="AffectationReparateurOrExpertOrUpdatePec()">
                            <span class="fa fa-save"></span>&nbsp;
                            <span jhiTranslate="entity.action.save">Save</span>
                        </button>
                    </div>
                    <!--<div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-3">
                                <label jhiTranslate="auxiliumApp.sinisterPec.nbrMissions"
                                    for="field_nbmissionexpert">Nombres de missions
                                    affectées</label>
                                <div class="input-group">
                                    <input id="field_nbmissionexpert" type="text"
                                        class="form-control form-control-sm" name="nbmissionExpert"
                                        [(ngModel)]="nbmissionExpert" readonly  />

                                </div>
                            </div>

                        </div>
                    </div>-->

                    <!--<div class="col-sm-12">
                        <div class="row" *ngIf="cancelExpertMissionary">
                            <label for="field_modegestion"> Motifs </label>

                            <select  class="form-control" id="reason" name="reason"
                                [(ngModel)]="sinisterPec.reasonCancelExpertId" >

                                <option [ngValue]="reasonOption.id"
                                    *ngFor="let reasonOption of reasons;">
                                    {{reasonOption.label}}</option>
                            </select>
                        </div>
                    </div>-->

                </div>
            </div>
        </div>
    </div>
    <!-- Fin Affectation Expert -->

    
<!------------PHOTO AVANT ET APRES REPARATION-->
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class=" collapsible-card card-header align-items-center collapsed notice notice-info"
                    data-toggle="collapse" href="#collapsePhotos">
                    <strong>Photos avant et après réparation</strong>
                </div>
                <div id="collapsePhotos" class="card-body collapse" [ngbCollapse]="true">
                    <br>
                    <div class="row">
                            <div class="col-sm-6">
                                    <div class="alert alert-success" *ngIf="showAlertSuccess">
                                            <strong >La modification a été mise à jour</strong>
                                        <a (click)="closeAlert()" class="close" data-dismiss="alert" aria-label="close">×</a>    
                                        </div>
                            </div>
                        </div>
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_faceAvantDoit"
                                                jhiTranslate="auxiliumApp.reparateur.faceAvantDroit"
                                                for="field_faceAvantDoit">face
                                                Avant Droit
                                            </label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showFaceAvantDroitAttachment">
                                            <div class="form-group">
                                                <input id="field_faceAvantDoit"  type="file"
                                                    class="form-control form-control-sm"
                                                    name="faceAvantDroit"
                                                    [(ngModel)]="faceAvantDroitAttachment.label"
                                                    (change)="onFaceAvantDroitFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf" />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn"
                                                    *ngIf="faceAvantDroitPreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadfaceAvantDroitFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFaceAvantDroit">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'Face Avant Droit')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFaceAvantDroit">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteFaceAvantDroitFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <br />

                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_faceAvantGauche"
                                                jhiTranslate="auxiliumApp.reparateur.faceAvantGauche"
                                                for="field_faceAvantGauche">face
                                                Avant Gauche
                                            </label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showFaceAvantGaucheAttachment">
                                            <div class="form-group">
                                                <input id="field_faceAvantGauche" type="file"
                                                    class="form-control form-control-sm"
                                                    name="faceAvantGauche"
                                                    [(ngModel)]="faceAvantGaucheAttachment.label"
                                                    (change)="onFaceAvantGaucheFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn"
                                                    *ngIf="faceAvantGauchePreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadFaceAvantGaucheFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFaceAvantGauche">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'Face Avant Gauche')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFaceAvantGauche">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteFaceAvantGaucheFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br />


                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_faceArriereDroit"
                                                jhiTranslate="auxiliumApp.reparateur.faceArriereDroit"
                                                for="field_faceArriereDroit">face Arriere Droit
                                            </label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showFaceArriereDroitAttachment">
                                            <div class="form-group">
                                                <input id="field_faceArriereDroit" type="file"
                                                    class="form-control form-control-sm"
                                                    name="faceArriereDroit"
                                                    [(ngModel)]="faceArriereDroitAttachment.label"
                                                    (change)="onFaceArriereDroitFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn"
                                                    *ngIf="faceArriereDroitPreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadFaceArriereDroitFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFaceArriereDroit">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'Face Arriere Droit')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFaceArriereDroit">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteFaceArriereDroitFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_FaceArriereGauche"
                                                jhiTranslate="auxiliumApp.reparateur.faceArriereGauche"
                                                for="field_FaceArriereGauche">Face Arriere Gauche
                                            </label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showFaceArriereGaucheAttachment">
                                            <div class="form-group">
                                                <input id="field_FaceArriereGauche" type="file"
                                                    class="form-control form-control-sm"
                                                    name="FaceArriereGauche"
                                                    [(ngModel)]="faceArriereGaucheAttachment.label"
                                                    (change)="onFaceArriereGaucheFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn"
                                                    *ngIf="faceArriereGauchePreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadFaceArriereGaucheFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFaceArriereGauche">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'Face Arriere Gauche')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFaceArriereGauche">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteFaceArriereGaucheFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_Finition"
                                                jhiTranslate="auxiliumApp.reparateur.finition"
                                                for="field_Finition">Finition
                                            </label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showFinitionAttachment">
                                            <div class="form-group">
                                                <input id="field_Finition" type="file"
                                                    class="form-control form-control-sm" name="Finition"
                                                    [(ngModel)]="finitionAttachment.label"
                                                    (change)="onFinitionFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn" *ngIf="finitionPreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadFinitionFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showFinition">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'Finition')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showFinition">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteFinitionFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_facture"
                                                jhiTranslate="auxiliumApp.reparateur.facture"
                                                for="field_facture">facture
                                            </label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showFactureAttachment">
                                            <div class="form-group">
                                                <input id="field_facture"  type="file"
                                                    class="form-control form-control-sm"
                                                    name="facture"
                                                    [(ngModel)]="factureAttachment.label"
                                                    (change)="onFactureFileChange($event)"
                                                    accept=".jpg,.jpeg,.png"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn"
                                                    *ngIf="facturePreview">
                                                    <button type="button"
                                                        class="btn btn-sm btn-default"
                                                        (click)="downloadFactureFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showFacture">
                                                    <button type="button" class="btn btn-sm btn-default" (click)="getPieceNew('facture', sinisterPec.id, 'Facture')"><i
                                                        class="fa fa-sm fa-download"></i></label>
                                                  </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showFacture">
                                                    <button type="button"
                                                        class="btn btn-danger btn-sm"
                                                        (click)="deleteFactureFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="col-lg-6">
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_nSerie"
                                                jhiTranslate="auxiliumApp.reparateur.nSerie"
                                                for="field_nSerie">N°
                                                Série
                                            </label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showNSerieAttachment">
                                            <div class="form-group">
                                                <input id="field_nSerie" type="file"
                                                    class="form-control form-control-sm" name="nSerie"
                                                    [(ngModel)]="nSerieAttachment.label"
                                                    (change)="onNSerieFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn" *ngIf="nSeriePreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadNSerieFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showNSerie">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'NSerie')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showNSerie">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteNSerieFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_immatriculation"
                                                jhiTranslate="auxiliumApp.reparateur.immatriculation"
                                                for="field_immatriculation">Immatriculation</label>
                                        </div>

                                        <div class="col-lg-4" *ngIf="showImmatriculationAttachment">
                                            <div class="form-group">

                                                <input id="field_immatriculation" type="file"
                                                    class="form-control form-control-sm"
                                                    name="immatriculation"
                                                    [(ngModel)]="immatriculationAttachment.label"
                                                    (change)="onImmatriculationFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn"
                                                    *ngIf="immatriculationPreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadImmatriculationFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showImmatriculation">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'Immatriculation')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showImmatriculation">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteImmatriculationFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <br />
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_compteur"
                                                jhiTranslate="auxiliumApp.reparateur.compteur"
                                                for="field_compteur">compteur</label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showCompteurAttachment">
                                            <div class="form-group">

                                                <input id="field_compteur" type="file"
                                                    class="form-control form-control-sm" name="compteur"
                                                    [(ngModel)]="compteurAttachment.label"
                                                    (change)="onCompteurFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn" *ngIf="compteurPreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadCompteurFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showCompteur">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'Compteur')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showCompteur">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteCompteurFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <br />
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_carteGrise"
                                                jhiTranslate="auxiliumApp.reparateur.carteGrise"
                                                for="field_carteGrise">carte Grise</label>
                                        </div>

                                        <div class="col-lg-4" *ngIf="showCarteGriseQuoteAttachment">
                                            <div class="form-group">

                                                <input id="field_carteGrise" type="file"
                                                    class="form-control form-control-sm"
                                                    name="carteGrise"
                                                    [(ngModel)]="carteGriseQuoteAttachment.label"
                                                    (change)="onCarteGriseQuoteFileChange($event)"
                                                    accept=".jpg,.jpeg,.png,.pdf"  />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn" *ngIf="carteGriseQuotePreview">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="downloadCarteGriseFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showCarteGriseQuote">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="getPieceNew('quotation', sinisterPec.id, 'Carte Grise Quotation')"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showCarteGriseQuote">
                                                    <button type="button" class="btn btn-danger btn-sm"
                                                        (click)="deleteCarteGriseQuoteFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <br>
                                <div class="col-lg-12">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label class="field_PhotoReparation"
                                                jhiTranslate="auxiliumApp.reparateur.photoReparation"
                                                for="field_PhotoReparation">photoReparation
                                            </label>
                                        </div>
                                        <div class="col-lg-4" *ngIf="showPhotoReparationAttachment">
                                            <div class="form-group">
                                                <input id="field_PhotoReparation" type="file"
                                                    class="form-control form-control-sm"
                                                    name="photoReparation"
                                                    [(ngModel)]="photoReparationAttachment.label"
                                                    (change)="onPhotoReparationFileChange($event)"
                                                    accept=".jpg,.jpeg,.png" />
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="form-group">
                                                <span class="input-group-btn"
                                                    *ngIf="photoReparationPreview">
                                                    <button type="button"
                                                        class="btn btn-sm btn-default"
                                                        (click)="downloadPhotoReparationFile()"><i
                                                            class="fa fa-sm fa-download"></i></button>
                                                </span>
                                                <span class="input-group-btn" *ngIf="showPhotoReparation">
                                                    <button type="button" class="btn btn-sm btn-default" (click)="getPieceNew('facture', sinisterPec.id, 'Photo de Reparation')"><i
                                                        class="fa fa-sm fa-download"></i></label>
                                                  </span>
                                                <span class="input-group-btn"
                                                    *ngIf="showPhotoReparation">
                                                    <button type="button"
                                                        class="btn btn-danger btn-sm"
                                                        (click)="deletePhotoReparationFile()"><i
                                                            class="fa fa-sm fa-remove"></i></label>
                                                </span>
                                            </div>
                                        </div>


                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                    <br>
                                        <div class="col-sm-2">
                                            <button type="button" class="btn btn-primary btn-sm pull-right"
                                                (click)="ajoutNouvelpieceJointe();" style="margin-top:15px">
                                                <span class="fa fa-edit"></span> <span>Ajouter Nouvelle Piéce Jointe
                                                </span>
                                            </button>
                                        </div>
                                        <br /><br />
                                        <div *ngIf="ajoutNouvelpieceform">
                                            <div class="col-sm-12">
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <label class="form-control-label"
                                                            jhiTranslate="auxiliumApp.pieceJointe.libelle"
                                                            for="field_libelle">Libelle</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            name="libelle" id="libelle"
                                                            [(ngModel)]="pieceAttachment1.label" />
                                                        <div [hidden]="!isError">
                                                            <small class="form-text text-danger"
                                                                [hidden]="!islibelleError"
                                                                jhiTranslate="entity.validation.required">This
                                                                field is required.</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label class="form-control-label"
                                                            jhiTranslate="auxiliumApp.pieceJointe.file"
                                                            for="field_chemin">Fichier</label>
                                                        <input id="field_chemin" type="file"
                                                            class="form-control form-control-sm" name="field_chemin"
                                                            (change)="onPieceFileChange1($event)"
                                                            accept=".jpg,.jpeg,.png" [(ngModel)]="pieceAttachment1.type"
                                                            required />



                                                        <span class="input-group-btn" *ngIf="piecePreview1">
                                                            <button type="button" class="btn btn-sm btn-default"
                                                                (click)="downloadPieceFile1()"><i
                                                                    class="fa fa-sm fa-download"></i></button>
                                                        </span>



                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label style="width: 100%">&nbsp;</label>
                                                        <!-- <button *ngIf="!isPcsModeEdit"-->
                                                        <button
                                                            [disabled]="pieceAttachment1.label  == null ||  pieceAttachment1.type == undefined"
                                                            class="btn btn-sm btn-primary addnew"
                                                            (click)="ajoutPiece1();">
                                                            <span class="fa fa-plus"></span>
                                                            <span
                                                                jhiTranslate="auxiliumApp.observation.home.createLabel">Create
                                                                new Description
                                                            </span>
                                                        </button>
                                                        <!-- <button *ngIf="isPcsModeEdit"
                                                                    [disabled]="pieceJ.typeLibelle  == null || pieceJ.libelle == undefined "
                                                                    class="btn btn-sm btn-primary addnew" (click)="editPieceJ();">
                                                                    <span class="fa fa-pencil"></span>
                                                                    <span jhiTranslate="auxiliumApp.observation.home.editLabel">Edit
                                                                    </span>
                                                                </button> -->
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <br /><br />
                                        <div class="col-sm-12">
                                            <div class="table-responsive"
                                                *ngIf="piecesAttachments && piecesAttachments.length > 0">
                                                <table class="table table-sm table-hover table-bordered">
                                                    <thead>
                                                        <tr jhiSort style="color: white; background-color: #167F92">
                                                            <th jhiSortBy="date"><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.libelle">Libelle</span>
                                                                <span class="fa fa-sort"></span></th>
                                                                <th jhiSortBy="date"><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.dateCreation">Date
                                                                    Creation</span>
                                                                <span class="fa fa-sort"></span></th>

                                                            <th><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.file">Fichier</span>
                                                                <span class="fa fa-sort"></span></th>
                                                            <th><span></span>
                                                                <span class="fa fa-sort"></span></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let piecesjointe of piecesAttachments">
                                                            <td>{{piecesjointe.label}}</td>
                                                            <td>{{piecesjointe.creationDate | date:'dd/MM/yyyy HH:mm:ss'}}</td>

                                                            <td class="text-right" *ngIf="!piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <button type="button" class="btn btn-sm btn-default"
                                                                        (click)="downloadPieceFile(piecesjointe.pieceFile)"><i
                                                                            class="fa fa-sm fa-download"></i></button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right" *ngIf="piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <button type="button" class="btn btn-sm btn-default"
                                                                        (click)="getPieceForAttachment('PHOTOREPARATION', piecesjointe.id, piecesjointe.originalName)"><i
                                                                            class="fa fa-sm fa-download"></i></button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right" *ngIf="!piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                   
                                                                    <button type="button"
                                                                        (click)="deletePieceJ(piecesjointe)"
                                                                        class="btn btn-danger btn-sm">
                                                                        <span class="fa fa-sm fa-remove"></span>
                                                                    </button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right" *ngIf="piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                   
                                                                    <button type="button" (click)="deletePieceJointesPH(piecesjointe)" class="btn btn-danger btn-sm" 
                                                     ><i class="fa fa-sm fa-remove"></i></button>
                                                                </div>
                                                            </td>

                                                            </ng-container>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <br>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-sm btn-primary" (click)="saveAttachmentsPhotoAvantReparation()">
                            <span class="fa fa-save"></span>&nbsp;
                            <span jhiTranslate="entity.action.save">Save</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!------------PHOTO AVANT ET APRES REPARATION-->

<!--------------------IMPRIMÉ------------------->

<div class="row" *ngIf="imprimesAttachments.length > 0">
    <div class="col-lg-12">
    <div class="card">

        <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#Imprime">
            <strong > Imprimé</strong>
        </div>
        <div id="Imprime" class="card-body collapse">
            <div class="row">
                    
                    <div class="col-lg-12">
                <div class="card-body">
                    <div class="table-responsive">
                        <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-sm table-hover table-bordered" style="width: 100%">
                            <thead style="color:white;background-color:#11859b">
                                <tr>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.typePiece">type de pièce</span></th>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.nameUserCreate">création user</span></th>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.dateCreation">date création</span></th>
                                    <th><!--<span jhiTranslate="auxiliumApp.sinisterPec.piece">lien</span>--></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let pieceAttch of imprimesAttachments ;">
                                    <td>{{pieceAttch.label}}</td>
                                    <td>{{pieceAttch.firstNameUser}} {{pieceAttch.lastNameUser}}</td>
                                    <td>{{pieceAttch.creationDate | date:'dd/MM/yyyy'}}</td>
                                    <td class="text-right">
                                        <div class="btn-group flex-btn-group-container">
                                            <button type="button" (click)="getPieceForAttachment('imprimePec', pieceAttch.id, pieceAttch.originalName)" class="btn btn-sm btn-default"><i
                                                    class="fa fa-sm fa-download"></i></button>
                                            <button type="button" (click)="deletePieceJointesImprimes(pieceAttch)" class="btn btn-danger btn-sm" 
                                                     ><i class="fa fa-sm fa-remove"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            </div>
              
        </div>
    </div>
</div>
</div>

<!--------------------IMPRIMÉ------------------->

<!--------------------AutresPiecesJointes------->

<div class="row" *ngIf="piecesJointesAttachments.length > 0">
    <div class="col-lg-12">
    <div class="card">

        <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#aup">
            <strong > Autres Pièces jointes</strong>
        </div>
        <div id="aup" class="card-body collapse">
            <div class="row">
                    
                    <div class="col-lg-12">
                <div class="card-body">
                    <div class="table-responsive">
                        <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-sm table-hover table-bordered" style="width: 100%">
                            <thead style="color:white;background-color:#11859b">
                                <tr>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.typePiece">type de pièce</span></th>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.nameUserCreate">création user</span></th>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.dateCreation">date création</span></th>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.description">note</span></th>
                                    <th><!--<span jhiTranslate="auxiliumApp.sinisterPec.piece">lien</span>--></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let pieceAttch of piecesJointesAttachments ;">
                                    <td>{{pieceAttch.label}}</td>
                                    <td>{{pieceAttch.firstNameUser}} {{pieceAttch.lastNameUser}}</td>
                                    <td>{{pieceAttch.creationDate | date:'dd/MM/yyyy'}}</td>
                                    <td>{{pieceAttch.note}}</td>
                                    <td class="text-right">
                                        <div class="btn-group flex-btn-group-container">
                                            <button type="button" (click)="getPieceForAttachment('autresPiecesJointes', pieceAttch.id, pieceAttch.originalName)" class="btn btn-sm btn-default"><i
                                                    class="fa fa-sm fa-download"></i></button>
                                            <button type="button" (click)="deletePieceJointesAutresPiecesJointes(pieceAttch)" class="btn btn-danger btn-sm" 
                                                ><i class="fa fa-sm fa-remove"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            </div>
              
        </div>
    </div>
</div>
</div>

<!--------------------AutresPiecesJointes------->

<!-- Listes Quotations -->
<div class="row">
    <div class="col-lg-12">
    <div class="card">

        <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#quotation">
            <strong > Listes des Devis</strong>
        </div>
        <div id="quotation" class="card-body collapse" [ngbCollapse]="true">
                                        <br>
                                        <div class="row">
                                                <div class="col-sm-6">
                                                        <div class="alert alert-success" *ngIf="showAlertSuccess">
                                                                <strong >La modification a été mise à jour</strong>
                                                            <a (click)="closeAlert()" class="close" data-dismiss="alert" aria-label="close">×</a>    
                                                            </div>
                                                </div>
                                            </div>
                                        <div class="row">

                                                <div class="col-sm-11"></div>
                                                <div class="col-sm-1">
                                                        <button  
                                                        class="btn btn-sm btn-primary addnew" (click)="addFormQuotation()">
                                                            <span class="fa fa-plus"></span>
                                                            <span  jhiTranslate="auxiliumApp.observation.home.createLabel">Creer</span>
                                                        </button>
                                                    
                                                </div>
                                        </div>
                                        <div class="card-body" *ngIf="isQuoteEntry == true">
                                                <div class="row">
                                                        <div class="col-sm-2">
                                                            <label class="form-control-label"
                                                                jhiTranslate="auxiliumApp.sinisterPec.receptionVehicule"
                                                                for="field_receptionVehicule">Réception Véhicule</label>
                                                            <input type="checkbox" class="check-input" name="receptionVehicule"
                                                                id="field_receptionVehicule" (ngModelChange)="dateQuotationNow()"
                                                                [(ngModel)]="sinisterPec.receptionVehicule" [disabled]="sinisterPec.receptionVehicule" />
                                                        </div>
                                                        <div class="col-sm-4" *ngIf="sinisterPec.receptionVehicule">
                                                            <label class="form-control-label"
                                                                jhiTranslate="auxiliumApp.sinisterPec.dateReceptionVehicule"
                                                                for="field_dateReceptionVehicule">dateReceptionVehicule</label>
                                                            <div class="input-group">
                                                                <input id="field_myDateReceptionVehicule"
                                                                    class="form-control form-control-sm"
                                                                    name="myDateReceptionVehicule" [(ngModel)]="myDateQuotation"
                                                                    readonly />
                                                                <span class="input-group-btn"></span>&nbsp;&nbsp;
                                                            </div>
                                                        </div>
        
                                                        <!--<div class="col-sm-4" *ngIf="!sinisterPec.receptionVehicule">
                                                            <label class="form-control-label"
                                                                jhiTranslate="auxiliumApp.sinisterPec.dateReceptionVehicule"
                                                                for="field_dateReceptionVehicule">dateReceptionVehicule</label>
                                                            <div class="input-group">
                                                                <input id="field_dateReceptionVehicule" type="text"
                                                                    class="form-control form-control-sm"
                                                                    name="dateReceptionVehicule" ngbDatepicker
                                                                    #dateReceptionVehiculeDp="ngbDatepicker"
                                                                    [(ngModel)]="sinisterPec.vehicleReceiptDate"
                                                                     />
                                                                <span class="input-group-btn">
                                                                    <button type="button" class="btn btn-sm btn-default"
                                                                        (click)="dateReceptionVehiculeDp.toggle()"><i
                                                                            class="fa fa-calendar"></i></button>
                                                                </span>
                                                            </div>
                                                        </div>-->
                                                    </div>
                                                <div class="row">
                                                        <div class="col-sm-3">
                                                            <label class="form-control-label"
                                                                jhiTranslate="auxiliumApp.sinisterPec.etatDuChoc"
                                                                for="field_etatduchoc">etat du choc</label>
                                                            <div class="input-group" data-toggle="buttons">
                                                                <label class="btn btn-sm btn-primary" for="ppInsured"
                                                                    (click)="changeNatureReparation(true);">
                                                                    <input type="radio"
                                                                        name="natureReparation" id="leger" autocomplete="off"
                                                                        [value]="true" [(ngModel)]="sinisterPec.lightShock">
                                                                    Choc Léger
                                                                </label> &nbsp;
                                                                <label class="btn btn-sm btn-primary" for="pmInsured"
                                                                    (click)="changeNatureReparation(false);">
                                                                    <input type="radio"
                                                                        name="natureReparation" id="nonLeger" autocomplete="off"
                                                                        [value]="false" [(ngModel)]="sinisterPec.lightShock">
                                                                    Choc non léger
                                                                </label>
                                                            </div>
                                                        </div>
        
                                                        <div class="col-sm-3">
                                                            <label class="form-control-label"
                                                                jhiTranslate="auxiliumApp.sinisterPec.demandeDeDemantage"
                                                                for="field_demandededemantage">demande de demontage</label>
                                                            <div class="input-group" data-toggle="buttons">
                                                                <label class="btn btn-sm btn-primary" for="ppInsured">
                                                                    <input type="radio" name="demontage" id="demontage"
                                                                        autocomplete="off" [value]="true"
                                                                        [(ngModel)]="sinisterPec.disassemblyRequest">
                                                                    Oui
                                                                </label> &nbsp;
                                                                <label class="btn btn-sm btn-primary" for="pmInsured">
                                                                    <input type="radio" name="demontage" id="nonDemontage"
                                                                        autocomplete="off" [value]="false"
                                                                        [(ngModel)]="sinisterPec.disassemblyRequest">
                                                                    Non
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                        </div>
                                        <div class="card-body" *ngIf="isQuoteEntry == true">
                                            <div class="row">
                                                <!-- MO details list -->
    
                                                <div class="col-lg-12">
                                                    <div class="card">
                                                        <div class=" collapsible-card card-header align-items-center collapsed"
                                                            data-toggle="collapse" href="#collapseDetailsMo">
                                                            <h4 style="font-weight:bold;"
                                                                jhiTranslate="auxiliumApp.detailsMo.home.title">Details
                                                                mo
                                                            </h4>
                                                        </div>
                                                        <div id="collapseDetailsMo" class="card-body collapse">
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <label
                                                                        style="color: white">Vous
                                                                        devez paramètrer des types de pièce !</label>
                                                                    <input type="button"
                                                                        class="btn btn-sm btn-primary addnew float-sm-right"
                                                                        style="margin-bottom: 10px;"
                                                                        (click)="addNewMoLine()"
                                                                        value="Ajouter main d'oeuvre">
                                                                </div>
                                                                <div class="col-sm-12">
                                                                    <div class="table-responsive"
                                                                        *ngIf="detailsPiecesMO && detailsPiecesMO.length > 0">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>
                                                                                        <span>Observation Expert</span>
                                                                                    </th>
                                                                                    <th>
                                                                                        <span> Nombre MO estimée
                                                                                        </span>
                                                                                    </th>
    
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.designation">Designation</span>
                                                                                    </th>
                                                                                    <th></th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.typeIntervention">Type
                                                                                            Intervention
                                                                                        </span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.th">th</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.nombreHeures">Nombre
                                                                                            Heures
                                                                                        </span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.totalHt">totalHt</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.remise">remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalRemise">total
                                                                                            remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalApresRemise">total
                                                                                            aprés remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.tva">tva</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalTva">total
                                                                                            tva</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.totalTtc">totalttc</span>
                                                                                    </th>
                                                                                    <th></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr
                                                                                    *ngFor="let detailsPieceMo of detailsPiecesMO; let i=index">
                                                                                    <td>
                                                                                        <div 
                                                                                            class="col-sm-3">
                                                                                            <select
                                                                                                class="btn-default btn-sm"
                                                                                                style="background-color: white"
                                                                                                name="moObservation[{{i}}]"
                                                                                                [(ngModel)]="detailsPieceMo.observationExpert"
                                                                                                (ngModelChange)="DecisionExpertByObser(detailsPieceMo.observationExpert,detailsPieceMo)"
                                                                                                >
                                                                                                <option
                                                                                                    [ngValue]="expertObservation.id"
                                                                                                    *ngFor="let expertObservation of expertObservations">
                                                                                                    {{expertObservation.label}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="number"
                                                                                            class="form-control form-control-sm"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.nombreMOEstime"
                                                                                            name="nombreMOEstime[{{i}}]"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="hidden"
                                                                                            name="piecMoDesignationId[{{i}}]"
                                                                                            [(ngModel)]="detailsPieceMo.designationId"
                                                                                            >
                                                                                        <input list="piecesmodes"
                                                                                            name="piecMoDesignation[{{i}}]"
                                                                                            [(ngModel)]="detailsPieceMo.designation"
                                                                                            (change)="selectPieceMoDesignation(detailsPieceMo)"
                                                                                            (ngModelChange)="selectTapedPieceMoDesignation(detailsPieceMo)"
                                                                                            placeholder="Choisissez une désignation"
                                                                                            class="input input-sm"
                                                                                             />
                                                                                        <datalist id="piecesmodes">
                                                                                            <select>
                                                                                                <option
                                                                                                    *ngFor="let designationOption of moPieces;">
                                                                                                    {{designationOption.label}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </datalist>
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <button type="button"
                                                                                            (click)="openAddPiece(detailsPieceMo, 1)"
                                                                                            class="btn btn-sm btn-primary margin-right-5">
                                                                                            <span class="fa fa-plus"></span>
                                                                                        </button>
    
                                                                                    </td>
                                                                                    <td>
                                                                                        <select class="btn-default btn-sm"
                                                                                            style="background-color: white"
                                                                                            [(ngModel)]="detailsPieceMo.typeInterventionId"
                                                                                            (ngModelChange)="observationExpertByTypeIntervention(detailsPieceMo); changeTypeInterventionMO(detailsPieceMo)"
                                                                                            
                                                                                            name="interventionMo[{{i}}]"
                                                                                            >
                                                                                            <option
                                                                                                [ngValue]="reftypeinterventionOption.id"
                                                                                                *ngFor="let reftypeinterventionOption of refOperationTypesMo">
                                                                                                {{reftypeinterventionOption.libelle}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.prixUnit"
                                                                                            (ngModelChange)="changeMo(detailsPieceMo)"
                                                                                            name="puMo[{{i}}]"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             >
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.nombreHeures"
                                                                                            (ngModelChange)="changeMo(detailsPieceMo)"
                                                                                            name="nombreHeures[{{i}}]"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.totalHt"
                                                                                            name="moTht[{{i}}]"  />
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.discount"
                                                                                            (ngModelChange)="changeMo(detailsPieceMo)"
                                                                                            name="discount[{{i}}]"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.amountDiscount"
                                                                                            name="totalDiscount[{{i}}]"
                                                                                            >
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.amountAfterDiscount"
                                                                                            name="amountAfterDiscountMo[{{i}}]"
                                                                                            >
                                                                                    </td>
                                                                                    <td>
                                                                                        <select class="btn-default btn-sm"
                                                                                            style="background-color: white"
                                                                                            name="vatMo[{{i}}]"
                                                                                            [(ngModel)]="detailsPieceMo.tva"
                                                                                            (ngModelChange)="changeMo(detailsPieceMo)"
                                                                                            >
                                                                                            <option [ngValue]="vat.vatRate"
                                                                                                *ngFor="let vat of listVat;">
                                                                                                {{vat.vatRate}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.amountVat"
                                                                                            name="amountTvaMo[{{i}}]"
                                                                                             />
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="detailsPieceMo.totalTtc"
                                                                                            name="moTtc[{{i}}]"
                                                                                             />
                                                                                    </td>
                                                                                    <td >
                                                                                        <div
                                                                                            class="btn-group flex-btn-group-container">
                                                                                            <a (click)="removeMoLine(detailsPieceMo, i)"
                                                                                                class="btn btn-sm btn-default"><span
                                                                                                    class="fa fa-remove"
                                                                                                    style="color: red"></span></a>
                                                                                        </div>
                                                                                    </td>
                                                                        
    
                                                                                </tr>
                                                                                <tr>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <div class="row justify-content-center"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <!-- home peinture list -->
                                                <div class="col-lg-12">
                                                    <div class="card">
                                                        <div class=" collapsible-card card-header align-items-center collapsed"
                                                            data-toggle="collapse" href="#collapseHomePaint">
                                                            <h4 style="font-weight:bold;"
                                                                jhiTranslate="auxiliumApp.detailsPieces.homePeinture">
                                                                Home
                                                                Peinture
                                                            </h4>
                                                        </div>
                                                        <div id="collapseHomePaint" class="card-body collapse">
                                                            <div class="row">
                                                                <div class="col-sm-12"
                                                                    >
                                                                    <label
                                                                        *ngIf="!ingredientPieces || ingredientPieces.length == 0"
                                                                        style="color: white">Vous
                                                                        devez paramètrer des types de pièce !</label>
                                                                    <input type="button"
                                                                        class="btn btn-sm btn-primary addnew float-sm-right"
                                                                        style="margin-bottom: 10px;"
                                                                        (click)="addNewIngredientLine()"
                                                                        value="Ajouter ingrédient de peinture">
                                                                </div>
                                                                <div class="col-sm-12">
                                                                    <div class="table-responsive"
                                                                        *ngIf="detailsPiecesIngredient && detailsPiecesIngredient.length > 0">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    
                                                                                    <th>
                                                                                        <span>Observation Expert</span>
                                                                                    </th>
    
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.designation">Designation</span>
                                                                                    </th>
                                                                                    <th></th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.typeIntervention">Type
                                                                                            Intervention
                                                                                        </span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.th">th</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.nombreHeures">Nombre
                                                                                            Heures
                                                                                        </span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.totalHt">totalHt</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.remise">remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalRemise">total
                                                                                            remise</span>
                                                                                    </th>
    
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalApresRemise">total
                                                                                            aprés remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.tva">tva</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalTva">total
                                                                                            tva</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.totalTtc">totalttc</span>
                                                                                    </th>
                                                                                    <th></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr
                                                                                    *ngFor="let dpIngredient of detailsPiecesIngredient ; let i=index">
                                                                                    
    
                                                                                    <td>
    
                                                                                        <div 
                                                                                            class="col-sm-3">
                                                                                            <select
                                                                                                class="btn-default btn-sm"
                                                                                                style="background-color: white"
                                                                                                name="dpObservation[{{i}}]"
                                                                                                [(ngModel)]="dpIngredient.observationExpert"
                                                                                                (ngModelChange)="DecisionExpertByObser(dpIngredient.observationExpert,dpIngredient)"
                                                                                                >
                                                                                                <option
                                                                                                    [ngValue]="expertObservation.id"
                                                                                                    *ngFor="let expertObservation of expertObservations">
                                                                                                    {{expertObservation.label}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </div>
                                                                                    </td>
    
                                                                                    <td>
    
                                                                                        <input type="hidden"
                                                                                            name="piecPeDesignationId[{{i}}]"
                                                                                            [(ngModel)]="dpIngredient.designationId"
                                                                                            >
                                                                                        <input list="piecespedes"
                                                                                            name="piecPeDesignation[{{i}}]"
                                                                                            [(ngModel)]="dpIngredient.designation"
                                                                                            (change)="selectPiecePeDesignation(dpIngredient)"
                                                                                            (ngModelChange)="selectTapedPiecePeDesignation(dpIngredient)"
                                                                                            placeholder="Choisissez une désignation"
                                                                                            class="input input-sm"
                                                                                             />
    
    
    
                                                                                        <datalist id="piecespedes">
                                                                                            <select>
                                                                                                <option
                                                                                                    *ngFor="let designationOption of ingredientPieces;">
                                                                                                    {{designationOption.label}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </datalist>
    
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <button type="button"
                                                                                            (click)="openAddPiece(dpIngredient, 2)"
                                                                                            class="btn btn-sm btn-primary margin-right-5">
                                                                                            <span class="fa fa-plus"></span>
                                                                                        </button>
    
                                                                                    </td>
    
                                                                                    <td>
    
                                                                                        <select class="btn-default btn-sm"
                                                                                            style="background-color: white"
                                                                                            [(ngModel)]="dpIngredient.typeInterventionId"
                                                                                            (ngModelChange)="changeTypeInterventionIP(dpIngredient)"
                                                                                            name="interventionIng[{{i}}]"
                                                                                            >
                                                                                            <option
                                                                                                [ngValue]="reftypeinterventionOption.id"
                                                                                                *ngFor="let reftypeinterventionOption of refOperationTypesPeinture">
                                                                                                {{reftypeinterventionOption.libelle}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="dpIngredient.prixUnit"
                                                                                            (ngModelChange)="changeIngredient(dpIngredient)"
                                                                                            name="pu[{{i}}]"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                              />
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="dpIngredient.quantite"
                                                                                            (ngModelChange)="changeIngredient(dpIngredient)"
                                                                                            name="quantite[{{i}}]"
                                                                                            style="width: 100px"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            [value]="dpIngredient.totalHt"
                                                                                            name="ingrTht[{{i}}]" 
                                                                                            style="width: 100px"
                                                                                            />
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="dpIngredient.discount"
                                                                                            (ngModelChange)="changeIngredient(dpIngredient)"
                                                                                            name="discountIng[{{i}}]"
                                                                                            style="width: 100px"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="dpIngredient.amountDiscount"
                                                                                            name="totalDiscountIng[{{i}}]"
                                                                                            >
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="dpIngredient.amountAfterDiscount"
                                                                                            name="amountAfterDiscountIng[{{i}}]"
                                                                                            >
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <select class="btn-default btn-sm"
                                                                                            style="background-color: white"
                                                                                            name="vatIng[{{i}}]"
                                                                                            [(ngModel)]="dpIngredient.tva"
                                                                                            (ngModelChange)="changeIngredient(dpIngredient)"
                                                                                            >
                                                                                            <option [ngValue]="vat.vatRate"
                                                                                                *ngFor="let vat of listVat;">
                                                                                                {{vat.vatRate}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="dpIngredient.amountVat"
                                                                                            name="amountTvaIng[{{i}}]"
                                                                                            >
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="dpIngredient.totalTtc"
                                                                                            name="ingrTtc[{{i}}]" 
                                                                                            style="width: 100px" />
                                                                                    </td>
                                                                                    <td >
                                                                                        <div
                                                                                            class="btn-group flex-btn-group-container">
                                                                                            <a (click)="removeIngredientLine(dpIngredient, i)"
                                                                                                class="btn btn-sm btn-default"><span
                                                                                                    class="fa fa-remove"
                                                                                                    style="color: red"></span></a>
                                                                                        </div>
                                                                                    </td>
    
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <div class="row justify-content-center"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- home fourniture list -->
                                                            </br>
    
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <label
                                                                        *ngIf="!fourniturePieces || fourniturePieces.length == 0"
                                                                        style="color: white">Vous
                                                                        devez paramètrer des types de pièce !</label>
                                                                    <input type="button"
                                                                        class="btn btn-sm btn-primary addnew float-sm-right"
                                                                        style="margin-bottom: 10px;"
                                                                        (click)="addNewPieceFournitureLineForPetiteFourniture()"
                                                                        value="Ajouter petite fourniture">
                                                                </div>
                                                                <div class="col-sm-12">
                                                                    <div class="table-responsive"
                                                                        *ngIf="detailsPiecesFourniture && detailsPiecesFourniture.length > 0">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    
                                                                                    <th>
                                                                                        <span>Observation Expert</span>
                                                                                    </th>
    
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.designation">Designation</span>
                                                                                    </th>
                                                                                    <th></th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.typeIntervention">Type
                                                                                            Intervention
                                                                                        </span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.th">th</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.nombreHeures">Nombre
                                                                                            Heures
                                                                                        </span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.totalHt">totalHt</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.remise">remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalRemise">total
                                                                                            remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalApresRemise">total
                                                                                            aprés remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.tva">tva</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalTva">total
                                                                                            tva</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.totalTtc">totalttc</span>
                                                                                    </th>
                                                                                    <th></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr
                                                                                    *ngFor="let fourniture of detailsPiecesFourniture ; let i=index">
    
                                                                                    <td>
                                                                                        <div
                                                                                            class="col-sm-3">
                                                                                            <select
                                                                                                class="btn-default btn-sm"
                                                                                                style="background-color: white"
                                                                                                name="fournObservation[{{i}}]"
                                                                                                [(ngModel)]="fourniture.observationExpert"
                                                                                                (ngModelChange)="DecisionExpertByObser(fourniture.observationExpert,fourniture)"
                                                                                                >
                                                                                                <option
                                                                                                    [ngValue]="expertObservation.id"
                                                                                                    *ngFor="let expertObservation of expertObservationsPF">
                                                                                                    {{expertObservation.label}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </div>
                                                                                    </td>
    
                                                                                    <td>
                                                                                        <input type="hidden"
                                                                                            name="piecFoDesignationId[{{i}}]"
                                                                                            [(ngModel)]="fourniture.designationId"
                                                                                            >
                                                                                        <input list="piecesfodes"
                                                                                            name="piecFoDesignation[{{i}}]"
                                                                                            [(ngModel)]="fourniture.designation"
                                                                                            (ngModelChange)="selectTapedPieceFoDesignation(fourniture)"
                                                                                            (change)="selectPieceFoDesignation(fourniture)"
                                                                                            placeholder="Choisissez une désignation"
                                                                                            class="input input-sm"
                                                                                             />
    
    
                                                                                        <datalist id="piecesfodes">
                                                                                            <select>
                                                                                                <option
                                                                                                    *ngFor="let designationOption of fourniturePieces;">
                                                                                                    {{designationOption.label}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </datalist>
    
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <button type="button"
                                                                                            (click)="openAddPiece(fourniture, 3)"
                                                                                            class="btn btn-sm btn-primary margin-right-5">
                                                                                            <span class="fa fa-plus"></span>
                                                                                        </button>
    
                                                                                    </td>
    
                                                                                    <td>
    
                                                                                        <select class="btn-default btn-sm"
                                                                                            style="background-color: white"
                                                                                            [(ngModel)]="fourniture.typeInterventionId"
                                                                                            (ngModelChange)="changeTypeInterventionPF(fourniture)"
                                                                                            name="interventionFourn[{{i}}]"
                                                                                            >
                                                                                            <option
                                                                                                [ngValue]="reftypeinterventionOption.id"
                                                                                                *ngFor="let reftypeinterventionOption of refOperationTypesFourniture">
                                                                                                {{reftypeinterventionOption.libelle}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="fourniture.prixUnit"
                                                                                            (ngModelChange)="changeFourniture(fourniture)"
                                                                                            name="puFour[{{i}}]"
                                                                                            
                                                                                              />
    
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="fourniture.quantite"
                                                                                            (ngModelChange)="changeFourniture(fourniture)"
                                                                                            name="quantiteFourn[{{i}}]"
                                                                                            style="width: 100px"
                                                                                            
                                                                                             />
                                                                                             <!--
                                                                                                 min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             -->
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            [value]="fourniture.totalHt"
                                                                                            name="fournTht[{{i}}]" 
                                                                                            style="width: 100px" />
                                                                                    </td>
    
                                                                                    <td>
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="fourniture.discount"
                                                                                            (ngModelChange)="changeFourniture(fourniture)"
                                                                                            name="discountFourn[{{i}}]"
                                                                                            style="width: 100px" min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
                                                                                    </td>
    
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="fourniture.amountDiscount "
                                                                                            name="totalDiscountFourn[{{i}}]"
                                                                                            >
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="fourniture.amountAfterDiscount"
                                                                                            name="amountAfterDiscountFourn[{{i}}]"
                                                                                            >
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <select class="btn-default btn-sm"
                                                                                            style="background-color: white"
                                                                                            name="vatFourn[{{i}}]"
                                                                                            [(ngModel)]="fourniture.tva"
                                                                                            (ngModelChange)="changeFourniture(fourniture)"
                                                                                            >
                                                                                            <option [ngValue]="vat.vatRate"
                                                                                                *ngFor="let vat of listVat;">
                                                                                                {{vat.vatRate}}
                                                                                            </option>
                                                                                        </select>
    
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="fourniture.amountVat"
                                                                                            name="amountTvaFourn[{{i}}]"
                                                                                            >
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="fourniture.totalTtc"
                                                                                            name="fournTtc[{{i}}]" 
                                                                                            style="width: 100px" />
                                                                                    </td>
                                                                                    <td>
                                                                                        <div
                                                                                            class="btn-group flex-btn-group-container">
                                                                                            <a (click)="removeFournitureLine(fourniture, i)"
                                                                                                class="btn btn-sm btn-default"><span
                                                                                                    class="fa fa-remove"
                                                                                                    style="color: red"></span></a>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <div class="row justify-content-center"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
    
                                                            <!-- End fourniture list-->
    
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <!-- pieces de rechange -->
                                                <div class="col-lg-12">
                                                    <div class="card">
                                                        <div class=" collapsible-card card-header align-items-center collapsed"
                                                            data-toggle="collapse" href="#collapseHomePieces">
                                                            <h4 style="font-weight:bold;"
                                                                jhiTranslate="auxiliumApp.detailsPieces.homeRechange">
                                                                Home
                                                                pieces
                                                            </h4>
                                                        </div>
    
                                                        <div id="collapseHomePieces" class="card-body collapse">
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <label *ngIf="!moPieces || moPieces.length == 0"
                                                                        style="color: white">Vous
                                                                        devez paramètrer des types de pièce !</label>
                                                                    <input type="button"
                                                                        class="btn btn-sm btn-primary addnew float-sm-right"
                                                                        style="margin-bottom: 10px;"
                                                                        (click)="addNewPieceRechangeLine()"
                                                                        value="Ajouter pièce de rechange">
                                                                </div>
                                                                <div class="col-sm-12">
                                                                    <div class="table-responsive"
                                                                        *ngIf="detailsPieces && detailsPieces.length > 0">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    
                                                                                    <th>
                                                                                        <span>Observation Expert</span>
                                                                                    </th>
                                                                                    <th
                                                                                        >
                                                                                        <span>Vétusté</span>
                                                                                    </th>
    
                                                                                    <!--<th>
                                                                                        <span>Vétusté HT </span>
                                                                                    </th>
                                                                                    <th>
                                                                                        <span> Vétusté TTC</span>
                                                                                    </th>-->
                                                                                    <!-- <th *ngIf="AvisExpert">
                                                                                        <span>participation
                                                                                            d’assuré </span>
                                                                                    </th>
                                                                                    <th *ngIf="AvisExpert">
                                                                                        <span> type participation
                                                                                            d’assuré </span>
                                                                                    </th>-->
                                                                                    <th><span>Observation</span></th>
                                                                                    <th><span>Référence</span></th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsPieces.designation">Designation</span>
                                                                                    </th>
                                                                                    <th></th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsPieces.prixUnit">Prix
                                                                                            Unit
                                                                                        </span></th>
                                                                                    <th><span>Nature Pièce</span></th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsPieces.quantite">Quantite</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.totalHt">totalHt</span>
                                                                                    </th>
    
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.remise">remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalRemise">total
                                                                                            remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalApresRemise">total
                                                                                            aprés remise</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.tva">tva</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.grille.totalTva">total
                                                                                            tva</span>
                                                                                    </th>
                                                                                    <th><span
                                                                                            jhiTranslate="auxiliumApp.detailsMo.totalTtc">totalttc</span>
                                                                                    </th>
                                                                                    <th></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr
                                                                                    *ngFor="let pieces of detailsPieces ; let i=index">
    
    
                                                                                    <td>
    
                                                                                        <div>
    
                                                                                            <select
                                                                                                class="btn-default btn-sm"
                                                                                                style="background-color: white"
                                                                                                name="piecesObservation[{{i}}]"
                                                                                                [(ngModel)]="pieces.observationExpert"
                                                                                                (ngModelChange)="DecisionExpertByObser(pieces.observationExpert,pieces)"
                                                                                                >
                                                                                                <option
                                                                                                    [ngValue]="expertObservation.id"
                                                                                                    *ngFor="let expertObservation of expertObservations">
                                                                                                    {{expertObservation.label}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </div>
                                                                                    </td>
    
                                                                                    <td
                                                                                        >
                                                                                        <input type="number"
                                                                                            class="form-control form-control-sm"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="pieces.vetuste"
                                                                                            (ngModelChange)="calculerHTVVetusteAndTTCVetuste(pieces)"
                                                                                            name="vetuste[{{i}}]" min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
                                                                                        <!--   [disabled]=" pieces.observationExpert == 1 || pieces.observationExpert == 2 || modeConfirmation || (isMaJDevis && pieces.modifiedLine != null)"-->
    
                                                                                    </td>
    
    
                                                                                    <!--<td >
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="pieces.HTVetuste"
                                                                                            name="piecThtVetuste[{{i}}]"
                                                                                             style="width: 100px"
                                                                                             />
                                                                                    </td>
                                                                                    <td
                                                                                        >
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="pieces.TTCVetuste"
                                                                                            name="TTCVetuste[{{i}}]"
                                                                                             style="width: 100px"
                                                                                             />
                                                                                    </td>-->
                                                                                    <!--<td *ngIf="AvisExpert == true">
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="pieces.insuredParticipation"
                                                                                            name="insuredParticipation"
                                                                                            style="width: 100px"
                                                                                            [disabled]=" modeConfirmation || (isMaJDevis && pieces.modifiedLine != null)"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?" />
    
    
                                                                                    </td>
    
                                                                                    <td *ngIf="AvisExpert">
                                                                                        <select class="btn-default btn-sm"
                                                                                            [(ngModel)]="pieces.typePA"
                                                                                            name="typePA" id="field_typePA"
                                                                                            style="width: 100px"
                                                                                            style="background-color: white"
                                                                                            >
    
                                                                                            <option value="%">
                                                                                                %
                                                                                            </option>
                                                                                            <option value="TND">
                                                                                                TND
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>-->
    
                                                                                   <!-- <td
                                                                                        >
                                                                                        <input type="text"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="pieces.observation"
                                                                                            name="piecesObservation[{{i}}]"
                                                                                             />
                                                                                    </td>-->
                                                                                    <td>
    
                                                                                        <select class="btn-default btn-sm"
                                                                                            [(ngModel)]="pieces.observationRepairer"
                                                                                            name="observation[{{i}}]"
                                                                                            id="field_observation"
                                                                                            style="width: 100px"
                                                                                            style="background-color: white"
                                                                                            >
                                                                                            <option
                                                                                                value="PIECE_DISPONIBLE">
                                                                                                PIECE_DISPONIBLE
                                                                                            </option>
                                                                                            <option value="COMMANDE_FERME">
                                                                                                COMMANDE_FERME
                                                                                            </option>
                                                                                            <option
                                                                                                value="PIECE_NON_DISPONIBLE">
                                                                                                PIECE_NON_DISPONIBLE
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>
    
                                                                                    <td>
    
                                                                                        <input type="hidden"
                                                                                            name="piecReferenceId[{{i}}]"
                                                                                            [(ngModel)]="pieces.designationId"
                                                                                            >
                                                                                        <input list="piecesrechange"
                                                                                            name="piecReference[{{i}}]"
                                                                                            [(ngModel)]="pieces.designationReference"
                                                                                            (change)="selectPieceCode(pieces)"
                                                                                            (ngModelChange)="selectTapedPieceCode(pieces)"
                                                                                            placeholder="Choisissez une référence"
                                                                                            class="input input-sm"
                                                                                             />
    
    
                                                                                        <datalist id="piecesrechange">
                                                                                            <select>
                                                                                                <option
                                                                                                    *ngFor="let referenceOption of moPieces;"
                                                                                                    style="background:#FFFFFF">
                                                                                                    {{referenceOption.code}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </datalist>
    
    
    
    
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <input list="piecesrechangedes"
                                                                                            name="piecDesignation[{{i}}]"
                                                                                            [(ngModel)]="pieces.designation"
                                                                                            (change)="selectPieceDesignation(pieces)"
                                                                                            (ngModelChange)="selectTapedPieceDesignation(pieces)"
                                                                                            placeholder="Choisissez une désignation"
                                                                                            class="input input-sm"
                                                                                             />
    
    
    
                                                                                        <datalist id="piecesrechangedes">
                                                                                            <select>
                                                                                                <option
                                                                                                    *ngFor="let designationOption of moPieces;">
                                                                                                    {{designationOption.label}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </datalist>
    
    
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <button type="button"
                                                                                            (click)="openAddPiece(pieces, 1)"
                                                                                            class="btn btn-sm btn-primary margin-right-5">
                                                                                            <span class="fa fa-plus"></span>
                                                                                        </button>
    
                                                                                    </td>
    
    
                                                                                    <td>
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="pieces.prixUnit"
                                                                                            (ngModelChange)="changePieceRechange(pieces)"
                                                                                            name="piecPrixUnit[{{i}}]"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
    
    
                                                                                    </td>
                                                                                    <td>
                                                                                        <select class="btn-default btn-sm"
                                                                                            name="naturePiece[{{i}}]"
                                                                                            [(ngModel)]="pieces.naturePiece"
                                                                                            (ngModelChange)="changeNaturePieceRechange(pieces.naturePiece, pieces)"
                                                                                            id="field_naturePiece"
                                                                                            style="width: 100px"
                                                                                            style="background-color: white"
                                                                                            >
                                                                                            <option value="ORIGINE">
                                                                                                Origine
                                                                                            </option>
                                                                                            <option value="GENERIQUE">
                                                                                                Générique</option>
                                                                                            <option value="CASSE">Casse
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>
                                                                                    <td>
    
                                                                                        <input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="pieces.quantite"
                                                                                            (ngModelChange)="changePieceRechange(pieces)"
                                                                                            name="piecQuantite[{{i}}]"
                                                                                            style="width: 100px"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                             />
    
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            [value]="pieces.totalHt"
                                                                                            name="piecTht[{{i}}]" 
                                                                                            style="width: 100px"
                                                                                             />
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="pieces.discount"
                                                                                            (ngModelChange)="changePieceRechange(pieces)"
                                                                                            name="discountPiece[{{i}}]"
                                                                                            min="0"
                                                                                            pattern="[0-9]+([.][0-9]+)?"
                                                                                            style="width: 100px" />
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="pieces.amountDiscount"
                                                                                            name="totalDiscountPiece[{{i}}]"
                                                                                            
                                                                                            >
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="pieces.amountAfterDiscount"
                                                                                            name="amountAfterDiscountPiece[{{i}}]"
                                                                                            
                                                                                            >
                                                                                    </td>
                                                                                    <td>
                                                                                        <select class="btn-default btn-sm"
                                                                                            style="background-color: white"
                                                                                            name="piecTva[{{i}}]"
                                                                                            [(ngModel)]="pieces.tva"
                                                                                            (ngModelChange)="changePieceRechange(pieces)">
                                                                                            <option [ngValue]="vat.vatRate"
                                                                                                *ngFor="let vat of listVat;">
                                                                                                {{vat.vatRate}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </td>
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            style="width: 100px"
                                                                                            [(ngModel)]="pieces.amountVat"
                                                                                            name="amountTvaPiec[{{i}}]">
                                                                                    </td>
    
                                                                                    <td><input type="number"
                                                                                            class="input input-sm"
                                                                                            [(ngModel)]="pieces.totalTtc"
                                                                                            name="piecTtc[{{i}}]" 
                                                                                            style="width: 100px"
                                                                                             />
                                                                                    </td>
                                                                                    <td >
                                                                                        <div
                                                                                            class="btn-group flex-btn-group-container">
                                                                                            <a (click)="removePieceRechangeLine(pieces, i)"
                                                                                                class="btn btn-sm btn-default"><span
                                                                                                    class="fa fa-remove"
                                                                                                    style="color: red"></span></a>
                                                                                        </div>
                                                                                    </td>
    
    
    
                                                                                </tr>
                                                                                <tr>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                    <td></td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <div class="row justify-content-center"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row top-buffer"></div>
                                                <br />
                                                <div class="col-lg-2">
    
                                                </div>
                                                <div class="col-lg-8">
                                                    <span class="anchor" id="formUserEdit"></span>
                                                    <div class="card">
                                                        <div class="card-header align-items-center notice-info">
                                                            <strong>Total Réparation</strong>
                                                        </div>
    
                                                        <div class="card-body">
                                                            <div class="row">
    
                                                                <div class="form-group col-sm-3">
                                                                    <label
                                                                        jhiTranslate="auxiliumApp.devis.droitTimbre">droitTimbre</label>
    
                                                                    <input id="field_droitTimbre" type="number"
                                                                        class="form-control input input-sm"
                                                                        name="droitTimbre" [(ngModel)]="quotation.stampDuty"
                                                                         />
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label
                                                                        jhiTranslate="auxiliumApp.devis.totalTtc">totalTtc</label>
                                                                    <input id="field_totalTtc" type="text"
                                                                        class="form-control input input-sm" name="totalTtc"
                                                                        [(ngModel)]="quotation.ttcAmount"  />
                                                                </div>
                                                            </div>
    
    
                                                        </div>
                                                    </div>
                                                </div>
    
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="isQuoteEntry == true">

                                                <div class="col-sm-2">
                                                    <br>
                                                    <span style="font-weight:bold;"><label for="field_avis_exp">Avis Technique :</label></span>
                                                </div>
                                            </div>
                                        <div class="card-body" *ngIf="isQuoteEntry == true">
                                                <div class="row">
                
                                                        <div class="col-sm-3">
                                                            <label class="form-control-label" for="field_referenceAvisTechnique">Valeur à neuf
                                                            </label>
                                                            <input type="number" class="form-control form-control-sm" name="valeurNeufAvisTechnique"
                                                                id="field_referenceAvisTechnique" [(ngModel)]="quotation.priceNewVehicle"
                                                                [required]="sinisterPec.modeId == 6 || sinisterPec.modeId == 10 || (sinisterPec.partnerId == 3 && sinisterPec.modeId == 5)" />
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <label for="field_mode">Valeur vénale</label>
                
                                                            <input type="number" class="form-control form-control-sm"
                                                                name="valeurVenale" id="field_mode" [(ngModel)]="quotation.marketValue"
                                                                [required]="sinisterPec.modeId == 8 ||  sinisterPec.modeId == 9" />
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <label for="field_numeroContrat">Kilométrage
                                                            </label>
                                                            <input type="number" class="form-control form-control-sm" name="klm"
                                                                id="field_numeroContrat" [(ngModel)]="quotation.kilometer" />
                                                        </div>
                
                                                </div>
                                                 <div class="row">
                
                                                        <div class="col-sm-3">
                                                            <label for="field_en_heure_mo">En heure MO
                                                            </label>
                                                            <input type="number" class="form-control form-control-sm" name="EnHeureMO"
                                                                id="field_EnHeureMO" [(ngModel)]="quotation.heureMO" />
                                                        </div>
                
                                                        <div class="col-sm-3">
                                                            <label for="field_totalMo">Total MO en TND
                                                            </label>
                                                            <input type="number" class="form-control form-control-sm" name="totalMo"
                                                                id="field_totalMo" [(ngModel)]="quotation.totalMo" />
                                                        </div>
                                                 </div>
                                                </br>
                                            </br>
                                                 <div class="row">
                                                        
                                                        <div class="form-group col-sm-10" style="float: left;">
                                                            <fieldset>
                                                                Etat véhicule :<span style="color: #FA2F03">*</span> &nbsp; &nbsp;
                                                                <input type="radio" name="conditionVehicle" value="Bon"
                                                                    [(ngModel)]="quotation.conditionVehicle">Bon &nbsp;&nbsp;
                                                                <input type="radio" name="conditionVehicle" value="Moyen"
                                                                    [(ngModel)]="quotation.conditionVehicle">Moyen &nbsp;&nbsp;
                
                                                                <input type="radio" name="conditionVehicle" value="Mauvais"
                                                                    [(ngModel)]="quotation.conditionVehicle">Mauvais
                                                            </fieldset>
                                                        </div>
                
                                                        <div class="form-group col-sm-10" style="float: left;">
                
                                                            <fieldset>
                                                                Véhicule réparable
                                                                <span style="color: #FA2F03">*</span> &nbsp;&nbsp;
                                                                <input readonly type="radio" name="isVehiculeReparable"
                                                                    [(ngModel)]="quotation.repairableVehicle" [value]="true" />Oui
                                                                &nbsp;&nbsp;
                                                                <input readonly type="radio" name="isVehiculeReparable"
                                                                    [(ngModel)]="quotation.repairableVehicle" [value]="false" />Non
                                                            </fieldset>
                                                        </div>
                
                                                        <div class="form-group col-sm-10" style="float: left;">
                                                            <fieldset>
                                                                Constat préliminaire <span style="color: #FA2F03">*</span>
                                                                &nbsp;&nbsp;
                                                                <input readonly type="radio" name="isConstatPre"
                                                                    [(ngModel)]="quotation.preliminaryReport" [value]="true" />Oui
                                                                &nbsp;&nbsp;
                                                                <input readonly type="radio" name="isConstatPre"
                                                                    [(ngModel)]="quotation.preliminaryReport" [value]="false" />Non
                
                                                            </fieldset>
                                                        </div>
                
                                                        <div class="form-group col-sm-10" style="float: left;">
                                                            <fieldset>
                                                                Véhicule immobilisé:
                                                                &nbsp;&nbsp;
                                                                <input readonly type="radio" name="immobilizedVehicle"
                                                                    [(ngModel)]="quotation.immobilizedVehicle" [value]="true" />Oui
                                                                &nbsp;&nbsp;
                                                                <input readonly type="radio" name="immobilizedVehicle"
                                                                    [(ngModel)]="quotation.immobilizedVehicle" [value]="false" />Non
                                                            </fieldset>
                                                        </div>
                
                
                                                        <div class="form-group col-sm-10" style="float: left;">
                                                            <fieldset>
                                                                La concordance des circonstances de l'accidents avec les dégâts déclarés
                
                                                                <span style="color: #FA2F03">*</span> &nbsp;&nbsp;
                                                                <input readonly id="field_modeleLibelle" type="radio"
                                                                    name="concordanceReport" [(ngModel)]="quotation.concordanceReport"
                                                                    [value]="true" />Oui
                                                                &nbsp;&nbsp;
                                                                <input readonly id="field_modeleLibelle" type="radio"
                                                                    name="concordanceReport" [(ngModel)]="quotation.concordanceReport"
                                                                    [value]="false" />Non
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                </br>
                                                <div class="row">
                                                    <div class="col-sm-2">
                                                        <br>
                                                        <span style="font-weight:bold;"><label for="field_decision_exp">Décision expert :</label></span>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <br>
                                                    <div class="col-sm-3" *ngIf="!devisComplementaire">
                                                        <br>
                                                        <label for="field_decis_exp">Décision</label>
                                                        <select class="form-control form-control-sm" id="field_decis_exp" name="decisExpert" [(ngModel)]="sinisterPec.expertDecision">
                                                        <option [ngValue]="expDecis.label" *ngFor="let expDecis of expertDecisions">{{expDecis.label}}</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-3" *ngIf="devisComplementaire">
                                                        <br>
                                                        <label for="field_decis_exp_quote">Décision</label>
                                                        <select class="form-control form-control-sm" id="field_decis_exp_quote" name="decisExpertQuote" [(ngModel)]="quotation.expertDecision">
                                                        <option [ngValue]="expDecis.label" *ngFor="let expDecis of expertDecisions">{{expDecis.label}}</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-3" *ngIf="showEtatQuotation">
                                                        <br>
                                                        <label for="field_etat_quote">Etat Devis</label>
                                                        <select class="form-control form-control-sm" id="field_etat_quote" name="etatQuotationPec" [(ngModel)]="etatQuotation">
                                                        <option [ngValue]="etatQuote.id" *ngFor="let etatQuote of etatsQuotation">{{etatQuote.label}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <br>
                                                
                                                <div class="modal-footer">
                                                        <button class="btn btn-sm btn-primary addnew" (click)="cancelQuotation()">
                                                                <span class="fa fa-pencil"></span>
                                                                <span >Annuler</span>
                                                            </button>
                                                    <button type="submit" class="btn btn-sm btn-primary" (click)="saveQuotation()">
                                                        <span class="fa fa-save"></span>&nbsp;
                                                        <span jhiTranslate="entity.action.save">Save</span>
                                                    </button>
                                                </div>
                                        </div>
                                        
                                        <div class="row" *ngIf="isApecEntry == true">

                                            <div class="col-sm-2">
                                                <br>
                                                <span style="font-weight:bold;"><label for="field_apec">APEC :</label></span>
                                            </div>
                                        </div>
                                        <div class="card-body" *ngIf="isApecEntry == true">
                                            <div class="row">

                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.participationGa">Participation GA</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_ga" id="field_ga"
                                                                    [(ngModel)]="apecTotale.participationGa"  />
                                                    </div>
                                                    <div class="col-sm-2"></div>
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.droitDeTimbre">Droit de timbre</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_Timbre" id="field_Timbre"
                                                                    [(ngModel)]="apecTotale.droitDeTimbre"  />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="row">
                                    
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.participationAssure">Participation assuré</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_assure" id="field_assure"
                                                                    [(ngModel)]="apecTotale.participationAssure"  />
                                                    </div>
                                                    <div class="col-sm-2"></div>
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.participationVetuste">Participation vétusté</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_vetuste" id="field_vetuste"
                                                                    [(ngModel)]="apecTotale.participationVetuste"  />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="row">
                                    
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.participationTva">Participation TVA</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_TVA" id="field_TVA"
                                                                    [(ngModel)]="apecTotale.participationTva"  />
                                                    </div>
                                                    <div class="col-sm-2"></div>
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.participationRpc">Participation responsabilité</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_responsability" id="field_responsability"
                                                                    [(ngModel)]="apecTotale.participationRpc"  />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="row">
                                    
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.fraisDossier">Frais de dossier</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_frais" id="field_frais"
                                                                    [(ngModel)]="apecTotale.fraisDossier"  />
                                                    </div>
                                                    <div class="col-sm-2"></div>
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.avanceFacture">Avance sur facture</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_avance" id="field_avance"
                                                                    [(ngModel)]="apecTotale.avanceFacture"  />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="row">
                                    
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.depacementPlafond">Déplacement plafond</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_plafond" id="field_plafond"
                                                                    [(ngModel)]="apecTotale.depacementPlafond"  />
                                                    </div>
                                                    <div class="col-sm-2"></div>
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.estimationFranchise">Franchise</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_franchise_apec" id="field_franchise_apec"
                                                                    [(ngModel)]="apecTotale.estimationFranchise"  />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="row">
                                    
                                                    <div class="col-sm-2">
                                                        <label jhiTranslate="auxiliumApp.apec.regleProportionnel">Règle Proportionelle</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="number" class="form-control form-control-sm" name="field_regle_proportionelle" id="field_regle_proportionelle"
                                                                    [(ngModel)]="apecTotale.regleProportionnel"  />
                                                    </div>
                                                    <div class="col-sm-2"></div>
                                                    <div class="col-sm-2">
                                                        <label >Etat Accord</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <select class="form-control form-control-sm" id="field_etat_apec_pec" name="etat_apec_pec" [(ngModel)]="apecTotale.etat">
                                                        <option [ngValue]="etatA.id" *ngFor="let etatA of etatsApec">{{etatA.label}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="modal-footer">
                                                        <button class="btn btn-sm btn-primary addnew" (click)="cancelApec()">
                                                                <span class="fa fa-pencil"></span>
                                                                <span >Annuler</span>
                                                         </button>
                                                    <button type="submit" class="btn btn-sm btn-primary" (click)="saveApec()">
                                                        <span class="fa fa-save"></span>&nbsp;
                                                        <span jhiTranslate="entity.action.save">Save</span>
                                                    </button>
                                                </div>
                                        </div>
                                        <div class="row" *ngIf="isQuoteEntry == true && listesApecs.length > 0">

                                            <div class="col-sm-2">
                                                <br>
                                                <span style="font-weight:bold;"><label for="field_accord">Listes des accords :</label></span>
                                                
                                            </div>
                                        </div>
                                        
                                        <div class="row" *ngIf="isQuoteEntry == true && listesApecs.length > 0">
                                            <div class="col-lg-12">
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table datatable [dtOptions]="dtOptions"  class="table table-sm table-hover table-bordered" style="width: 100%">
                                                    <thead style="color:white;background-color:#11859b">
                                                        <tr>
                                                            <th><span jhiTranslate="auxiliumApp.sinisterPec.typePiece">Type</span></th>
                                                            <th><span jhiTranslate="auxiliumApp.sinisterPec.etatPec">Etat</span></th>
                                                            <th><span jhiTranslate="auxiliumApp.sinisterPec.decisionCompany">decisionCompany</span></th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let apec of listesApecs ;">
                                                            <td>{{apec.typeApecString}}</td>
                                                            <td>{{apec.etatApecString}}</td>
                                                            <td>{{apec.decisionCompany}}</td>
                                                            <td class="text-right">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <button type="button" (click)="editApec(apec)" class="btn btn-sm btn-default"><i
                                                                        class="fa fa-pencil"></i>
                                                                    </button>
                                                                    <button type="button" (click)="deleteApec(apec.id)" class="btn btn-danger btn-sm">
                                                                            <span class="fa fa-sm fa-remove"></span>
                                                                    </button>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
            <div class="row">
                    <div class="col-lg-12">
                <div class="card-body">
                    <div class="table-responsive">
                        <table datatable [dtOptions]="dtOptions"  class="table table-sm table-hover table-bordered" style="width: 100%">
                            <thead style="color:white;background-color:#11859b">
                                <tr>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.typePiece">Type</span></th>
                                    <th><span jhiTranslate="auxiliumApp.sinisterPec.etatPec">Etat</span></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let quote of listesQuotations ;">
                                    <td>{{quote.typeString}}</td>
                                    <td>{{quote.etatString}}</td>
                                    <td class="text-right">
                                        <div class="btn-group flex-btn-group-container">
                                            <button type="button" (click)="editQuotation(quote.id)" class="btn btn-sm btn-default"><i
                                                class="fa fa-pencil"></i>
                                            </button>
                                            <button type="button" (click)="deleteQuotation(quote)" class="btn btn-danger btn-sm">
                                                    <span class="fa fa-sm fa-remove"></span>
                                            </button>
                                            <button type="submit" class="btn btn-info btn-sm  center-block"
                                            (click)="genererOrRegenererApec(quote.id) ">
                                            <span class="fa fa-print"></span>&nbsp;
                                            <span jhiTranslate="entity.action.generationApec">Generer/Regenere Apec</span>
                                           </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            </div>
              
        </div>
    </div>
</div>
</div>
<!-- Listes Quotations -->

<!--Listes Observation-->
<div class="row">
    <div class="col-lg-12">

        <div class="card">
            <div class=" collapsible-card card-header align-items-center collapsed notice notice-info"
                data-toggle="collapse" href="#collapseObservation">
                <strong>Observations </strong>
            </div>
        </div>
        <div id="collapseObservation" class="card-body collapse">
            <div class="row">
                <div class="col-sm-6">
                    <input type="text" class="form-control form-control-sm" name="observation"
                        id="observationId" [(ngModel)]="observation.commentaire" />
                    <div [hidden]="!isCommentError">
                        <small class="form-text text-danger" [hidden]="!isCommentError"
                            jhiTranslate="entity.validation.required">This
                            field is required.</small>
                    </div>
                </div>
                <div class="col-sm-2">
                    <button *ngIf="!isObsModeEdit" class="btn btn-sm btn-primary addnew"
                        (click)="addObservation();">
                        <span class="fa fa-plus"></span>
                        <span jhiTranslate="auxiliumApp.observation.home.createLabel">Create new
                            Observation
                        </span>
                    </button>
                    <button *ngIf="isObsModeEdit" class="btn btn-sm btn-primary addnew"
                        (click)="editObservation();">
                        <span class="fa fa-pencil"></span>
                        <span jhiTranslate="auxiliumApp.observation.home.editLabel">Edit
                            Observation
                        </span>
                    </button>
                   
                </div>
            </div>
            <div class="row" style="margin-top: 15px;">
                <div class="col-sm-12">
                    <div class="table-responsive"
                        *ngIf="observationss && observationss.length > 0">
                        <table class="table table-sm table-hover table-bordered" style="width: 100%">
                            <thead>
                                <tr jhiSort style="color: white; background-color: #167F92">
                                    <th jhiSortBy="date"><span
                                            jhiTranslate="auxiliumApp.observation.date">Date</span>
                                        <span class="fa fa-sort"></span></th>
                                    <th><span
                                            jhiTranslate="auxiliumApp.observation.commentaire">Commentaire</span>
                                        <span class="fa fa-sort"></span></th>
                                    <th jhiSortBy="userLogin"><span
                                            jhiTranslate="auxiliumApp.observation.user">Utilisateur</span>
                                        <span class="fa fa-sort"></span></th>
                                    <!--<th></th>-->
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let observation of observationss">
                                    <tr *ngIf="!observation.deleted">
                                        <td>{{observation.date  | date:'dd/MM/yy'}}</td>
                                        <td>{{observation.commentaire}}</td>
                                        <td>{{observation.firstName}}
                                            {{observation.lastName}}</td>
                                        <!--<td class="text-right">
                                            <div class="btn-group flex-btn-group-container">
                                                <button type="button"
                                                    (click)="prepareEditObservation(observation)"
                                                    class="btn btn-primary btn-sm">
                                                    <span class="fa fa-pencil"></span>
                                                </button>
                                                <button type="button"
                                                    (click)="deleteObservation(observation)"
                                                    class="btn btn-danger btn-sm">
                                                    <span class="fa fa-trash"></span>
                                                </button>
                                            </div>
                                        </td>-->
                                    </tr>
                                </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>
<!--Listes Observations-->

<!-- Motifs Reouverture -->
     <!-- <div class="row" *ngIf="isSave && motfReopened">
        <div class="col-lg-12">
        <div class="card">
  
            <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#Motifs">
                <strong > Motifs</strong>
            </div>
            <div id="Motifs" class="card-body collapse">
                <div class="row">
                    <div class="col-sm-5">
                        <div class="row">
                            <div class="col-lg-10">
                                <div class="form-group" >
                                    <label jhiTranslate="auxiliumApp.sinisterPec.MotifsDeReprise" for="field_reopenMotifs">Motif Reopen</label>
                                    <select class="form-control form-control-sm" id="field_reopenMotifs" name="reopenMotifs"
                                    [(ngModel)]="sinisterPec.motifsReopenedId" >
                                        <option [ngValue]="option.id" *ngFor="let option of motifsReopened">
                                                {{option.label}}
                                        </option>
                                    </select>
                                </div>

                            </div>
                        </div>
                    </div>
            </div>  
            </div>
        </div>
    </div>
</div>-->
<!-- Motifs Reouverture -->
<!-- Motifs RESERVE -->
<!--<div class="row" *ngIf="showMotifAction && sinisterPec.motifsDecisionId !== null && sinisterPec.decision !== 'ACCEPTED'">
    <div class="col-lg-12">
    <div class="card">

        <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#Motifs">
            <strong > Motifs </strong>
        </div>
        <div id="Motifs" class="card-body collapse">
            <div class="row">
                <div class="col-sm-2">
                    <br>
                    <span style="font-weight:bold;">
                    <label jhiTranslate="auxiliumApp.sinisterPec.listMotifs">Motifs</label></span>
                            
                    </div>
            <div class="col-sm-6">
                <br>
                <select  class="form-control form-control-sm" id="field_mlr" name="mlr"
                    [(ngModel)]="sinisterPec.motifsDecisionId" disabled>
                    <option [ngValue]="rsRf.id" *ngFor="let rsRf of raisonLevesReserves;">
                        {{rsRf.label}}
                    </option>
                </select>
            </div>
            
        </div>
               
        </div>
    </div>
</div>
</div>-->
<!-- Motifs RESERVE -->

      <!-- Motifs Annulation -->
      <!--<div class="row" *ngIf="confirmPrest">
        <div class="col-lg-12">
        <div class="card">
  
            <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#Motifs">
                <strong > Motifs</strong>
            </div>
            <div id="Motifs" class="card-body collapse">
                <div class="row">
                    <div class="col-sm-2">
                        <br>
                        <span style="font-weight:bold;">
                        <label jhiTranslate="auxiliumApp.sinisterPec.listMotifs">Motifs</label></span>
                                
                        </div>
                <div class="col-sm-3" *ngIf="isConfirmRefusPec || isRefusPec">
                    <br>
                    <select  class="form-control form-control-sm" id="field_rfs" name="rsRf"
                        [(ngModel)]="sinisterPec.reasonRefusedId">
                        <option [ngValue]="rsRf.id" *ngFor="let rsRf of reasonsRefused;">
                            {{rsRf.label}}
                        </option>
                    </select>
                </div>
                <div class="col-sm-3" *ngIf="isConfirmCancPec || isCancPec">
                    <br>
                    <select  class="form-control form-control-sm" id="field_rsCc" name="rsCc"
                        [(ngModel)]="sinisterPec.reasonCanceledId" >
                        <option [ngValue]="rsCanc.id" *ngFor="let rsCanc of reasonsCanceled;">
                            {{rsCanc.label}}
                        </option>
                    </select>
                </div>
                
            </div>
                   
            </div>
        </div>
    </div>
</div>-->
<!-- Motifs Annulation -->

            </form>
        </div>
    </section>