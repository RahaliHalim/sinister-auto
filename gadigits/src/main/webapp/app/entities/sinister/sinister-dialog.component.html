<!-- Breadcrumb-->
<div class="breadcrumb-holder">
    <div class="container-fluid">
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><span class="fa fa-home"></span>&nbsp;&nbsp;<span
                        jhiTranslate="global.menu.home">Home</span></a></li>
            <li class="breadcrumb-item"><a routerLink="/sinister"><span
                        jhiTranslate="auxiliumApp.dossier.home.title">Dossiers</span></a></li>
            <li class="breadcrumb-item"><span jhiTranslate="auxiliumApp.dossier.home.details">details dossier</span>
            </li>
        </ul>
    </div>
</div>
<section class="forms">
    <div class="container-fluid">
        <!-- Page Header-->
        <header style="padding-top: 1rem; padding-bottom: 1rem;">
            <h1 class="h3 display">
                <jhi-alert-error></jhi-alert-error>
                <jhi-alert></jhi-alert>
            </h1>
        </header>
        <form name="editForm" role="form" novalidate #editForm="ngForm">
            <div class="row">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="card">
                                <div class="card-header d-flex align-items-center no-padding">
                                    <div class="notice notice-info">
                                        <span class="fa fa-folder-open" style="color: #45ABCD"></span>&nbsp;&nbsp;
                                        <strong jhiTranslate="auxiliumApp.dossier.home.details">Détails dossier</strong>
                                        {{sinister.reference}}
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.dossier.immatriculation"
                                                    for="currentSearch">Immatriculation</label>
                                                <div class="input-group">
                                                    <input type="text" [(ngModel)]="sinister.vehicleRegistration"
                                                        class="form-control form-control-sm" name="currentSearch"
                                                        id="currentSearch" [readonly]="sinister.id"
                                                        (blur)="trimRegistrationNumber();"
                                                        (ngModelChange)="activeRecherche();" required />
                                                    <span class="input-group-btn">
                                                        <button class="input-group-addon btn btn-sm btn-info"
                                                            [hidden]="sinister.id" [disabled]="!searchActive"
                                                            (click)="selectTapedVehiculeImmatriculation(sinister.vehicleRegistration)">
                                                            <span class="fa fa-search"></span>
                                                        </button>
                                                        <button class="input-group-addon btn btn-sm btn-info"
                                                            [hidden]="sinister.id"
                                                            [routerLink]="['../contrat-assurance-new', sinister.vehicleRegistration]">
                                                            <span class="fa fa-plus"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4" *ngIf="showCompanyImmat == true">
                                            <label jhiTranslate="auxiliumApp.tiers.compagnie"
                                                for="companyImmatr">companyImmatr</label>
                                            <select required class="form-control form-control-sm" id="companyImmatr"
                                                name="companyImmatr" [(ngModel)]="compagnieName"
                                                (ngModelChange)="selectVehicule()">
                                                <option [ngValue]="partner.companyName"
                                                    *ngFor="let partner of compagniesListes;">
                                                    {{partner.companyName}}</option>
                                            </select>
                                        </div>
                                        <!--<div class="col-sm-4">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.dossier.immatriculation"
                                                    for="currentSearch">Immatriculation</label>
                                                <div class="input-group">
                                                    <input type="hidden" [(ngModel)]="sinister.vehicleRegistration"
                                                        class="form-control form-control-sm" name="currentSearch"
                                                        id="currentSearch" required />
                                                    <input list="immatriculationlistes" name="currentSearch"
                                                        [(ngModel)]="vehiculeContrat.immatriculationVehicule"
                                                        (change)="selectVehicule(vehiculeContrat)"
                                                        (ngModelChange)="selectTapedVehiculeImmatriculation(vehiculeContrat)"
                                                        [readonly]="sinister.id" class="input input-sm" required />
                                                    <datalist id="immatriculationlistes">
                                                        <select>
                                                            <option *ngFor="let vehic of vehiculesListes;">
                                                                {{vehic.immatriculationVehicule}}/{{vehic.compagnyName}}
                                                            </option>
                                                        </select>
                                                    </datalist>&nbsp;&nbsp;
                                                    <span class="input-group-btn">
                                                        <button class="input-group-addon btn btn-sm btn-info"
                                                            [hidden]="sinister.id" [disabled]="!searchActive"
                                                            (click)="findContract(sinister.vehicleRegistration)">
                                                            <span class="fa fa-search"></span>
                                                        </button>
                                                        <button class="input-group-addon btn btn-sm btn-info"
                                                            [hidden]="sinister.id" [disabled]="ajoutContrat == true"
                                                            [routerLink]="['../contrat-assurance-new', sinister.vehicleRegistration]">
                                                            <span class="fa fa-plus"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>-->
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.dossier.natureIncident"
                                                    for="field_natureIncident">Nature
                                                    Incident</label>
                                                <select class="form-control form-control-sm" name="natureIncident"
                                                    [(ngModel)]="sinister.nature" [disabled]="disabledNatureFieled"
                                                    required id="field_natureIncident">
                                                    <option value="PANNE"
                                                        jhiTranslate="auxiliumApp.NatureIncident.PANNE">PANNE</option>
                                                    <option value="ACCIDENT"
                                                        jhiTranslate="auxiliumApp.NatureIncident.ACCIDENT">ACCIDENT
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-4" *ngIf="sinister.nature == 'PANNE'">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.sinister.naturePanne"
                                                    for="field_naturePanne">naturePanne</label>
                                                    <select class="form-control form-control-sm" id="field_naturePanne"
                                                    name="naturePanne"
                                                    [(ngModel)]="sinister.naturePanneId"
                                                    [disabled]="disabledNatureFieled" required
                                                    >
                                                    <option [ngValue]="naturePanne.id"
                                                        *ngFor="let naturePanne of naturePannes">
                                                        {{naturePanne.label}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.dossier.dateAccident"
                                                for="field_dateAccident">Date Accident</label>
                                            <div class="input-group">
                                                <input id="field_dateAccident" type="text"
                                                    class="form-control form-control-sm" name="dateAccident"
                                                    ngbDatepicker #dateAccidentDp="ngbDatepicker"
                                                    [(ngModel)]="sinister.incidentDate"
                                                    (ngModelChange)="checkDateDeclaration();" [maxDate]="nowNgbDate"
                                                    required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-sm btn-default"
                                                        (click)="dateAccidentDp.toggle()"><i
                                                            class="fa fa-calendar"></i></button>
                                                </span>
                                            </div>
                                            <div
                                                [hidden]="!(editForm.controls.dateAccident?.dirty && editForm.controls.dateAccident?.invalid)">
                                                <small class="form-text text-danger"
                                                    [hidden]="!editForm.controls.dateAccident?.errors?.required"
                                                    jhiTranslate="entity.validation.required">This field is
                                                    required.</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.dossier.nbrPassagers"
                                                    for="field_nbrPassagers">Nbr Passagers</label>
                                                <input type="number" class="form-control form-control-sm"
                                                    name="nbrPassagers" id="field_nbrPassagers"
                                                    [(ngModel)]="sinister.passengerCount" [pattern]="nbrVehPattern"
                                                    min="0" max="99999999" [required]="requiredField" />
                                                <div
                                                    [hidden]="!(editForm.controls.nbrPassagers?.dirty && editForm.controls.nbrPassagers?.invalid)">
                                                    <small class="form-text text-danger"
                                                        [hidden]="!editForm.controls.nbrPassagers?.errors?.max"
                                                        jhiTranslate="entity.validation.max"
                                                        translateValues="{ max: 99999999 }">This
                                                        field cannot be more
                                                        than 99999999.</small>
                                                    <small class="form-text text-danger"
                                                        [hidden]="!editForm.controls.nbrPassagers?.errors?.number"
                                                        jhiTranslate="entity.validation.number">This field should be a
                                                        number.</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.dossier.telephone"
                                                    for="field_telephone">Telephone</label>
                                                <input type="number" class="form-control form-control-sm"
                                                    name="telephone" id="field_telephone" [(ngModel)]="sinister.phone"
                                                    [required]="requiredField" />
                                                <div
                                                    [hidden]="!(editForm.controls.telephone?.dirty && editForm.controls.telephone?.invalid)">
                                                    <small class="form-text text-danger"
                                                        [hidden]="!editForm.controls.telephone?.errors?.pattern"
                                                        jhiTranslate="entity.validation.pattern"
                                                        translateValues="{ pattern: 'Telephone' }">This
                                                        field should
                                                        follow pattern for "Telephone".</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4" *ngIf="!showCorrectDateDeclaration">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.dossier.dateCreation"
                                                for="field_dateCreation">Date Creation</label>
                                            <div class="input-group">
                                                <input id="field_dateCreation" class="form-control form-control-sm"
                                                    name="dateCreation" value="{{myDate}}" readonly />

                                            </div>
                                        </div>
                                        <div class="col-sm-4" *ngIf="showCorrectDateDeclaration">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.dossier.dateCreation"
                                                for="field_dateCreation">Date Creation</label>
                                            <div class="input-group">
                                                <input id="field_dateCreation" class="form-control form-control-sm"
                                                    name="dateCreation"
                                                    value="{{sinister.creationDate | date:'dd/MM/yyyy HH:mm:ss'}}"
                                                    readonly />

                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">

                                        <div class="col-sm-3">
                                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinister.assure"
                                                for="field_isAssure">isAssure</label>
                                            <input type="checkbox" class="check-input" name="field_isAssure"
                                                id="field_isAssure" [value]="sinister.isAssure"
                                                [(ngModel)]="sinister.isAssure" />
                                        </div>
                                        <div class="col-sm-4" *ngIf="sinister.isAssure">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.assure"
                                                for="field_prenomAssure">
                                                nom/prenom assuré </label>
                                            <input type="text" class="form-control form-control-sm" name="nomAssure"
                                                id="field_prenomAssure" [(ngModel)]="assure" readonly />
                                        </div>
                                        <div class="col-sm-3" *ngIf="!sinister.isAssure">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.dossier.prenomConducteur"
                                                    for="field_prenomConducteur">Prenom Conducteur</label>
                                                <input type="text" class="form-control form-control-sm"
                                                    name="prenomConducteur" id="field_prenomConducteur"
                                                    [(ngModel)]="sinister.conductorFirstName" maxlength="100"
                                                    required />
                                            </div>
                                        </div>
                                        <div class="col-sm-3" *ngIf="!sinister.isAssure">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.dossier.nomConducteur"
                                                    for="field_nomConducteur">Nom Conducteur</label>
                                                <input type="text" class="form-control form-control-sm"
                                                    name="nomConducteur" id="field_nomConducteur"
                                                    [(ngModel)]="sinister.conductorLastName" maxlength="100" required />
                                            </div>
                                        </div>
                                        <div class="col-sm-3" *ngIf="sinisterPrestation.serviceTypeId == 11 ">
                                            <label jhiTranslate="auxiliumApp.sinisterPec.driverLicenseNumber"
                                                for="currentSearch1">driver
                                                License Number</label>
                                            <input type="text" [(ngModel)]="sinisterPec.driverLicenseNumber"
                                                class="form-control form-control-sm" name="currentSearch1"
                                                id="currentSearch1" />
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label
                                                    jhiTranslate="auxiliumApp.refTypeService.detail.title">Servicetype</label>
                                                <select class="form-control form-control-sm" id="field_serviceType"
                                                    name="serviceType"
                                                    [disabled]="!sinisterSettings.activateServiceType"
                                                    [(ngModel)]="sinisterPrestation.serviceTypeId"
                                                    (ngModelChange)="selectServiceType()">
                                                    <option [ngValue]="serviceType.id"
                                                        *ngFor="let serviceType of serviceTypes">
                                                        {{serviceType.nom}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <label style="width: 100%">&nbsp;</label>
                                            <button type="button"
                                                [disabled]="!sinisterSettings.activateAddService || sinisterPrestation.serviceTypeId == null || showAlertBloqueAgent ||showAlertNoCreateAccess"
                                                class="btn btn-sm btn-primary float-right" (click)="addPrestation()">
                                                <span class="fa fa-plus"></span>&nbsp;
                                                <span jhiTranslate="entity.action.add">Add</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-10">
                                                <!--<div class="alert alert-danger" *ngIf="showNocontainsService"
                                                jhiTranslate="auxiliumApp.sinisterPrestationVr.notContainsService">
                                                <strong>Vous n'avez pas ce service dans votre pack</strong>
                                            </div>-->
                                            <div class="alert alert-danger" *ngIf="showIntervNumberAlert"
                                                jhiTranslate="auxiliumApp.sinisterPec.authorizedNbrInterv">
                                                <strong>Nombre D'intervention de votre Pack égale à 0</strong>
                                            </div>
                                            <div class="alert alert-danger" *ngIf="showServiceTypeInactiveAlert"
                                                jhiTranslate="auxiliumApp.sinisterPrestation.inactiveServiceType">
                                                <strong>inactive service type</strong>
                                            </div>
                                            <div class="alert alert-danger" *ngIf="showAlertNoCreateAccess"
                                                jhiTranslate="auxiliumApp.sinisterPrestation.cantCreateService">
                                                <strong>inactive service type</strong>
                                            </div>
                                            <div class="alert alert-danger" *ngIf="showAlertBloqueAgent"
                                                jhiTranslate="auxiliumApp.sinisterPec.bloqueAgentAddPec">
                                                <strong>inactive service type</strong>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="card">
                                <div class="card-header d-flex align-items-center no-padding">
                                    <div class="notice notice-info">
                                        <span class="fa fa-file-text-o" style="color: #45ABCD"></span>&nbsp;&nbsp;
                                        <strong jhiTranslate="auxiliumApp.contratAssurance.home.details">Détails
                                            contrat</strong>
                                        <button class="btn btn-sm btn-primary float-right"
                                            [disabled]="!contratAssurance"
                                            [routerLink]="['/contrat-assurance/'+vehiculeContrat.contratId+'/sinister/'+ sinister.vehicleRegistration]">
                                            <span class="fa fa-sm fa-plus"></span>
                                            <span class="hidden-sm-down"
                                                jhiTranslate="auxiliumApp.contratAssurance.home.edit">Edit
                                                Contrat</span>
                                        </button>





                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-danger" *ngIf="immatriculationForAnotherAgent"
                                        jhiTranslate="auxiliumApp.sinister.contratForAnotherAgent">
                                        <strong>Cette immatriculation est affectée à un autre agent</strong>
                                    </div>
                                    <div class="alert alert-danger" *ngIf="contratAssurance == null"
                                        jhiTranslate="auxiliumApp.dossier.contrat">
                                        <strong>Matricule inexistante</strong>
                                    </div>
                                    <div class="alert alert-danger" *ngIf="sowContratSuspendu"
                                        jhiTranslate="auxiliumApp.sinister.contratSuspendu">
                                        <strong>Contrat Suspendu</strong>
                                    </div>
                                    <!-- Begin sinister and contract -->
                                    <form name="editForm" role="form"
                                        *ngIf="contratAssurance !== null && !immatriculationForAnotherAgent && !sowContratSuspendu">
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.numeroContrat"
                                                        for="field_immatriculationVehicule">numero Contrat</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="numeroContrat" id="field_numeroContrat"
                                                        [(ngModel)]="contratAssurance.numeroContrat" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.compagnie"
                                                        for="field_company">company</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="company" id="field_company"
                                                        [(ngModel)]="contratAssurance.nomCompagnie" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.agence"
                                                        for="field_agency">agency</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="agency" id="field_agency"
                                                        [(ngModel)]="contratAssurance.agenceNom" readonly />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.assure"
                                                        for="field_assurePrenom">Assure</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="assurePrenom" id="field_assurePrenom"
                                                        [(ngModel)]="insured.fullName" maxlength="100" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.debutValidite"
                                                        for="field_debutValidite">debutValidite</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="debutValidite" id="field_debutValidite"
                                                        value="{{contratAssurance.debutValidite | date:'dd/MM/yyyy'}}"
                                                        readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.finValidite"
                                                        for="field_finValidite">finValidite</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="finValidite" id="field_finValidite"
                                                        value="{{contratAssurance.finValidite | date:'dd/MM/yyyy'}}"
                                                        readonly />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.marque"
                                                        for="field_marqueLibelle">Marque</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="marqueLibelle" id="field_marqueLibelle"
                                                        [(ngModel)]="vehiculeContrat.marqueLibelle" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.modele"
                                                        for="field_modelLibelle">Model</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="modelLibelle" id="field_modelLibelle"
                                                        [(ngModel)]="vehiculeContrat.modeleLibelle" readonly />
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.vehiculeAssure.datePCirculation"
                                                        for="field_datePCirculation">datePCirculation</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="datePCirculation" id="field_datePCirculation"
                                                        value="{{vehiculeContrat.datePCirculation | date:'dd/MM/yyyy'}}"
                                                        readonly />
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.ville"
                                                        for="field_ville">Ville</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="villeLibelle" id="field_ville"
                                                        [(ngModel)]="insured.delegationLabel" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4" *ngIf="insured.company">
                                                <div class="form-group">
                                                    <label class="form-control-label" for="field_isAssujettieTva"
                                                        style="width: 100%;">&nbsp;</label>
                                                    <input type="checkbox" class="check-input" name="isAssujettieTva"
                                                        id="field_isAssujettieTva" [(ngModel)]="insured.isAssujettieTva"
                                                        disabled readonly />
                                                    <label class="form-control-label"
                                                        jhiTranslate="auxiliumApp.personneMorale.isAssujettieTva"
                                                        for="field_isAssujettieTva">Is Assujettie Tva</label>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.contratAssurance.pack"
                                                        for="field_pack">Pack</label>
                                                    <input type="text" class="form-control form-control-sm" name="pack"
                                                        id="field_pack" [(ngModel)]="vehiculeContrat.packLabel"
                                                        readonly />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.refPack.interventionNumber"
                                                        for="field_nbIntervention">Nombre
                                                        d'intervention</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="nbIntervention" id="field_nbIntervention"
                                                        [(ngModel)]="pack.interventionNumber" readonly />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label
                                                        jhiTranslate="auxiliumApp.refPack.interventionNumberRemaining"
                                                        for="field_interventionNumberRemaining">Nombre d'intervention
                                                        restantes</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="interventionNumberRemaining"
                                                        id="field_interventionNumberRemaining"
                                                        [(ngModel)]="numberInterventionRemaining" readonly />
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <!-- End contract details -->
                                </div>
                            </div>
                        </div>
                        <!-- End sinister and contract details -->
                    </div>
                       

                    <div class="row">
                        <div class="col-sm-12">
                            
                           <!-- <vehicule-remplacement *ngIf="isVR" [observations]="observations" [sinister]="sinister"  [sinisterPrestation]="sinisterPrestation" [valid]="editForm.form.invalid" ></vehicule-remplacement>-->


                            <!-- debut formulaire   sinister pec  by Halim -->


                            <!-- Début pec -->

                            <div class="card" *ngIf="sinisterSettings.isPecEdit">
                                <span class="anchor" id="formUserEdit"></span>
                                <div class="card-header d-flex align-items-center no-padding">
                                    <div class="notice notice-info">
                                        <span class="fa fa-list" style="color: #45ABCD"></span>&nbsp;&nbsp;
                                        <strong jhiTranslate="auxiliumApp.sinisterPec.detail.title">Service</strong>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="row">

                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.sinisterPec.companyReference"
                                                    for="field_companyReference">companyReference</label>
                                                <input type="text" class="form-control form-control-sm"
                                                    name="companyReference" id="field_companyReference"
                                                    [(ngModel)]="sinisterPec.companyReference"
                                                    (ngModelChange)="testRefernceSinister()" required />
                                            </div>
                                        </div>

                                        <div class="col-sm-3">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.sinisterPec.declarationDate"
                                                for="field_dateDeclaration">Date Declaration</label>
                                            <div class="input-group">
                                                <input id="field_dateDeclaration" class="form-control form-control-sm"
                                                    name="dateDeclaration" [(ngModel)]="sinisterPec.declarationDate"
                                                    required disabled />

                                            </div>
                                        </div>


                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.sinisterPrestation.mode"
                                                    for="field_garanties">
                                                    mode gestion
                                                    (Ex garantie)</label>
                                                <select class="form-control form-control-sm" id="field_garanties"
                                                    name="garanties" [(ngModel)]="sinisterPec.modeId"
                                                    (ngModelChange)="changeMode(sinisterPec.modeId)" required>
                                                    <option [ngValue]="modeGestionByPack.id"
                                                        *ngFor="let modeGestionByPack of listModeByCnvByUser; trackBy: trackGrantiesId">
                                                        {{modeGestionByPack.libelle}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.sinisterPec.posGa" for="field_pos_ga">
                                                    pos ga</label>
                                                <select class="form-control form-control-sm" id="field_pos_ga"
                                                    name="pos_ga" [(ngModel)]="sinisterPec.posGaId" required>
                                                    <option [ngValue]="posGa.id"
                                                        *ngFor="let posGa of listPositionGa; trackBy: trackPositionGaId">
                                                        {{posGa.libelle}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label class="form-control-label"
                                                    jhiTranslate="auxiliumApp.sinisterPec.vehicleNumber"
                                                    for="field_vehicleNumber">vehicleNumber</label>
                                                <input type="number" class="form-control form-control-sm"
                                                    name="vehicleNumber" id="field_vehicleNumber"
                                                    [readonly]="vehNmbrIda" min="{{minVinNumber}}"
                                                    [pattern]="nbrVehiclePattern"
                                                    [(ngModel)]="sinisterPec.vehicleNumber" required
                                                    (ngModelChange)="verifTiers()" />
                                            </div>
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div class="col-sm-3" *ngIf="garantieDommageVehicule || garantieTierce">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.valeurNeuf"
                                                for="field_valeurNeuf">
                                                Valeur Neuf </label>
                                            <input type="number" class="form-control form-control-sm" name="valeurNeuf"
                                                id="field_valeurNeuf" [(ngModel)]="vehiculeContrat.newValueVehicle"
                                                min="0" max="100000000000000000" required />
                                        </div>

                                        <div class="col-sm-3"
                                            *ngIf="garantieDommageCollision|| garantieTierceCollision">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.capitalDc"
                                                for="field_capitalDc">Capital Dc</label>
                                            <input type="number" class="form-control form-control-sm" name="capitalDc"
                                                id="field_capitalDc" [(ngModel)]="vehiculeContrat.dcCapital"
                                                (ngModelChange)="diffCapDcCapR()" min="0" max="100000000000000000"
                                                required />
                                        </div>

                                        <div class="col-sm-3" *ngIf="garantieVolIncendiePartiel">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.valeurVenale"
                                                for="field_valeurVenale"> Valeur Venale </label>
                                            <input type="number" class="form-control form-control-sm"
                                                name="valeurVenale" id="field_valeurVenale"
                                                [(ngModel)]="vehiculeContrat.marketValue" min="0"
                                                max="100000000000000000" required />
                                        </div>
                                        <div class="col-sm-3" *ngIf="garantieBrisGlace">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.capitalBG"
                                                for="field_bgCapital"> capital BG </label>
                                            <input type="number" class="form-control form-control-sm" name="bgCapital"
                                                id="field_bgCapital" [(ngModel)]="vehiculeContrat.bgCapital" min="0"
                                                max="100000000000000000" required />
                                        </div>

                                        <div class="col-sm-3"
                                            *ngIf="garantieDommageCollision || garantieBrisGlace|| garantieTierceCollision">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.sinisterPec.capitalRestant"
                                                for="field_capitalRestant"> capital restant </label>
                                            <input type="number" class="form-control form-control-sm"
                                                name="capitalRestant" id="field_capitalRestant"
                                                [(ngModel)]="sinisterPec.remainingCapital"
                                                (ngModelChange)="diffCapDcCapR()" min="0" max="100000000000000000"
                                                required />
                                        </div>

                                        <div class="col-sm-3"
                                            *ngIf="garantieDommageCollision && contratAssurance.clientId == 3">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.sinisterPec.valeurAss" for="field_valeurAss">
                                                valeur Assure </label>
                                            <input type="number" class="form-control form-control-sm" name="valeurAss"
                                                id="field_valeurAss" [(ngModel)]="sinisterPec.valeurAssure" min="0"
                                                max="100000000000000000" required />

                                        </div>

                                        <div class="col-sm-2" *ngIf="garantieDommageVehicule || garantieTierce">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.franchise"
                                                for="field_newValueVehicleFarnchise">Franchise</label>
                                            <input type="number" class="form-control form-control-sm"
                                                name="newValueVehicleFarnchise" id="field_newValueVehicleFarnchise"
                                                [(ngModel)]="vehiculeContrat.newValueVehicleFarnchise"
                                                [pattern]="amountPattern" required />
                                        </div>
                                        <div class="col-sm-2" *ngIf="garantieDommageVehicule || garantieTierce">
                                            <label for="field_typenewvalue"> Type Franchise </label>
                                            <select class="form-control form-control-sm" id="field_typenewvalue"
                                                name="typenewvalue" [(ngModel)]="vehiculeContrat.franchiseTypeNewValue"
                                                required>
                                                <option value="Montant">Montant</option>
                                                <option value="Pourcentage">Pourcentage</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-2"
                                            *ngIf="garantieDommageCollision || garantieTierceCollision">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.franchise"
                                                for="field_dcCapitalFranchise">Franchise</label>
                                            <input type="number" class="form-control form-control-sm"
                                                name="dcCapitalFranchise" id="field_dcCapitalFranchise"
                                                [(ngModel)]="vehiculeContrat.dcCapitalFranchise"
                                                [pattern]="amountPattern" required />
                                        </div>
                                        <div class="col-sm-2"
                                            *ngIf="garantieDommageCollision || garantieTierceCollision">
                                            <label for="field_typedccapital"> Type Franchise </label>
                                            <select class="form-control form-control-sm" id="field_typedccapital"
                                                name="typedccapital"
                                                [(ngModel)]="vehiculeContrat.franchiseTypeDcCapital" required>
                                                <option value="Montant">Montant</option>
                                                <option value="Pourcentage">Pourcentage</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-2" *ngIf="garantieVolIncendiePartiel">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.franchise"
                                                for="field_marketValueFranchise">Franchise</label>
                                            <input type="number" class="form-control form-control-sm"
                                                name="marketValueFranchise" id="field_marketValueFranchise"
                                                [(ngModel)]="vehiculeContrat.marketValueFranchise"
                                                [pattern]="amountPattern" required />
                                        </div>
                                        <div class="col-sm-2" *ngIf="garantieVolIncendiePartiel">
                                            <label for="field_typemarketvalue"> Type Franchise </label>
                                            <select class="form-control form-control-sm" id="field_typemarketvalue"
                                                name="typemarketvalue"
                                                [(ngModel)]="vehiculeContrat.franchiseTypeMarketValue" required>
                                                <option value="Montant">Montant</option>
                                                <option value="Pourcentage">Pourcentage</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-2" *ngIf="garantieBrisGlace">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.contratAssurance.franchise"
                                                for="field_bgCapital_franchise">Franchise</label>
                                            <input type="number" class="form-control form-control-sm"
                                                name="bgCapitalFranchise" id="field_bgCapital_franchise"
                                                [(ngModel)]="vehiculeContrat.bgCapitalFranchise"
                                                [pattern]="amountPattern" required />
                                        </div>
                                        <div class="col-sm-2" *ngIf="garantieBrisGlace">
                                            <label for="field_typebgcapital"> Type Franchise </label>
                                            <select class="form-control form-control-sm" id="field_typebgcapital"
                                                name="typebgcapital"
                                                [(ngModel)]="vehiculeContrat.franchiseTypeBgCapital" required>
                                                <option value="Montant">Montant</option>
                                                <option value="Pourcentage">Pourcentage</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-2">
                                            <label class="form-control-label"
                                                jhiTranslate="auxiliumApp.sinisterPec.assujettie"></label>
                                            <span style="color: #FA2F03">*</span>
                                            <br />
                                            <label class="btn btn-sm btn-primary" for="assujettie1"
                                               >
                                                <input type="radio" name="assujettie" id="assujettie1" required disabled
                                                    autocomplete="off" [value]="true"
                                                    [(ngModel)]="vehiculeContrat.assujettieTVA"> Oui
                                            </label> &nbsp;
                                            <label class="btn btn-sm btn-primary" for="assujettie2"
                                               >
                                                <input type="radio" name="assujettie" id="assujettie2" required disabled
                                                    autocomplete="off" [value]="false"
                                                    [(ngModel)]="vehiculeContrat.assujettieTVA">
                                                Non
                                            </label>
                                        </div>
                                    </div>

                                    <br>
                                    <div class="row">
                                        <div class="col-sm-2">
                                            <br>
                                            <span style="font-weight:bold;"><label
                                                    jhiTranslate="auxiliumApp.sinisterPec.home.LieuDuSinister">Lieu
                                                    du
                                                    Sinister</label></span>
                                        </div>

                                        <div class="col-sm-2">
                                            <label jhiTranslate="auxiliumApp.reparateur.gouvernorat">gouvernorat</label>
                                            <select required class="form-control form-control-sm" id="field_lieu"
                                                name="lieu" [(ngModel)]="sinisterPec.governorateId"
                                                (ngModelChange)="fetchDelegationsByGovernoratePec(sinisterPec.governorateId)">
                                                <option [ngValue]="governorate.id"
                                                    *ngFor="let governorate of governorates; trackBy: trackGouvernoratById">
                                                    {{governorate.label}}
                                                </option>
                                            </select>
                                        </div>

                                        <div class="col-sm-2">
                                            <label jhiTranslate="auxiliumApp.sinisterPec.ville"
                                                for="field_ville">Ville</label>
                                            <select required class="form-control form-control-sm" id="field_ville"
                                                name="ville" [(ngModel)]="sinisterPec.delegationId" [disabled]="gov ">
                                                <option [ngValue]="sysville.id"
                                                    *ngFor="let sysville of sysvilles; trackBy: trackSysVilleById">
                                                    {{sysville.label}}</option>
                                            </select>
                                        </div>
                                    </div>

                                    </br>

                                    <div class="row">
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.sinisterPrestation.casDeBareme"
                                                    for="field_bareme">cas
                                                    De
                                                    Bareme</label>
                                                <span style="color: #FA2F03">*</span>
                                                <div [hidden]="!(editForm.bareme?.dirty && editForm.bareme?.invalid)">
                                                    <small class="form-text text-danger"
                                                        [hidden]="!editForm.bareme?.errors?.required"
                                                        jhiTranslate="entity.validation.required">This field is
                                                        required.</small>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-sm-1">
                                            <div class="form-group">
                                                <button class="input-group-addon btn btn-sm btn-info"
                                                    [routerLink]="['/', { outlets: { popup: ['ref-bareme-pop'] } }]">
                                                    <span class="fa fa-search"></span>
                                                    <span class="hidden-sm-down"
                                                        jhiTranslate="auxiliumApp.refBareme.home.loop">loop
                                                        refBareme</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" *ngIf="refBarShow">
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.refBareme.code"
                                                    for="field_codeBareme">code
                                                    bareme</label>
                                                <input type="text" class="form-control form-control-sm"
                                                    name="codeBareme" id="field_codeBareme" [(ngModel)]="CasBareme.code"
                                                    readonly />
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.refBareme.tauxR"
                                                    for="field_tauxDeResponsabilite">tauxDeResponsabilité
                                                    bareme</label>
                                                <input type="text" class="form-control form-control-sm"
                                                    name="tauxDeResponsabilite" id="field_tauxDeResponsabilite"
                                                    [(ngModel)]="CasBareme.responsabiliteX" readonly />
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label jhiTranslate="auxiliumApp.refBareme.description"
                                                    for="field_descriptionBareme">desciption
                                                    bareme</label>
                                                <textarea type="text" class="form-control form-control-sm"
                                                    name="descriptionBareme" id="field_descriptionBareme"
                                                    [(ngModel)]="CasBareme.description" readonly rows="5" cols="33">
                        </div>
                    </div>
                    <div> 
                        <img *ngIf="CasBareme.attachment64" [src]="getImage(CasBareme)" height="100" width="350">
                    </div>
                </div>
            </div>
        </div>
     <!-- end pec -->


             <!-- Tier list -->
             <div  *ngIf="sinisterSettings.isPecEdit">
 <div class="row">
        <div class="col-lg-12">
        <div class="card">
            <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#collapseTier">
                <strong jhiTranslate="auxiliumApp.tiers.home.title">Tiers</strong>
            </div>
            <div id="collapseTier" class="card-body collapse">
        <div>         
           <form name="editFormgrantieImplique" role="form" novalidate  #editFormgrantieImplique="ngForm">
                <div class="row">
                    <div class="col-sm-12">
                            <div class="row" *ngIf="!showFrmTiers">
                                    <div class="col-sm-12">
                                            <div class="row">
                                                    <div class="col-sm-11" ></div>
                                                    <div class="col-sm-1" >
    
                                                            <button  
                                                            
                                                            class="btn btn-sm btn-primary addnew" (click)="addForm();" [disabled]="consultation">
                                                            <span class="fa fa-plus"></span>
                                                            <span  jhiTranslate="auxiliumApp.observation.home.createLabel">Create new tier</span>
                                                        </button>
                                                        
                                                    </div>
                                            </div>

                                            <div class="row">
                                                    <div class="col-sm-10" >
                                                <div class="alert alert-danger" *ngIf="showAlertTiers" jhiTranslate="auxiliumApp.sinisterPec.verifTiers">
                                                    <strong>Merci de vérifier le nombre de vehicule</strong>
                                                </div>
                                                 </div>
                                            </div>
    
                                    </div>
                                </div>
                        <div class="row" *ngIf="newFormTiers == true && showFrmTiers">

              <!--Immatriculation-->
              <div class="col-sm-2">
                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.immatriculation" for="field_immatriculation">Immatriculation</label>
                <input type="text" [(ngModel)]="tier.immatriculation"
                        class="form-control form-control-sm" name="immatriculation" id="field_immatriculation" (blur)="trimRegistrationNumberTiers();"required/>
        </div>    
                <div class="col-sm-2">
                    <div class="form-group">
                        <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.compagnie" for="field_compagnieAssuranceImmatriculation">Compagnie Assurance immatriculation</label>
                        <div class="input-group">
                            <select class="form-control form-control-sm" id="field_compagnieAssuranceImmatriculation" name="compagnieAssuranceImmat" [(ngModel)]="companyId">
                            <option [ngValue]="compagnieOption.id" *ngFor="let compagnieOption of compagnies">
                            {{compagnieOption.companyName}} </option>
                        </select>
                            <span class="input-group-btn">
                                <button class="input-group-addon btn btn-sm btn-info"
                                    (click)="searchTiers(tier.immatriculation, companyId)">
                                    <span class="fa fa-search"></span>
                                </button>
                            </span>
                        </div>
                    </div>
                </div> 

                 <div class="col-sm-2">
                        <div class="form-group">
                            <label jhiTranslate="auxiliumApp.tiers.numeroContrat" for="field_tiersNumeroContratTier">numero Contrat Tiers</label>
                            <input type="text" class="form-control form-control-sm" name="numeroContratTier" id="field_tiersNumeroContratTier" [(ngModel)]="tier.numeroContrat" [readonly]="old"/>
                        </div>
                    </div> 

                    <div class="col-sm-2" >
                            <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.compagnieAssurance" for="field_compagnieAssuranceTier">Compagnie Assurance New Tier</label>
                            <select class="form-control form-control-sm" id="field_compagnieAssuranceTier" name="compagnieAssuranceTier" [(ngModel)]="tier.compagnieId"
                            (ngModelChange)="listAgenceByCompagnie(tier.compagnieId)"required [disabled]="agentCompanyRO "  >
                                <option [ngValue]="compagnieOption.id" *ngFor="let compagnieOption of compagnies">
                                {{compagnieOption.companyName}} </option>
                            </select>
                        </div>
                        <div class="col-sm-2" *ngIf="this.otherField == false">
                                <label jhiTranslate="auxiliumApp.contratAssurance.agence" for="field_agenceNewTier"> Agence New Tier
                                </label> <select class="form-control form-control-sm" id="field_agenceNewTier" name="agenceNewTier" [(ngModel)]="tier.agenceId" [disabled]="agentCompanyRO">
                                    <option [ngValue]="refAgenceOption.id" *ngFor="let refAgenceOption of refagences" >
                                        {{refAgenceOption.code}}_{{refAgenceOption.name}}</option>
                                </select>
                            </div>
                        <div class="col-sm-2"   *ngIf="this.otherField == true">
                                    <label jhiTranslate="auxiliumApp.contratAssurance.agence" for="field_agenceNew"> Agence New Tier
                                    </label> 
                                    <select class="form-control form-control-sm" id="field_agenceNew"  name="agenceNew"  [(ngModel)]="tier.optionalAgencyName" (ngModelChange)="newfield(tier.optionalAgencyName)" >
                                            <option value="Autre">Autre</option>
                                    </select>
                        </div>
                        <div class="col-sm-2"*ngIf="nameAgence">
                                <label class="form-control-label"
                                jhiTranslate="auxiliumApp.tiers.agence"
                                    for="field_prenom">prenom</label>
                                <input type="text" class="form-control form-control-sm" name="agencyName"
                                    id="field_agencyName" [(ngModel)]="tier.agenceTier"
                                    pattern="[A-Za-z0-9 ]{1,50}"  maxlength="100" [readonly]="old" required />
                                <small class="form-text text-danger"
                                    [hidden]="!editFormgrantieImplique.controls.agencyName?.errors?.pattern"
                                    jhiTranslate="entity.validation.pattern"
                                    translateValues="{ pattern: 'agencyName' }">
                                    This field should follow pattern for "Mail".
                                </small>
                                <div
                                    [hidden]="!(editFormgrantieImplique.controls.agencyName?.dirty && editFormgrantieImplique.controls.agencyName?.invalid)">
                                    <small class="form-text text-danger"
                                        [hidden]="!editFormgrantieImplique.controls.agencyName?.errors?.required"
                                        jhiTranslate="entity.validation.required">
                                        This field is required.
                                    </small>
                                </div>
                            </div>

                            <div class="col-sm-2">
                                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.fullName" for="field_raisonSocial">Raison Social</label>
                                <input type="text" class="form-control form-control-sm" name="raisonSocialTier" id="field_raisonSocial" [(ngModel)]="tier.fullName" [readonly]="old" maxlength="100"  [disabled]="consultation || agentCompanyRO" required />
                            </div>
                    

                            
                                <div class="col-sm-1">
                                    </div>
                                    <div class="col-sm-1">

                                            <button *ngIf="newFormTiers == false"
                                            
                                            class="btn btn-sm btn-primary addnew" (click)="addForm();" [disabled]="consultation">
                                                <span class="fa fa-plus"></span>
                                                <span  jhiTranslate="auxiliumApp.observation.home.createLabel">Create new tier</span>
                                            </button>
                                        
                                    </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                                <div class="row" *ngIf="newFormTiers == true && showFrmTiers">
                                
                        
        

                                <div class="col-sm-2" >
                                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.debutValidite" for="field_debutValidite">Debut Validite</label>
                                <div class="input-group">
                                    <input id="field_debutValidite" type="text" class="form-control form-control-sm" [disabled]="agentCompanyRO " name="debutValidite" ngbDatepicker  #debutValiditeDp="ngbDatepicker" 
                                    [(ngModel)]="tier.debutValidite" [maxDate]="tier.finValidite" [readonly]="old" required/>
                                    <span class="input-group-btn">
                                <button type="button" class="btn btn-sm btn-default" (click)="debutValiditeDp.toggle()" [disabled]="agentCompanyRO " ><i class="fa fa-calendar"></i></button>
                            </span>
                                </div>
                            </div>



                            <div class="col-sm-2" >
                                <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.finValidite" for="field_finValidite">Fin Validite</label>
                                <div class="input-group">
                                    <input id="field_finValidite" type="text" class="form-control form-control-sm" [disabled]="agentCompanyRO " name="finValidite" ngbDatepicker  #finValiditeDp="ngbDatepicker" 
                                    [(ngModel)]="tier.finValidite" [minDate]="tier.debutValidite"[readonly]="old"  required/>
                                    <span class="input-group-btn">
                                    <button type="button" class="btn btn-sm btn-default" [disabled]="agentCompanyRO " (click)="finValiditeDp.toggle()"><i class="fa fa-calendar"></i></button>
                                    </span>
                                    <br>
                                    <small class="form-text text-danger" *ngIf="isvalideDate == true"> Date expiré. </small>
                                </div>
                            </div>

                            <div class="col-sm-2" *ngIf="showResponsible">
                                <br>
                                    <input type="checkbox" class="check-input" name="responsable" id="field_responsable" [(ngModel)]="tier.responsible" />
                                    <label class="form-control-label" jhiTranslate="auxiliumApp.tiers.afficherTiers" for="field_responsable">responsable</label>
                                </div>



                        </div>
                    </div>
                    <div class="col-sm-2" *ngIf="newFormTiers == true && showFrmTiers">
                        <label class="form-control-label" style="width: 100%">&nbsp;</label>
                        <button *ngIf="!isTierModeEdit" 
                        [disabled]="editFormgrantieImplique.form.invalid "
                        class="btn btn-sm btn-primary addnew" (click)="addTier();" >
                            <span class="fa fa-plus"></span>
                            <span  jhiTranslate="auxiliumApp.tiers.creerTiers">Create new tier</span>
                        </button>
                        <button *ngIf="isTierModeEdit" 
                        [disabled]="editFormgrantieImplique.form.invalid "
                        class="btn btn-sm btn-primary addnew" (click)="editTier();">
                            <span class="fa fa-pencil"></span>
                            <span  jhiTranslate="auxiliumApp.observation.home.editLabel">Edit tier</span>
                        </button>
                    </div>
                </div>

                <br>
                            <div class="row">
                                <div class="col-sm-6" >
                            <div class="alert alert-danger" *ngIf="!tierResponsableVerif" jhiTranslate="auxiliumApp.sinisterPec.verifTiersResponsable">
                                <strong>Merci de vérifier le nombre de vehicule</strong>
                            </div>
                             </div>
                        </div>
            </form>
        </div>

                <div class="row" style="margin-top: 15px;">
                    <div class="col-sm-12">
                        <div class="table-responsive" *ngIf="tiers && tiers.length > 0">
                            <table datatable [dtOptions]="dtOptions" 
                            class="table table-sm table-hover table-bordered" style="width: 100%;" >
                                <thead>
                                <tr jhiSort  style="color: white; background-color: #167F92">
                                    <th><span jhiTranslate="auxiliumApp.tiers.fullName">fullName</span></th>
                                    <th><span jhiTranslate="auxiliumApp.contratAssurance.numeroContrat">numeroContrat</span></th>
                                    <th><span jhiTranslate="auxiliumApp.tiers.debutValidite">Debut Validite</span></th>
                                    <th><span jhiTranslate="auxiliumApp.tiers.finValidite">Fin Validite</span></th>
                                    <th><span jhiTranslate="auxiliumApp.tiers.compagnieAssurance">Compagnie Assurance</span></th>
                                    <th><span jhiTranslate="auxiliumApp.tiers.immatriculation">Immatriculation</span></th>
                                    <th></th>
                                </tr>
                                </thead>
                                <tbody>
                                <ng-container *ngFor="let tierr of tiers">
                                    <tr *ngIf="!tierr.deleted">
                                        <td>{{tierr.fullName}}</td>
                                        <td>{{tierr.numeroContrat}}</td>
                                        <td>{{parseHtmlDate(tierr.debutValidite)}}</td>
                                        <td>{{parseHtmlDate(tierr.finValidite)}}</td>
                                        <td>{{tierr.compagnieNom}}</td>
                                        <td>{{tierr.immatriculation}}</td>
                                        <td class="text-right">
                                            <div class="btn-group flex-btn-group-container">
                                                <button type="button" (click)="prepareEditTier(tierr)" class="btn btn-primary btn-sm" >
                                                    <span class="fa fa-pencil"></span>
                                                </button>
                                                <button type="button" (click)="deleteTier(tierr)" class="btn btn-danger btn-sm" >
                                                    <span class="fa fa-sm fa-remove"></span>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </ng-container>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
                </div>
                    <!-- End Tiers list -->
    
                <!-- Piéces Jointes -->
        <div *ngIf="sinisterSettings.isPecEdit">
            <div class="row">
                    <div class="col-lg-12">
                    <div class="card">
                        <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#pjDetails">
                            <strong jhiTranslate="auxiliumApp.pieceJointe.home.title">Piece Jointes</strong>
                        </div>
                        <div id="pjDetails" class="card-body collapse">
                            <div class="row">
                                        <div class="col-sm-3">
                                            <label jhiTranslate="auxiliumApp.pieceJointe.constat" for="attachmentConstat">constat</label>
                                        </div> 
                                        <div class="col-sm-3">
                                                <div class="form-text text-danger clearfix">
                                                    <input type="text" class="form-control" name="attachmentConstat" id="attachmentConstat"
                                                        [(ngModel)]="constatAttachment.label" hidden />     
                                                    <input id="field_nameFCart" type="file"
                                                    class="form-control form-control-sm"
                                                    name="nameFCons"
                                                    (change)="onConstatFileChange($event)"
                                                    [(ngModel)]="constatAttachment.label"
                                                    accept=".jpg,.jpeg,.png" required  />
                                                </div> 
                                            </div>
                                            <div class="col-sm-3">     
                                                    <span class="input-group-btn" *ngIf="constatPreview">
                                                        <button type="button" class="btn btn-sm btn-default" 
                                                            (click)="downloadConstatFile()"><i
                                                                class="fa fa-sm fa-download"></i></label>
                                                    </span>    
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label jhiTranslate="auxiliumApp.pieceJointe.carteGrise" for="attachmentCarteGrise">carteGrise</label>
                                        </div> 
                                        <div class="col-sm-3">
                                                <div class="form-text text-danger clearfix">
                                                    <input type="text" class="form-control" name="attachmentCarteGrise" id="attachmentCarteGrise"
                                                        [(ngModel)]="carteGriseAttachment.label" hidden />
                                                    <input id="field_nameFCart" type="file"
                                                    class="form-control form-control-sm"
                                                    name="nameFCart"
                                                    [(ngModel)]="carteGriseAttachment.label"
                                                    (change)="onCarteGrisFileChange($event)"
                                                    accept=".jpg,.jpeg,.png" required   />
                                                    <div *ngIf="!carteGrisePreview">
                                                        <span class="help-block error" [hidden]="!carteGrisePreview"> 
                                                          File is Required 
                                                        </span>
                                                       </div>
                                                </div>
                                            </div>
                                                <div class="col-sm-3">
                                                    <span class="input-group-btn" *ngIf="carteGrisePreview">
                                                        <button type="button" class="btn btn-sm btn-default" 
                                                            (click)="downloadCarteGriseFile()"><i
                                                                class="fa fa-sm fa-download"></i></label>
                                                    </span>
                                                </div>
                                       
                                    </div>
                                    <br /> 
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <label jhiTranslate="auxiliumApp.pieceJointe.acteDeCession" for="attachmentActeDeCession">acteDeCession</label>
                                        </div> 
                                        <div class="col-sm-3">
                                                <div class="form-text text-danger clearfix">
                                                    <input type="text" class="form-control" name="attachmentActeDeCession" id="attachmentActeDeCession"
                                                        [(ngModel)]="acteCessionAttachment.label" hidden />
                                            
                                                        <input id="field_nameFacte" type="file"
                                                        class="form-control form-control-sm"
                                                        name="nameFacte"
                                                        [(ngModel)]="acteCessionAttachment.label"
                                                        (change)="onActeCessionFileChange($event)"
                                                        accept=".jpg,.jpeg,.png"   required/>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <span class="input-group-btn" *ngIf="acteCessionPreview">
                                                        <button type="button" class="btn btn-sm btn-default" 
                                                            (click)="downloadActeCessionFile()"  ><i
                                                                class="fa fa-sm fa-download"></i></label>
                                                    </span>
                                        </div>
                                  </div>
                                  <br>
                                      <div class="row">
                                        <div class="col-sm-2">
                                        <button type="button" class="btn btn-primary btn-sm pull-right"
                                            (click)="ajoutNouvelpieceJointe();" style="margin-top:15px">
                                            <span class="fa fa-edit"></span> <span>Ajouter Nouvelle Piéce Jointe
                                            </span>
                                        </button>
                                    </div>
                                      </div>
                                      <br>
                                      <div *ngIf="ajoutNouvelpieceform">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <label class="form-control-label"
                                                        jhiTranslate="auxiliumApp.pieceJointe.libelle"
                                                        for="field_libelle">Libelle</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="libelle" id="libelle"
                                                        [(ngModel)]="pieceAttachment1.label" />
                                                    <div [hidden]="!isError">
                                                        <small class="form-text text-danger"
                                                            [hidden]="!islibelleError"
                                                            jhiTranslate="entity.validation.required">This
                                                            field is required.</small>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="form-control-label"
                                                        jhiTranslate="auxiliumApp.pieceJointe.file"
                                                        for="field_chemin">Fichier</label>
                                                    <input id="field_chemin" type="file"
                                                        class="form-control form-control-sm" name="field_chemin"
                                                        (change)="onPieceFileChange1($event)"
                                                        accept=".jpg,.jpeg,.png" [(ngModel)]="pieceAttachment1.type"
                                                        required />



                                                    <span class="input-group-btn" *ngIf="piecePreview1">
                                                        <button type="button" class="btn btn-sm btn-default"
                                                            (click)="downloadPieceFile1()"><i
                                                                class="fa fa-sm fa-download"></i></button>
                                                    </span>



                                                </div>
                                                <div class="col-sm-3">
                                                    <label style="width: 100%">&nbsp;</label>
                                                    <button
                                                        [disabled]="pieceAttachment1.label  == null ||  pieceAttachment1.type == undefined"
                                                        class="btn btn-sm btn-primary addnew"
                                                        (click)="ajoutPiece1();">
                                                        <span class="fa fa-plus"></span>
                                                        <span
                                                            jhiTranslate="auxiliumApp.observation.home.createLabel">Create
                                                            new Description
                                                        </span>
                                                    </button>
                                                </div>
                                                <br />
                                            </div>
                                        </div>

                                    </div>
                                    <br>
                                    <br>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="table-responsive"
                                                *ngIf="piecesAttachments && piecesAttachments.length > 0">
                                                <table class="table table-sm table-hover table-bordered">
                                                    <thead>
                                                        <tr jhiSort style="color: white; background-color: #167F92">
                                                            <th jhiSortBy="date"><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.libelle">Libelle</span>
                                                                <span class="fa fa-sort"></span></th>
                                                            <th jhiSortBy="date"><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.dateCreation">Date
                                                                    Creation</span>
                                                                <span class="fa fa-sort"></span></th>

                                                            <th><span
                                                                    jhiTranslate="auxiliumApp.pieceJointe.file">Fichier</span>
                                                                <span class="fa fa-sort"></span></th>
                                                            <th><span></span>
                                                                <span class="fa fa-sort"></span></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let piecesjointe of piecesAttachments">
                                                            <td>{{piecesjointe.label}}</td>
                                                            <td>{{piecesjointe.creationDate | date:'dd/MM/yyyy HH:mm:ss'}}</td>

                                                            <td class="text-right" *ngIf="!piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <button type="button" class="btn btn-sm btn-default"
                                                                        (click)="downloadPieceFile(piecesjointe.pieceFile)"><i
                                                                            class="fa fa-sm fa-download"></i></button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right" *ngIf="piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <button type="button" class="btn btn-sm btn-default"
                                                                        (click)="getPieceForAttachment('PLUSPHOTOPEC', piecesjointe.id, piecesjointe.originalName)"><i
                                                                            class="fa fa-sm fa-download"></i></button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right" *ngIf="!piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">
                                                                    <!--<button type="button"
                                                                                    (click)="prepareEditPieceJ(piecesjointe)"
                                                                                    class="btn btn-primary btn-sm">
                                                                                    <span class="fa fa-pencil"></span>
                                                                                </button>-->
                                                                    <button type="button"
                                                                        (click)="deletePieceJ(piecesjointe)"
                                                                        class="btn btn-danger btn-sm">
                                                                        <span class="fa fa-sm fa-remove"></span>
                                                                    </button>
                                                                </div>
                                                            </td>
                                                            <td class="text-right"
                                                                *ngIf="piecesjointe.id">
                                                                <div class="btn-group flex-btn-group-container">

                                                                    <button type="button"
                                                                        (click)="deletePieceJointesPH(piecesjointe)"
                                                                        class="btn btn-danger btn-sm"><i
                                                                            class="fa fa-sm fa-remove"></i></button>
                                                                </div>
                                                            </td>

                                                            </ng-container>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                        </div>
                    </div>
                </div>
            </div>                 
        </div>
                        <!-- End Piéces Jointes -->
                            

             <!-- Points choc -->
             <div *ngIf="sinisterSettings.isPecEdit">
                <div class="row">

             <div class="col-lg-12">
                <span class="anchor" id="formUserEdit"></span>
                <div class="card">
                <div class=" collapsible-card card-header align-items-center collapsed notice notice-info" data-toggle="collapse" href="#pcDetails">
                    <strong >Point de chocs</strong>
                </div>
                <div id="pcDetails" class="card-body collapse"> 

                <div class="container-fluid   bg-Point-choc " style="height: 800px; position:relative">
                
                </div>

                    <div class="row top-buffer">
                            

                            <div class="col-sm-3">
                                    <input type="checkbox" class="check-input" style="position: absolute;top: -800px;left: 173%;" name="avant"
                                    id="field_isavant" [(ngModel)]="pointChoc.avant"   (ngModelChange)="pointChocObligatoire()" />
                            </div>  
                         </div>  
        


           <div class="row top-buffer">

                  
                  <div class="col-sm-1">
                          <input type="checkbox" class="check-input" style="    position: absolute;
                          top: -594px;
                          left: 130%;" name="lateraleGaucheAvant"
                          id="field_islatéraleGaucheAvant"  [(ngModel)]="pointChoc.lateraleGaucheAvant"    (ngModelChange)="pointChocObligatoire()"   />

                  </div> 
               
                  <div class="col-sm-7">
                      
                  <input type="checkbox" class="check-input" name="avantGauche" style="position: absolute;
                  top: -573px;
                  left: 12%;"
                  id="field_isAvantGauche"  [(ngModel)]="pointChoc.avantGauche"   (ngModelChange)="pointChocObligatoire()"  />

                  </div>
                
                  <div class="col-sm-1">
                          <input type="checkbox" class="check-input" name="avantDroite" style="position: absolute;
                          top: -625px;
                          left: 67%;"
                          id="field_isavantDroite"  [(ngModel)]="pointChoc.avantDroite"   (ngModelChange)="pointChocObligatoire()"  />
                  </div>
                

               </div>

               <div class="row top-buffer">
                      <div class="col-sm-1">
                              <input type="checkbox" class="check-input" name="lateraleGauche" style="position: absolute;
                              top: -363px;
                              left: 50%;"
                              id="field_islateraleGauche"  [(ngModel)]="pointChoc.lateraleGauche"  (ngModelChange)="pointChocObligatoire()"   /> 
                      </div> 
                      <div class="col-sm-3"> 
                              <input type="checkbox" class="check-input" name="retroviseurGauche"style="position: absolute;
                              left: 25%;
                              top: -507px;"
                              id="field_isretroviseurGauche"  [(ngModel)]="pointChoc.retroviseurGauche" (ngModelChange)="pointChocObligatoire()"  /> 
                      </div>  
                      <div class="col-sm-3">
                           
                              <input type="checkbox" class="check-input" name="pareBriseAvant" style="position: absolute;
                              top: -523px;
                              left: 36%;"
                              id="field_ispareBriseAvant"  [(ngModel)]="pointChoc.pareBriseAvant"   (ngModelChange)="pointChocObligatoire()"  />
                      </div>

                    
                      <div class="col-sm-1">
                              <input type="checkbox" class="check-input" name="retroviseurDroite" 
                              style="position: absolute;
                              top: -511px;
                              left: 98%;" id="field_isretroviseurDroite"  [(ngModel)]="pointChoc.retroviseurDroite"  (ngModelChange)="pointChocObligatoire()" />
                      </div>
                   
                      <div class="col-sm-1">
                              <input type="checkbox" class="check-input" name="lateraleDroiteAvant" 
                              style="position: absolute;
                              top: -508px;
                              left: 165%;"  id="field_islateraleDroiteAvant"  [(ngModel)]="pointChoc.lateraleDroiteAvant"  (ngModelChange)="pointChocObligatoire()"   />
                      </div>
                      <div class="col-sm-1">
                              <input type="checkbox" class="check-input" name="lateraleDroite" 
                              id="field_islateraleDroite" style="position: absolute;
                              top: -465px;
                              left: 155%;"  [(ngModel)]="pointChoc.lateraledroite"  (ngModelChange)="pointChocObligatoire()"   />
                          </div>
                   </div>  
                
                   <div class="row top-buffer">
                          <div class="col-sm-1">
                          </div>  
                         
                          <div class="col-sm-7">     ;
                                  <input type="checkbox" class="check-input" name="vitreAvantGauche" 
                                  id="field_isvitreAvantGauche" style="position: absolute;
                                  top: -494px;
                                  left: 12%;" [(ngModel)]="pointChoc.vitreAvantGauche"  (ngModelChange)="pointChocObligatoire()"  />
                          </div> 
                         
                          <div class="col-sm-3">
                                  <input type="checkbox" class="check-input" name="vitreAvantDroit" 
                                  id="field_isvitreAvantDroit"  style="position: absolute;
                                  top: -487px;
                                  left: 36%;" [(ngModel)]="pointChoc.vitreAvantDroit"  (ngModelChange)="pointChocObligatoire()"  />

                              </div> 
                       </div>  
                    
                       <div class="row top-buffer">
                              <div class="col-sm-5">
                              </div> 
                              <div class="col-sm-3">
                                      <input type="checkbox" class="check-input" name="toit" 
                                      id="field_istoit" style="position: absolute;
                                      top: -492px;
                                      left: 6%;" [(ngModel)]="pointChoc.toit"  (ngModelChange)="pointChocObligatoire()"  />

                              </div>  
                           </div> 


                          </br>
                           <div class="row top-buffer">
                                  <div class="col-sm-1">
                                  </div>  
                                  <div class="col-sm-7">
                                          <input type="checkbox" class="check-input" name="vitreArriereGauche" 
                                          id="field_isvitreArriereGauche"  style="position: absolute;
                                          top: -475px;
                                          left: 13%;" [(ngModel)]="pointChoc.vitreArriereGauche"  (ngModelChange)="pointChocObligatoire()" />
                                  </div>  
                                  <div class="col-sm-3">
                                          <input type="checkbox" class="check-input" name="vitreArriereDroit"
                                          id="field_isvitreArrieredroit"  style="position: absolute;
                                          top: -476px;
                                          left: 13%;"  [(ngModel)]="pointChoc.vitreArriereDroit"  (ngModelChange)="pointChocObligatoire()"  />
                                      </div>  
                               </div>  

                                   </br>
                               <div class="row top-buffer">
                                    
                                      <div class="col-sm-1">
                                 </div> 
                                      &nbsp;
                                      <div class="col-sm-7">
                                              <input type="checkbox" class="check-input" name="triangleArriereGauche" 
                                              id="field_istriangleArriereGauche" style="position: absolute;
                                              top: -447px;
                                              left: 9%;"  [(ngModel)]="pointChoc.triangleArriereGauche"   (ngModelChange)="pointChocObligatoire()" /> 
                                      </div>
                                    
                                      <div class="col-sm-1">
                                              <input type="checkbox" class="check-input" name="triangleArriereDroit" 
                                              id="field_istriangleArriereDroit" style="position: absolute;
                                              top: -452px;
                                              left: 17%;"  [(ngModel)]="pointChoc.triangleArriereDroit" (ngModelChange)="pointChocObligatoire()"  /> 
                                      </div>
                                   
                                   </div>


                                   <div class="row top-buffer">
                                          <div class="col-sm-5">
                                          </div> 
                                          
                                          <div class="col-sm-3">
                                                  <input type="checkbox" class="check-input" name="lunetteArriere" 
                                                  id="field_islunetteArriere" style="position: absolute;
                                                  top: -440px;
                                                  left: 8%;" [(ngModel)]="pointChoc.lunetteArriere"  (ngModelChange)="pointChocObligatoire()"  /> 
                                          </div>  
                                       </div>


                               <div class="row top-buffer">
                                      <div class="col-sm-1">
                                              <input type="checkbox" class="check-input" name="lateraleGaucheArriere" 
                                              id="field_islateraleGaucheArriere"  style="position: absolute;
                                              top: -444px;
                                              left: 100%;" [(ngModel)]="pointChoc.lateraleGauchearriere"  (ngModelChange)="pointChocObligatoire()" />
                                      </div>  
                                              <div class="col-sm-7">
                                                      <input type="checkbox" class="check-input" name="arriereGauche" 
                                                      id="field_isarriereGauche" style="position: absolute;
                                                      top: -382px;
                                                      left: 14%;"  [(ngModel)]="pointChoc.arriereGauche"  (ngModelChange)="pointChocObligatoire()"  /> 
                                              </div>
                                              <div class="col-sm-1">
                                                      <input type="checkbox" class="check-input" name="arriereDroite"
                                                      id="field_isarriereDroite" style="position: absolute;
                                                      top: -356px;
                                                      left: 36%;" [(ngModel)]="pointChoc.arriereDroite"  (ngModelChange)="pointChocObligatoire()"  /> 
                                              </div>
                                              <div class="col-sm-1">
                                                      <input type="checkbox" class="check-input" name="lateraleDroiteArriere" 
                                                      id="field_islateraleDroiteArriere" style="position: absolute;
                                                      top: -481px;
                                                      left: 55%;" [(ngModel)]="pointChoc.lateraleDroiteArriere"  (ngModelChange)="pointChocObligatoire()"  /> 
                                              </div>
                                              <div class="col-sm-1">
                                              </div>
                              </div> 

 
                          <div class="row top-buffer">
                                  <div class="col-sm-3">
                                      </div>  
                                      <div class="col-sm-2">
                                          </div>  
                                  <div class="col-sm-3">
                                          <input type="checkbox" class="check-input" name="arriere" 
                                          id="field_isarriere" style="position: absolute;
                                          top: -263px;
                                          left: 32%;" [(ngModel)]="pointChoc.arriere"  (ngModelChange)="pointChocObligatoire()"  /> 
                                  </div>  
                               </div>                             
  

  <div class="row top-buffer">
    &nbsp;   <span > &nbsp;     Description du point de choc  :  &nbsp; </span>
  <span *ngIf="pointChoc.toit">Toit &nbsp;</span>
  <span *ngIf="pointChoc.avant">Avant &nbsp;</span>
  <span *ngIf="pointChoc.arriere" >Arriére &nbsp;</span>
  <span *ngIf="pointChoc.arriereGauche" >Arriére Gauche &nbsp;</span>
  <span *ngIf="pointChoc.lateraleGauche" >Latérale Gauche &nbsp;</span>
  <span *ngIf="pointChoc.lateraleGauchearriere">Latérale Gauche Arrière &nbsp;</span>
  <span *ngIf="pointChoc.lateraleGaucheAvant">Latérale Gauche Avant &nbsp;</span>
  <span *ngIf="pointChoc.arriereDroite" >Arriére Droite &nbsp;</span>
  <span *ngIf="pointChoc.lateraledroite" >Latérale Droite &nbsp;</span>
  <span *ngIf="pointChoc.lateraleDroiteAvant" >Latérale Droite Avant &nbsp;</span>

  <span *ngIf="pointChoc.lateraleDroiteArriere"> Latérale Droite Arriére &nbsp;</span>
  <span *ngIf="pointChoc.avantGauche"> Avant Gauche &nbsp;</span>
  <span *ngIf="pointChoc.avantDroite" > Avant Droite &nbsp;</span>
  <span *ngIf="pointChoc.retroviseurGauche" > Retroviseur Gauche &nbsp;</span>
  <span *ngIf="pointChoc.retroviseurDroite" > Retroviseur Droite  &nbsp;</span>

  <span *ngIf="pointChoc.lunetteArriere"> Lunette Arriére &nbsp;</span>
  <span *ngIf="pointChoc.pareBriseAvant"> Pare Brise Avant &nbsp;</span>
  <span *ngIf="pointChoc.triangleArriereGauche" > Triangle Arriére Gauche &nbsp;</span>
  <span *ngIf="pointChoc.triangleArriereDroit" > Triangle Arriére Droit &nbsp;</span>
  <span *ngIf="pointChoc.vitreAvantDroit" > Vitre Avant Droit &nbsp;</span>

  <span *ngIf="pointChoc.vitreAvantGauche"> Vitre Avant Gauche  &nbsp;</span>
  <span *ngIf="pointChoc.vitreArriereDroit"> Vitre Arriére Droit  &nbsp;</span>
  <span *ngIf="pointChoc.vitreArriereGauche"> Vitre Arriére Gauche  &nbsp;</span>

</div>
</div>
</div>
</div>

</div>
</div>

<!--Listes Observation-->
<div *ngIf="sinisterSettings.isPecEdit">
<div class="row">
    <div class="col-lg-12">

        <div class="card">
            <div class=" collapsible-card card-header align-items-center collapsed notice notice-info"
                data-toggle="collapse" href="#collapseObservationPec">
                <strong>Observations </strong>
            </div>
        </div>
        <div id="collapseObservationPec" class="card-body collapse">
            <div class="row">
                <div class="col-sm-6">
                    <input type="text" class="form-control form-control-sm" name="observationPec"
                        id="observationId" [(ngModel)]="observation.commentaire" />
                    <div [hidden]="!isCommentError">
                        <small class="form-text text-danger" [hidden]="!isCommentError"
                            jhiTranslate="entity.validation.required">This
                            field is required.</small>
                    </div>
                </div>
                <div class="col-sm-2">
                    <button  class="btn btn-sm btn-primary addnew"
                        (click)="addObservationPec();">
                        <span class="fa fa-plus"></span>
                        <span jhiTranslate="auxiliumApp.observation.home.createLabel">Create new
                            Observation
                        </span>
                    </button>
                    <!--<button *ngIf="isObsModeEdit" class="btn btn-sm btn-primary addnew"
                        (click)="editObservation();">
                        <span class="fa fa-pencil"></span>
                        <span jhiTranslate="auxiliumApp.observation.home.editLabel">Edit
                            Observation
                        </span>
                    </button>-->
                   
                </div>
            </div>
            <div class="row" style="margin-top: 15px;">
                <div class="col-sm-12">
                    <div class="table-responsive"
                        *ngIf="observationss && observationss.length > 0">
                        <table class="table table-sm table-hover table-bordered" style="width: 100%">
                            <thead>
                                <tr jhiSort style="color: white; background-color: #167F92">
                                    <th jhiSortBy="date"><span
                                            jhiTranslate="auxiliumApp.observation.date">Date</span>
                                        <span class="fa fa-sort"></span></th>
                                    <th><span
                                            jhiTranslate="auxiliumApp.observation.commentaire">Commentaire</span>
                                        <span class="fa fa-sort"></span></th>
                                    <th jhiSortBy="userLogin"><span
                                            jhiTranslate="auxiliumApp.observation.user">Utilisateur</span>
                                        <span class="fa fa-sort"></span></th>
                                    <!--<th></th>-->
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let observation of observationss">
                                    <tr *ngIf="!observation.deleted">
                                        <td>{{observation.date  | date:'dd/MM/yy'}}</td>
                                        <td>{{observation.commentaire}}</td>
                                        <td>{{observation.firstName}}
                                            {{observation.lastName}}</td>
                                        <!--<td class="text-right">
                                            <div class="btn-group flex-btn-group-container">
                                                <button type="button"
                                                    (click)="prepareEditObservation(observation)"
                                                    class="btn btn-primary btn-sm">
                                                    <span class="fa fa-pencil"></span>
                                                </button>
                                                <button type="button"
                                                    (click)="deleteObservation(observation)"
                                                    class="btn btn-danger btn-sm">
                                                    <span class="fa fa-trash"></span>
                                                </button>
                                            </div>
                                        </td>-->
                                    </tr>
                                </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>

    </div>
    </div>
    <!--Listes Observations-->


          
    <!-- End Points Choc -->
                  

 <!-- Fin formulaire   sinister pec  by Halim -->
 <!-- assistance service -->
                        <div class="card" *ngIf="isPrestationEdit">
                            <span class="anchor" id="formUserEdit"></span>
                            <div class="card-header d-flex align-items-center no-padding">
                                <div class="notice notice-info">
                                    <span class="fa fa-list" style="color: #45ABCD"></span>&nbsp;&nbsp;<strong jhiTranslate="auxiliumApp.sinister.home.createOrEditServiceLabel">Service</strong>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-sm-5">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.sinisterPrestation.sgovernorate">gouvernorat</label>
                                                    <select class="form-control form-control-sm" id="field_lieu" name="lieu" [(ngModel)]="sinisterPrestation.incidentGovernorateId"
                                                        (ngModelChange)="fetchDelegationsByGovernorate(sinisterPrestation.incidentGovernorateId, true)" required>
                                                        <option [ngValue]="gouvernoratOption.id"
                                                            *ngFor="let gouvernoratOption of governorates">
                                                            {{gouvernoratOption.label}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.sinisterPrestation.sdelegation" for="field_ville">lieu</label>
                                                    <select class="form-control form-control-sm" id="field_ville" name="ville" [(ngModel)]="sinisterPrestation.incidentLocationId" required>
                                                        <option [ngValue]="sysVilleOption.id" *ngFor="let sysVilleOption of delegations">
                                                            {{sysVilleOption.label}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-5">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.sinisterPrestation.gouvernorat">gouvernorat</label>
                                                    <select class="form-control form-control-sm" id="field_destGovernorate" name="destGovernorate" [(ngModel)]="sinisterPrestation.destinationGovernorateId" (ngModelChange)="fetchDestDelegationsByGovernorate(sinisterPrestation.destinationGovernorateId, true)" required>
                                                        <option [ngValue]="gouvernoratOption.id" *ngFor="let gouvernoratOption of governorates">
                                                            {{gouvernoratOption.label}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label jhiTranslate="auxiliumApp.sinisterPrestation.ville" for="field_destCity">lieu</label>
                                                    <select class="form-control form-control-sm" id="field_destCity" name="destCity" [(ngModel)]="sinisterPrestation.destinationLocationId" required>
                                                        <option [ngValue]="sysVilleOption.id" *ngFor="let sysVilleOption of delegationsDest">{{sysVilleOption.label}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-2">
                                        <div class="form-group">
                                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.distance" for="field_distance">distance</label>
                                            <input *ngIf="sinisterSettings.isServiceRemorquage" type="number" class="form-control form-control-sm" name="distance" id="field_distance" [(ngModel)]="sinisterPrestation.mileage" (ngModelChange)="calculatePriceHt();" min="minMileage" max="maxMileage" required/>
                                            <input *ngIf="!sinisterSettings.isServiceRemorquage" type="number" class="form-control form-control-sm" name="distance" id="field_distance" [(ngModel)]="sinisterPrestation.mileage" min="0"/>
                                            <div [hidden]="!maxValueMileage && !minValueMileage">
                                            <small class="form-text text-danger"
                                                [hidden]="!maxValueMileage"
                                                jhiTranslate="entity.validation.maxOrEgale"
                                                translateValues="{ max: 60 }">This
                                                field cannot be more
                                                than 100.
                                            </small>
                                                <small class="form-text text-danger"
                                                [hidden]="!minValueMileage"
                                                jhiTranslate="entity.validation.minOrEgale"
                                                translateValues="{ min: 60 }">This
                                                field cannot be more
                                                than 100.
                                            </small>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.remorqueur"
                                                for="field_affectedTugLabel">remorqueur</label> <i class="fa fa-sm fa-info-circle"
                                                title="{{sinisterPrestation.affectedTruckLabel}}"></i>
                                            <div class="input-group">
                                                <input type="text" class="form-control form-control-sm" name="affectedTugLabel" id="field_affectedTugLabel"
                                                    [(ngModel)]="sinisterPrestation.affectedTugLabel" required  readonly/>
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-sm btn-default" (click)="selectTug()"><i
                                                            class="fa fa-sm fa-truck"></i></button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="form-group">
                                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.amountHt"
                                                for="field_amountHt">amountHt</label>
                                            <input type="text" class="form-control form-control-sm" name="amountHt" id="field_amountHt"
                                                [(ngModel)]="sinisterPrestation.priceHt" (ngModelChange)="calculatePriceTtc();" required pattern="^[0-9]+(\.[0-9]{1,3})?" [readonly]="sinisterSettings.readOnlyPriceHt"/>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="form-group">
                                            <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.amountTtc"
                                                for="field_amountTtc">amountTtc</label>
                                            <input type="text" class="form-control form-control-sm" name="amountTtc" id="field_amountTtc"
                                                [(ngModel)]="sinisterPrestation.priceTtc" required pattern="^[0-9]+(\.[0-9]{1,3})?" readonly/>
                                        </div>
                                    </div>
                                    <div class="col-sm-5">
                                        <div class="row">
                                            <div class="col-lg-3" *ngIf="sinisterSettings.heavyWeights">
                                                <label class="form-control-label" for="field_heavyWeights" style="width: 100%;">&nbsp;</label>
                                                <input type="checkbox" class="check-input" name="heavyWeights" id="field_heavyWeights"
                                                    [(ngModel)]="sinisterPrestation.heavyWeights" (ngModelChange)="calculatePriceHt();" />
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.heavyWeights"
                                                    for="field_heavyWeights">heavyWeights</label>
                                            </div>
                                            <div class="col-lg-3" *ngIf="sinisterSettings.holidays">
                                                <label class="form-control-label" for="field_holidays" style="width: 100%;">&nbsp;</label>
                                                <input type="checkbox" class="check-input" name="holidays" id="field_holidays"
                                                    [(ngModel)]="sinisterPrestation.holidays" (ngModelChange)="calculatePriceHt();" />
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.holidays"
                                                    for="field_holidays">holidays</label>
                                            </div>
                                            <div class="col-lg-3" *ngIf="sinisterSettings.night">
                                                <label class="form-control-label" for="field_night" style="width: 100%;">&nbsp;</label>
                                                <input type="checkbox" class="check-input" name="night" id="field_night"
                                                    [(ngModel)]="sinisterPrestation.night" (ngModelChange)="calculatePriceHt();" [disabled]="sinisterPrestation.halfPremium" />
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.night"
                                                    for="field_night">night</label>
                                            </div>
                                            <div class="col-lg-3" *ngIf="sinisterSettings.halfPremium">
                                                <label class="form-control-label" for="field_halfPremium" style="width: 100%;">&nbsp;</label>
                                                <input type="checkbox" class="check-input" name="halfPremium" id="field_halfPremium"
                                                    [(ngModel)]="sinisterPrestation.halfPremium" (ngModelChange)="calculatePriceHt();" [disabled]="sinisterPrestation.night"/>
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.halfPremium"
                                                    for="field_halfPremium">halfPremium</label>
                                            </div>
                                            <div class="col-lg-3" *ngIf="sinisterSettings.fourPorteF">
                                                <label class="form-control-label" for="field_fourPorteF" style="width: 100%;">&nbsp;</label>
                                                <input type="checkbox" class="check-input" name="fourPorteF" id="field_fourPorteF"
                                                    [(ngModel)]="sinisterPrestation.fourPorteF" (ngModelChange)="calculatePriceHt();"
                                                    [disabled]="sinisterPrestation.fourPorteK" />

                                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.fourPorteF"
                                                    for="field_fourPorteF">fourPorteF</label>
                                            </div>
                                            <div class="col-lg-3" *ngIf="sinisterSettings.fourPorteK">
                                                <label class="form-control-label" for="field_fourPorteK" style="width: 100%;">&nbsp;</label>
                                                <input type="checkbox" class="check-input" name="fourPorteK" id="field_fourPorteK"
                                                    [(ngModel)]="sinisterPrestation.fourPorteK" (ngModelChange)="calculatePriceHt();"
                                                    [disabled]="sinisterPrestation.fourPorteF"/>
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.fourPorteK"
                                                    for="field_fourPorteK">fourPorteK</label>
                                            </div>
                                            <div class="col-lg-3" *ngIf="sinisterSettings.isR">
                                                <label class="form-control-label" for="field_R" style="width: 100%;">&nbsp;</label>
                                                <input type="checkbox" class="check-input" name="R" id="field_R"
                                                    [(ngModel)]="sinisterPrestation.isR" (ngModelChange)="mileageMinMax();"
                                                    [disabled]="sinisterPrestation.isU" />

                                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.R"
                                                    for="field_R">R</label>
                                            </div>
                                            <div class="col-lg-3" *ngIf="sinisterSettings.isU">
                                                <label class="form-control-label" for="field_U" style="width: 100%;">&nbsp;</label>
                                                <input type="checkbox" class="check-input" name="U" id="field_U"
                                                    [(ngModel)]="sinisterPrestation.isU" (ngModelChange)="mileageMinMax();"
                                                    [disabled]="sinisterPrestation.isR"/>
                                                <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.U"
                                                    for="field_U">U</label>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-sm-5">
                                        <div class="row">

                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.tugArrivalDate"
                                                        for="field_tugArrivalDate">tugArrivalDate</label>
                                                    <div class="input-group">
                                                        <input id="field_tugArrivalDate" type="text" class="form-control form-control-sm" name="tugArrivalDate" [minDate]="sinister.incidentDate" [maxDate]="sinisterPrestation.insuredArrivalDate"
                                                            ngbDatepicker #tugArrivalDate="ngbDatepicker" [(ngModel)]="sinisterPrestation.tugArrivalDate" [required]="tugArrivalTime"/>
                                                        <span class="input-group-btn">
                                                            <button type="button" class="btn btn-sm btn-default" (click)="tugArrivalDate.toggle()"><i class="fa fa-sm fa-calendar"></i></button>
                                                        </span>&nbsp;&nbsp;
                                                        <ngb-timepicker size="small" [(ngModel)]="tugArrivalTime" (ngModelChange)="validateTugArrivalTime();" [spinners]="false" name="tugArrivalTime" [required]="sinisterPrestation.tugArrivalDate">
                                                        </ngb-timepicker>
                                                    </div>
                                                </div>
                                                <div [hidden]="prestationDateValide">
                                                    <small class="form-text text-danger" [hidden]="prestationDateValide">Date / heure arrivée remorqueur doit être inférieur à date / heure arrivée assuré</small>
                                                </div>

                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label" jhiTranslate="auxiliumApp.sinisterPrestation.insuredArrivalDate"
                                                        for="field_insuredArrivalDate">insuredArrivalDate</label>
                                                    <div class="input-group">
                                                        <input id="field_insuredArrivalDate" type="text" class="form-control form-control-sm" name="insuredArrivalDate" ngbDatepicker #insuredArrivalDate="ngbDatepicker" [minDate]="sinisterPrestation.tugArrivalDate"
                                                            [(ngModel)]="sinisterPrestation.insuredArrivalDate" [required]="insuredArrivalTime"/>
                                                        <span class="input-group-btn">
                                                            <button type="button" class="btn btn-sm btn-default" (click)="insuredArrivalDate.toggle()"><i class="fa fa-sm fa-calendar"></i></button>
                                                        </span>&nbsp;&nbsp;
                                                        <ngb-timepicker  size="small" [(ngModel)]="insuredArrivalTime" (ngModelChange)="validateInsuredArrivalTime();" [spinners]="false" name="insuredArrivalTime" [required]="sinisterPrestation.insuredArrivalDate"></ngb-timepicker>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-5">
                                        <div class="row">
                                            <div class="col-lg-10">
                                                <div class="form-group" *ngIf="sinisterSettings.showCancelGrounds">
                                                    <label jhiTranslate="auxiliumApp.sinisterPrestation.cancelGrounds">cancelGrounds</label>
                                                    <select class="form-control form-control-sm" id="field_cancelGrounds" name="cancelGrounds"
                                                        [(ngModel)]="sinisterPrestation.cancelGroundsId" required>
                                                        <option [ngValue]="option.id" *ngFor="let option of cancelGrounds">
                                                            {{option.label}}
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="form-group" *ngIf="sinisterSettings.showReopenGrounds">
                                                    <label jhiTranslate="auxiliumApp.sinisterPrestation.reopenGrounds">reopenGrounds</label>
                                                    <select class="form-control form-control-sm" id="field_reopenGrounds" name="reopenGrounds"
                                                        [(ngModel)]="sinisterPrestation.reopenGroundsId" required>
                                                        <option [ngValue]="option.id" *ngFor="let option of reopenGrounds">
                                                            {{option.label}}
                                                        </option>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                         <!----------------------------------------------------------------------------------Observation---------------------------------------------------------------------------->

                
                    <div class="row" *ngIf="isPrestationEdit">
                        <div class="col-lg-12">

                            <div class="card">
                                <div class=" collapsible-card card-header align-items-center collapsed notice notice-info"
                                    data-toggle="collapse" href="#collapseOb">
                                    <strong>Observations </strong>
                                </div>
                                <div id="collapseOb" class="card-body collapse">

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control form-control-sm" name="observation"
                                                id="observationId" [(ngModel)]="observation.commentaire" />
                                            <div [hidden]="!isCommentError">
                                                <small class="form-text text-danger" [hidden]="!isCommentError"
                                                    jhiTranslate="entity.validation.required">This
                                                    field is required.</small>
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <button *ngIf="!isObsModeEdit" class="btn btn-sm btn-primary addnew"
                                                (click)="addObservation();">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="auxiliumApp.observation.home.createLabel">Create
                                                    new
                                                    Observation
                                                </span>
                                            </button>
                                            <button *ngIf="isObsModeEdit" class="btn btn-sm btn-primary addnew"
                                                (click)="editObservation();">
                                                <span class="fa fa-pencil"></span>
                                                <span jhiTranslate="auxiliumApp.observation.home.editLabel">Edit
                                                    Observation
                                                </span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 15px;">
                                        <div class="col-sm-12">
                                            <div class="table-responsive"
                                                *ngIf="observation && observations.length > 0">
                                                <table class="table table-sm table-hover table-bordered" style="width: 100%">
                                                    <thead>
                                                        <tr jhiSort style="color: white; background-color: #167F92">
                                                            <th jhiSortBy="date"><span
                                                                    jhiTranslate="auxiliumApp.observation.date">Date</span>
                                                                <span class="fa fa-sort"></span></th>
                                                            <th><span
                                                                    jhiTranslate="auxiliumApp.observation.commentaire">Commentaire</span>
                                                                <span class="fa fa-sort"></span></th>
                                                            <th jhiSortBy="userLogin"><span
                                                                    jhiTranslate="auxiliumApp.observation.user">Utilisateur</span>
                                                                <span class="fa fa-sort"></span></th>
                                                            <!--<th></th>-->
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <ng-container *ngFor="let observation of observations">
                                                            <tr *ngIf="!observation.deleted">
                                                                <td>{{observation.date | date:'dd/MM/yyyy'}}</td>
                                                                <td>{{observation.commentaire}}</td>
                                                                <td>{{observation.firstName}} {{observation.lastName}}</td>
                                                                <!--<td class="text-right">
                                                                    <div class="btn-group flex-btn-group-container">
                                                                        <button type="button"
                                                                            (click)="prepareEditObservation(observation)"
                                                                            class="btn btn-primary btn-sm">
                                                                            <span class="fa fa-pencil"></span>
                                                                        </button>
                                                                        <button type="button"
                                                                            (click)="deleteObservation(observation)"
                                                                            class="btn btn-danger btn-sm">
                                                                            <span class="fa fa-trash"></span>
                                                                        </button>
                                                                    </div>
                                                                </td>-->
                                                            </tr>
                                                        </ng-container>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
            
                <!------------------------------------------------------- fin observation ----------------------------------------------------------->

                        <div class="row">
                            <div class="col-sm-6">
                                    <div class="alert alert-danger" *ngIf="!tierRespMin" jhiTranslate="auxiliumApp.sinisterPec.minTiersResponsable">
                                            <strong>Merci d'ajouter un tiers à afficher</strong>
                                        </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                                    <button type="submit" *ngIf="decisionPrest && !isVRSelected " [disabled]="editForm.form.invalid || !PointChocRequired ||  isSaving   || !testDateAccident ||  !tiersLength || disabledDecisionButton || !refBar" (click)="decider()" class="btn btn-sm btn-primary float-right">
                                           
                                            <span jhiTranslate="entity.action.decision">décision</span>
                                    </button>
                                <button type="submit" *ngIf="!isVRSelected " [disabled]="editForm.form.invalid || !PointChocRequired ||isSaving || !testDateAccident || (!isPrestationEdit  && !sinisterSettings.isPecEdit ) || !tiersLength || !refBar || (sinisterSettings.isServiceRemorquage && (maxValueMileage || minValueMileage)) " class="btn btn-sm btn-primary float-right" (click)="save()">
                                    <span class="fa fa-save"></span>&nbsp;
                                    <span jhiTranslate="entity.action.save">Save</span>
                                </button>
                                <button *ngIf="sinisterPec.prestAApprouv && !isVRSelected " [disabled]="editForm.form.invalid || !PointChocRequired ||isSaving || !testDateAccident || (!isPrestationEdit  && !sinisterSettings.isPecEdit) || !tiersLength || !refBar" type="submit" class="btn btn-sm btn-primary float-right" (click)="approuve()">
                            
                                    <span>Approuver</span>
                                </button>
                                <button *ngIf="sinisterPec.prestAApprouv && !isVRSelected " [disabled]="editForm.form.invalid || !PointChocRequired ||isSaving || !testDateAccident || (!isPrestationEdit  && !sinisterSettings.isPecEdit) || !tiersLength || !refBar" type="submit" class="btn btn-sm btn-primary float-right" (click)="approuveWithModif()">
                                
                                <span>Approuver avec modification</span>
                                </button>
                                <button type="button" *ngIf="sinisterSettings.canCancel && !isVRSelected " class="btn btn-sm btn-primary float-right" (click)="cancel()">
                                    <span class="fa fa-close"></span>&nbsp;
                                    <span jhiTranslate="entity.action.cancel">cancel</span>
                                </button>&nbsp;&nbsp;
                                <button type="button" *ngIf="sinisterSettings.canReopen && !isVRSelected " class="btn btn-sm btn-primary float-right" (click)="reopen()">
                                    <span class="fa fa-close"></span>&nbsp;
                                    <span jhiTranslate="entity.action.reopen">reopen</span>
                                </button>
                            </div>
                        
                        <!-- Start card historique sinister -->
                        <div class="card" *ngIf="sinisterPrestations && sinisterPrestations.length > 0">
                            <span class="anchor" id="sinisterPrestationsAnc"></span>
                            <div class="card-header d-flex align-items-center no-padding">
                                <div class="notice notice-info">
                                    <span class="fa fa-list" style="color: #45ABCD"></span>&nbsp;&nbsp;<strong
                                        jhiTranslate="auxiliumApp.sinister.home.prestationsHisto">Prestations</strong>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm table-hover table-bordered" style="width: 100%">
                                        <thead style="color:white;background-color:#11859b">
                                            <tr>
                                                <th><span jhiTranslate="auxiliumApp.prestation.typePrestation">typePrestation</span></th>
                                                <th><span jhiTranslate="auxiliumApp.prestation.dateCreation">Date Creation</span></th>
                                                <th><span jhiTranslate="auxiliumApp.prestation.dateCloture">Date Cloture</span></th>
                                                <th><span jhiTranslate="auxiliumApp.prestation.dateDerniereMaj">Date Derniere Maj</span></th>
                                                <th><span jhiTranslate="auxiliumApp.prestation.etatPrestation">etatPrestation</span></th>
                                                <th class="no-sort"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let prestation of sinisterPrestations">
                                                <td>{{prestation.serviceType}}</td>
                                                <td>{{prestation.creationDate | date:'dd/MM/yyyy'}}</td>
                                                <td>{{prestation.closureDate | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                                                <td>{{prestation.updateDate | date:'dd/MM/yyyy'}}</td>
                                                <td>{{prestation.statusLabel}}</td>
                                                <td class="text-right">
                                                    <div class="btn-group flex-btn-group-container">
                                                        <button type="button" (click)="openPrestationView(prestation.id)" replaceUrl="true" class="btn btn-info btn-sm">
                                                            <span class="fa fa-sm fa-eye"></span>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div [hidden]="!(viewsinisterPec && viewsinisterPec.length > 0)"  >
                            <div class="card-header d-flex align-items-center no-padding">
                                <div class="notice notice-info">
                                    <span class="fa fa-list" style="color: #45ABCD"></span>&nbsp;&nbsp;<strong
                                        jhiTranslate="auxiliumApp.sinister.home.prestationsHistoPec">PEC</strong>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"  class="table table-sm table-hover table-bordered " style="width: 100%;" >
                                        <thead style="color:white;background-color:#11859b">
                                            <tr>
                                                <th><span jhiTranslate="auxiliumApp.prestation.typePrestation">typePrestation</span></th>
                                                <th><span jhiTranslate="auxiliumApp.prestation.dateCreation">Date Creation</span></th>
                                                <th><span jhiTranslate="auxiliumApp.prestation.dateDeclaration">Date Declaration</span></th>
                                                <th><span jhiTranslate="auxiliumApp.prestation.dateCloture">Date Cloture</span></th>
                                                <th><span jhiTranslate="auxiliumApp.prestation.etapePrestation">etapePrestation</span></th>
                                                <th class="no-sort"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let prestation of viewsinisterPec">
                                                <td>Prise en charge</td>
                                                <td>{{prestation.creationDate | date:'dd/MM/yyyy'}}</td>
                                                <td>{{prestation.declarationDate | date:'dd/MM/yyyy h:mm a'}}</td>
                                                <td>{{prestation.clotureDate | date:'dd/MM/yyyy'}}</td>
                                                <td>{{prestation.stepPec}}</td>
                                                <td class="text-right">
                                                    <div class="btn-group flex-btn-group-container">
                                                        <button type="button" (click)="openPecView(prestation.id)" replaceUrl="true" class="btn btn-info btn-sm">
                                                            <span class="fa fa-sm fa-eye"></span>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- End card historique sinister -->
                    </div>
                    </div>
                </div>
            </div>
        </form>      
    </div>
</section>